webpackJsonp([1],{"/U6h":function(t,e){},"0SG8":function(t,e){},"0mdq":function(t,e){},"1TlC":function(t,e){},"28ez":function(t,e){},"2JMB":function(t,e){},"2S6b":function(t,e){},"2rpq":function(t,e){},"3WE8":function(t,e){},"3sW8":function(t,e){},"43tV":function(t,e){},"4Mdf":function(t,e){},"4V7E":function(t,e){},"4fUl":function(t,e){},"5hy5":function(t,e){},"6vPb":function(t,e){},"8KCi":function(t,e){},"8jjT":function(t,e){},BTol:function(t,e){},CEzP:function(t,e){},CLre:function(t,e){},"F+Ns":function(t,e){},G0ns:function(t,e){},H4pB:function(t,e){},HdmP:function(t,e){},HhZ1:function(t,e){},"Hm+o":function(t,e){},IexR:function(t,e){},Jo3k:function(t,e){},JvAw:function(t,e){},KQjy:function(t,e){},"LJ/V":function(t,e){},LXTj:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("//Fk"),i=s.n(o),a=s("mvHQ"),n=s.n(a),r=s("7+uW"),d=s("zL8q"),c=s.n(d),u=(s("tvR6"),s("/ocq")),l=s("7t+N"),h=s.n(l),v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",[t.IfFanhuiShow?s("div",{staticClass:"fanhui",on:{click:t.Fanhui}},[s("i",{staticClass:"iconfont icon-fanhui"})]):t._e(),t._v(" "),s("span",[t._v(t._s(t.headerText))]),t._v(" "),t.IfSousuoShow?s("div",{staticClass:"sousuo",on:{click:t.Sousuo}},[s("i",{staticClass:"iconfont icon-sousuo"})]):t._e(),t._v(" "),t.IfAddShow?s("div",{staticClass:"add",on:{click:t.Add}},[s("i",{staticClass:"iconfont icon-jia"})]):t._e(),t._v(" "),t.IfChakanShow?s("div",{staticClass:"chakan",on:{click:t.Chakan}},[s("i",{staticClass:"iconfont icon-chakan"})]):t._e(),t._v(" "),t.IfXiaoxiShow?s("div",{staticClass:"xiaoxi",on:{click:t.Xiaoxi}},[s("i",{staticClass:"iconfont icon-xiaoxi"})]):t._e(),t._v(" "),t.IfTextShow?s("div",{staticClass:"text",on:{click:t.Text}},[s("span",[t._v(t._s(t.TextContent))])]):t._e()])},staticRenderFns:[]};var _=s("VU/8")({data:function(){return{}},props:{headerText:"",IfSousuoShow:!1,IfFanhuiShow:!1,IfAddShow:!1,IfChakanShow:!1,IfXiaoxiShow:!1,IfTextShow:!1,TextContent:""},methods:{Fanhui:function(){this.IfFanhuiShow&&this.$emit("f_Fanhui")},Sousuo:function(){this.IfSousuoShow&&this.$emit("f_Sousuo")},Add:function(){this.IfAddShow&&this.$emit("f_Add")},Chakan:function(){this.IfChakanShow&&this.$emit("f_Chakan")},Xiaoxi:function(){this.IfXiaoxiShow&&this.$emit("f_Xiaoxi")},Text:function(){this.IfTextShow&&this.$emit("f_Text")}}},v,!1,function(t){s("QKcR")},"data-v-086ed655",null).exports,p={data:function(){return{}},props:{BouncedName:"",SelectBoxList:{type:Array,default:function(){return[]}}},methods:{selectCancel:function(){this.$emit("selectCancel")},SelectComit:function(t){this.$emit("selectedItem",t)}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses"},[s("div",{staticClass:"SelectTitle"},[t._v("请选择"+t._s(t.BouncedName))]),t._v(" "),s("div",{staticClass:"SelectItem"},t._l(t.SelectBoxList,function(e,o){return s("div",{key:o,attrs:{id:o},on:{click:function(e){return t.SelectComit(o)}}},[t._v(t._s(e.name))])}),0),t._v(" "),s("div",{staticClass:"cancel",on:{click:t.selectCancel}},[t._v("取消")])])])},staticRenderFns:[]};var m=s("VU/8")(p,f,!1,function(t){s("4Mdf")},"data-v-082e45dc",null).exports,C={name:"Login",data:function(){return{headerText:"登录",userName:"",password:"",BusinessList:[],SelectBoxFlag:!1,BouncedName:"业务代码"}},components:{componentHeader:_,componentSelectBox:m},mounted:function(){this.$refs.userName.focus(),h()("input").attr("maxlength","50"),window.WXBind_NO_Ajax=this.WXBind_NO_Ajax,window.WXBind_YES_Ajax=this.WXBind_YES_Ajax,window.VersionShow=this.VersionShow,window.SetUserNameAndPassword=this.SetUserNameAndPassword,this.tellServerAddress(this.HOST),this.loginVueMounted(),window.WXInstall_Check_Ajax=this.WXInstall_Check_Ajax,window.Device_Ajax=this.Device_Ajax},created:function(){"WX"==this.$store.state.G_AppOrWX&&this.$router.push({name:"WXLogin"}),this.getCookie("e")},methods:{WXInstall_Check_Ajax:function(t){"NO"==t&&this.$refs.ThirdPartyLogin.remove()},loginVueMounted:function(){try{CallAndroidOrIOS.callAndroid("登录页面已加载","")}catch(t){}try{CallAndroidOrIOS("登录页面已加载")}catch(t){}},tellServerAddress:function(t){console.log("tellServerAddress：");try{CallAndroidOrIOS.callAndroid("服务器地址",t)}catch(t){}try{CallAndroidOrIOS("服务器地址",t)}catch(t){}},WXBind_NO_Ajax:function(t){this.$store.state.WX_Openid=t,this.$router.push({name:"Binding",query:{}})},WXBind_YES_Ajax:function(t){var e=decodeURIComponent(t),s=JSON.parse(e);this.userName=s.data.user.cellphone,this.loginSuccess(s)},VersionShow:function(t){this.$store.state.App_Version=t},SetUserNameAndPassword:function(t,e){this.userName=t,this.password=e},Device_Ajax:function(t){this.$store.state.Device=t},login:function(){var t=this;if(t.$store.state.QuerySalesOrder_supplierListIdx=0,t.$store.state.CustomerVisit_supplierListIdx=0,t.$store.state.SalesOrder_supplierListIdx=0,this.userName)if(this.password){var e={cellphone:this.userName,password:this.password,wxOpenid:""};this.httpRequest("login.do",e,function(e){t.loginSuccess(e)})}else t.$alert("密码不能为空","提示",{confirmButtonText:"确定"});else t.$alert("用户名不能为空","提示",{confirmButtonText:"确定"})},loginSuccess:function(t){if(this.$store.state.userInfo=t.data.user,this.KeepUserNameAndPassord(this.userName,this.password),this.setCookie(this.userName,this.password,219e3),this.BusinessList=t.data.business,1==t.data.business.length){this.$store.state.businessInfo=this.BusinessList[0];for(var e=0;e<this.$store.state.RoleTotalData.length;e++)this.$store.state.userInfo.business==this.$store.state.RoleTotalData[e].business&&(this.$store.state.CurrentRole=this.$store.state.RoleTotalData[e].EnglishRoleName);for(var s in this.$store.state.RoleModuleTotalData)this.$store.state.CurrentRole==s&&(this.$store.state.CurrentRoleData=this.$store.state.RoleModuleTotalData[s]);this.SelectBoxFlag=!1,this.$router.push({name:"Index",query:{}})}else t.data.business.length>1?this.SelectBoxFlag=!0:this.$alert("该账号未绑定业务代码","提示",{confirmButtonText:"确定"})},selectedItem:function(t){this.$store.state.businessInfo=this.BusinessList[t];for(var e=0;e<this.$store.state.RoleTotalData.length;e++)this.$store.state.userInfo.business==this.$store.state.RoleTotalData[e].business&&(this.$store.state.CurrentRole=this.$store.state.RoleTotalData[e].EnglishRoleName);for(var s in this.$store.state.RoleModuleTotalData)this.$store.state.CurrentRole==s&&(this.$store.state.CurrentRoleData=this.$store.state.RoleModuleTotalData[s]);this.SelectBoxFlag=!1,this.$router.push({name:"Index",query:{}})},selectCancel:function(){this.SelectBoxFlag=!1},repwd:function(){this.$router.push({name:"Identifying",query:{page:"ForgotPwd"}})},ThirdPartyLogin:function(){try{CallAndroidOrIOS.callAndroid("微信登录","")}catch(t){}try{CallAndroidOrIOS("微信登录")}catch(t){}}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Login"},[s("div",{staticClass:"container haveHeadcontainer"},[t._m(0),t._v(" "),s("div",{staticClass:"loginContainer"},[s("div",[s("i",{staticClass:"iconfont icon-denglu"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],ref:"userName",staticClass:"userName",attrs:{placeholder:"请输入手机号"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t._v(" "),t.userName?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("userName")}}}):t._e()]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-mima"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",staticClass:"pswd",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),t.password?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("password")}}}):t._e()]),t._v(" "),s("div",{staticClass:"BtnComponent",on:{click:t.login}},[s("div",[t._v("登  录")])]),t._v(" "),s("div",{staticClass:"repswd"},[s("span",{on:{click:t.repwd}},[t._v("忘记密码")])])]),t._v(" "),s("div",{ref:"ThirdPartyLogin",staticClass:"ThirdPartyLogin"},[t._m(1),t._v(" "),s("div",{staticClass:"ThirdParty_content",on:{click:t.ThirdPartyLogin}},[s("i",{staticClass:"iconfont icon-weixin"})])])]),t._v(" "),s("div",{staticClass:"verseion"},[t._v(t._s(t.$store.state.App_Version))]),t._v(" "),s("div",{staticClass:"register"},[t._v("门店注册请移步至“卖货易”微信公众号")]),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.BusinessList,BouncedName:t.BouncedName},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"LoginLogo"},[e("img",{attrs:{src:"static/img/Logo/logo.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ThirdParty_title"},[e("div"),this._v(" "),e("div",[this._v("第三方登录")]),this._v(" "),e("div")])}]};var T=s("VU/8")(C,g,!1,function(t){s("H4pB")},"data-v-a0067bba",null).exports,I={name:"ForgotPwd",data:function(){return{headerText:"忘记密码",newPassWord:"",rePassWord:"",tips_Msg:"",ifTips:!1}},components:{componentHeader:_},mounted:function(){this.$refs.newPassWord.focus()},methods:{f_Fanhui:function(){this.$router.go(-1)},goPrev:function(){this.$router.push({name:"Identifying",query:{page:"ForgotPwd"}})},submit:function(){var t=this;if(""!=t.newPassWord)if(""!=t.rePassWord)if(t.newPassWord==t.rePassWord)if(t.newPassWord.length<6)t.$alert("密码不能小于六位数","提示",{confirmButtonText:"确定"});else{var e={cellphone:t.$route.query.phoneNum,next_page:"wangjimima",oldPassword:t.newPassWord,password:t.newPassWord};t.httpRequest("updateUserPassword.do",e,function(e){t.ifTips=!0,t.tips_Msg=e.Msg,t.KeepUserNameAndPassord(t.$route.query.phoneNum,""),t.setCookie(t.$route.query.phoneNum,"",219e3),setTimeout(function(){t.ifTips=!1,t.$router.push({name:"Login"})},1500)})}else t.$alert("两次密码输入不一致","提示",{confirmButtonText:"确定"});else t.$alert("请输入确认密码","提示",{confirmButtonText:"确定"});else t.$alert("请输入新密码","提示",{confirmButtonText:"确定"})}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ForgotPwd"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"identeContainer"},[s("div",[s("span",[t._v("新 密 码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassWord,expression:"newPassWord"}],ref:"newPassWord",attrs:{placeholder:"请输入新密码"},domProps:{value:t.newPassWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("rePassWord")},input:function(e){e.target.composing||(t.newPassWord=e.target.value)}}}),t._v(" "),t.newPassWord?s("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("newPassWord")}}}):t._e()]),t._v(" "),s("div",[s("span",[t._v("确认密码")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.rePassWord,expression:"rePassWord"}],ref:"rePassWord",attrs:{placeholder:"请确认新密码"},domProps:{value:t.rePassWord},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||(t.rePassWord=e.target.value)}}}),t._v(" "),t.rePassWord?s("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("rePassWord")}}}):t._e()]),t._v(" "),s("div",{staticClass:"BtnComponent",on:{click:t.submit}},[s("div",[t._v("确 认")])])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])],1)},staticRenderFns:[]};var y=s("VU/8")(I,S,!1,function(t){s("WWjl")},"data-v-0632411c",null).exports,D={name:"Identifying",data:function(){return{headerText:"验证手机号",page:"wangjimima",phoneNum:"",identifyingCode:"",tips_Msg:"",ifTips:!1,MinuteNum:60,CountDown:""}},components:{componentHeader:_},mounted:function(){this.$refs.phoneNum.focus()},created:function(){this.$route.query.page&&("ForgotPwd"==this.$route.query.page?this.page="wangjimima":"Reg"==this.$route.query.page&&(this.page="zhucezhanghao"))},beforeDestroy:function(){clearInterval(this.CountDown)},methods:{f_Fanhui:function(){this.$router.go(-1)},sendIdentifying:function(){var t=this;if(60==t.MinuteNum)if(t.phoneNum.length)if(11!=t.phoneNum.length)t.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else{var e={cellphone:t.phoneNum,next_page:t.page};this.httpRequest("sendYzmToCellphone.do",e,function(e){t.ifTips=!0,t.tips_Msg="验证码已发送",h()(".button").css("color","#555").html("重新发送("+t.MinuteNum+")"),t.CountDown=setInterval(function(){t.MinuteNum--,h()(".button").html("重新发送("+t.MinuteNum+")"),t.MinuteNum<0&&(h()(".button").css("color"," #5965D8").html("重新获取验证码"),t.MinuteNum=60,clearInterval(t.CountDown))},1e3),setTimeout(function(){t.ifTips=!1},1500)})}else t.$alert("请输入手机号","提示",{confirmButtonText:"确定"})},nextTo:function(){var t=this;if(t.phoneNum)if(11!=t.phoneNum.length)t.$alert("请输入正确的手机格式","提示",{confirmButtonText:"确定"});else if(t.identifyingCode){var e={cellphone:t.phoneNum,verificationCode:t.identifyingCode,next_page:t.page};this.httpRequest("validateVerificationCode.do",e,function(e){t.$route.query.page&&("ForgotPwd"==t.$route.query.page?t.$router.push({name:"ForgotPwd",query:{phoneNum:t.phoneNum}}):"Reg"==t.$route.query.page&&t.$router.push({name:"Reg",query:{phoneNum:t.phoneNum}}))})}else t.$alert("请输入验证码","提示",{confirmButtonText:"确定"});else t.$alert("请输入手机号","提示",{confirmButtonText:"确定"})}}},R={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Identifying"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"identeContainer"},[s("div",[t._v("我们将发送验证码到您的手机")]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],ref:"phoneNum",attrs:{placeholder:"请输入手机号"},domProps:{value:t.phoneNum},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("identifyingCode")},input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}}),t._v(" "),t.phoneNum?s("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("phoneNum")}}}):t._e()]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.identifyingCode,expression:"identifyingCode"}],ref:"identifyingCode",attrs:{placeholder:"请输入验证码"},domProps:{value:t.identifyingCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.nextTo(e)},input:function(e){e.target.composing||(t.identifyingCode=e.target.value)}}}),t._v(" "),t.identifyingCode?s("i",{staticClass:"iconfont icon-iconfontcuowu",on:{click:function(e){return t.clearInput("identifyingCode")}}}):t._e(),t._v(" "),s("div",{staticClass:"button",on:{click:t.sendIdentifying}},[t._v("获取验证码")])]),t._v(" "),s("div",{staticClass:"BtnComponent",on:{click:t.nextTo}},[s("div",[t._v("下一步")])])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])],1)},staticRenderFns:[]};var E=s("VU/8")(D,R,!1,function(t){s("UBBn")},"data-v-15416b82",null).exports,L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("footer",t._l(t.footList,function(e,o){return s("div",{key:o,class:{active:t.active==e.title},attrs:{id:o},on:{click:function(e){return t.toggle(o)}}},[s("i",{staticClass:"iconfont",class:e.icon}),t._v(" "),s("p",[t._v(t._s(e.title))])])}),0)])},staticRenderFns:[]};var P=s("VU/8")({name:"FooterIndex",data:function(){return{footList:[{path:"Index",title:"首页",icon:"icon-shouye"},{path:"QuerySalesOrder",title:"查单",icon:"icon-chadan"},{path:"Home",title:"我的",icon:"icon-denglu"}],active:"首页"}},created:function(){if(!this.$store.state.CurrentRoleData.QuerySalesOrder&&!this.$store.state.CurrentRoleData.QueryPurchaseOrder)for(var t=0;t<this.footList.length;t++)"QuerySalesOrder"==this.footList[t].path&&this.footList.splice(t,1);if(!this.$store.state.CurrentRoleData.QuerySalesOrder&&this.$store.state.CurrentRoleData.QueryPurchaseOrder)for(var e=0;e<this.footList.length;e++)"QuerySalesOrder"==this.footList[e].path&&(this.footList[e].path="QueryPurchaseOrder");for(var s=0;s<this.footList.length;s++){if("QueryPurchaseOrder"==this.$route.name)return void(this.active="查单");if(this.$route.name==this.footList[s].path)return void(this.active=this.footList[s].title)}this.$route.query.active&&(this.active=this.$route.query.active)},methods:{toggle:function(t){this.active=this.footList[t].title,this.$router.push({name:this.footList[t].path,query:{active:this.footList[t].title}})}}},L,!1,function(t){s("G0ns")},"data-v-8a5c3c62",null).exports,O=s("mtWM"),A=s.n(O),N={name:"Login",data:function(){return{headerText:"首页",swipperImageList:[],BusinessList:[],SelectBoxFlag:!1,BouncedName:"",currentClickPage:"",FeeBill:!1}},components:{componentHeader:_,componentFooter:P,componentSelectBox:m},created:function(){var t=this,e=t.$store.state.businessInfo.businessCode;"YIB10"!=e&&"YIB15"!=e&&"YIB16"!=e&&"YIB17"!=e&&"YIB20"!=e&&"YIB21"!=e&&"YIB22"!=e&&"YIB23"!=e&&"YIB24"!=e&&"YIB25"!=e&&"YIB26"!=e&&"TTX01"!=e&&"YIB31"!=e&&"YIB34"!=e||(t.FeeBill=!0);var s={businessId:t.$store.state.businessInfo.businessId,appUsersId:t.$store.state.userInfo.user_id};A.a.post(t.HOST_lxq+"GetHomePic.do",{params:n()(s)}).then(function(e){if(console.log(e),1==e.data.status)if(0==e.data.data.length){t.swipperImageList=[];for(var s=0;s<6;s++)t.swipperImageList[s]=5==s?{Product_Url:"static/img/Index/"+(s+1)+".png"}:{Product_Url:"static/img/Index/"+(s+1)+".jpg"}}else t.swipperImageList=e.data.data;else{var o="请求失败";e.data.Msg&&(o=e.data.Msg),t.$alert(o,"提示",{confirmButtonText:"确定"})}}).catch(function(e){t.$alert("请求失败","提示",{confirmButtonText:"确定"})})},mounted:function(){this.$store.state.VisitConditionUserHabits={VisitLine:"",VisitState:""},this.$store.state.visitObject=""},methods:{f_Xiaoxi:function(){this.$router.push({name:"MessageList"})},toFeeBill:function(){this.$router.push({name:"PurchaseOrder",query:{whoPush:"Index"}})},toCustomerVisit:function(){5==this.$store.state.userInfo.business?(this.BouncedName="拜访/查看拜访",this.BusinessList=[{name:"拜访终端服务商"},{name:"查看终端门店"}],this.SelectBoxFlag=!0):this.$router.push({name:"CustomerVisit"})},toCustomerList:function(t){if(5==(e=this).$store.state.userInfo.business){var e,s={cellphone:(e=this).$store.state.userInfo.cellphone,userId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId};this.httpRequest("findClassA.do",s,function(s){s.data.length?(e.BusinessList=s.data,1==s.data.length?(e.$store.state.CustomerInfoOspInfo=e.BusinessList[0],e.$router.push({name:"CustomerList"})):(e.BouncedName="供货商",e.SelectBoxFlag=!0,e.currentClickPage=t)):e.$alert("未获取到供货商，请联系管理员","提示",{confirmButtonText:"确定"})})}else this.toSelectOSP(t)},toSelectOSP:function(t){var e=this,s={appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,searchName:""};e.httpRequest("searchCustomerList.do",s,function(s){if(s.data.length){for(var o=0;o<s.data.length;o++)s.data[o].name=s.data[o].CUSTOMER_NAME;1==s.data.length?"InventoryManage"==t?(e.$store.state.InventoryOspInfo=s.data[0],e.$router.push({name:"InventoryManage"})):"CustomerList"==t&&(e.$store.state.CustomerInfoOspInfo=s.data[0],e.$router.push({name:"CustomerList"})):(e.SelectBoxFlag=!0,e.currentClickPage=t,"InventoryManage"==t?(e.BouncedName="客户",e.BusinessList=s.data):"CustomerList"==t&&(5==e.$store.state.userInfo.business?(e.BouncedName="OSP/门店",e.BusinessList=[{name:"OSP"},{name:"门店"}]):(e.BouncedName="门店供货商",e.BusinessList=s.data)))}else e.$alert("未获取到客户信息，请联系管理员","提示",{confirmButtonText:"确定"})})},selectedItem:function(t){"InventoryManage"==this.currentClickPage?(this.$store.state.InventoryOspInfo=this.BusinessList[t],this.$router.push({name:"InventoryManage"})):"CustomerList"==this.currentClickPage?(this.$store.state.CustomerInfoOspInfo=this.BusinessList[t],this.$router.push({name:"CustomerList"})):5==this.$store.state.userInfo.business&&(0==t?this.$store.state.visitObject="OSP":1==t&&(this.$store.state.visitObject="SOTRE"),this.$router.push({name:"CustomerVisit"})),this.SelectBoxFlag=!1},selectCancel:function(){this.SelectBoxFlag=!1}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Index"},[s("componentHeader",{attrs:{headerText:t.headerText,IfXiaoxiShow:!0},on:{f_Xiaoxi:t.f_Xiaoxi}}),t._v(" "),s("div",{staticClass:"indexContainer haveHeadcontainer"},[s("div",{staticClass:"swipper"},[s("div",{staticClass:"block"},[s("el-carousel",{staticStyle:{overflow:"hidden"},attrs:{trigger:"click"}},t._l(t.swipperImageList,function(t,e){return s("div",{key:e,attrs:{id:e}},[s("el-carousel-item",[s("img",{staticStyle:{width:"100%"},attrs:{id:"swipperImg",src:t.Product_Url}})])],1)}),0)],1)]),t._v(" "),s("div",{staticClass:"option"},["WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.CustomerVisit?s("a",{on:{click:function(e){return t.toCustomerVisit()}}},[s("i",{staticClass:"iconfont icon-kehubaifang"}),t._v(" "),s("span",[t._v("客户拜访")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.PurchaseOrder?s("router-link",{attrs:{to:"/PurchaseOrder"}},[s("i",{staticClass:"iconfont icon-xiadan"}),t._v(" "),s("span",[t._v("采购下单")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.SalesOrder?s("router-link",{attrs:{to:"/SalesOrder"}},[s("i",{staticClass:"iconfont icon-xiadan"}),t._v(" "),s("span",[t._v("销售下单")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.InventoryManage?s("a",{on:{click:function(e){return t.toSelectOSP("InventoryManage")}}},[s("i",{staticClass:"iconfont icon-kucun"}),t._v(" "),s("span",[t._v("库存管理")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.PerformanceTrack?s("router-link",{attrs:{to:"/PerformanceTrack"}},[s("i",{staticClass:"iconfont icon-yeji"}),t._v(" "),s("span",[t._v("业绩追踪")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.ReportCenter?s("router-link",{attrs:{to:"/ReportCenter"}},[s("i",{staticClass:"iconfont icon-baobiao"}),t._v(" "),s("span",[t._v("报表中心")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.CustomerList?s("a",{on:{click:function(e){return t.toCustomerList("CustomerList")}}},[s("i",{staticClass:"iconfont icon-kehuguanli"}),t._v(" "),s("span",[t._v("门店管理")])]):t._e(),t._v(" "),"WX"==t.$store.state.G_AppOrWX?s("router-link",{attrs:{to:"/SalesOrder"}},[s("i",{staticClass:"iconfont icon-chadan"}),t._v(" "),s("span",[t._v("产品订购")])]):t._e(),t._v(" "),"WX"==t.$store.state.G_AppOrWX?s("router-link",{attrs:{to:"/QuerySalesOrder"}},[s("i",{staticClass:"iconfont icon-chadan"}),t._v(" "),s("span",[t._v("订单查询")])]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.FeeBill?s("a",{on:{click:function(e){return t.toFeeBill()}}},[s("i",{staticClass:"iconfont icon-kehuguanli"}),t._v(" "),s("span",[t._v("费用账单")])]):t._e()],1)]),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.BusinessList,BouncedName:t.BouncedName},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e(),t._v(" "),s("componentFooter")],1)},staticRenderFns:[]};var $=s("VU/8")(N,x,!1,function(t){s("Z2WP")},"data-v-3e12a4fb",null).exports,b={data:function(){return{headerText:"消息",Messagedata:[],noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,nowDate:""}},components:{componentHeader:_},created:function(){this.nowDate=this.getNowTime("getDate"),this.reqMessageListInfo()},methods:{f_Fanhui:function(){this.$router.push({name:"Index"})},reqMessageListInfo:function(t){var e=this,s={appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,currentPage:e.loadPage,numberPerPage:e.numberPerPage};e.httpRequest("earlyWarningPush.do",s,function(s){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded());for(var o=0;o<s.data.length;o++)s.data[o].appTime.substring(0,10)==e.nowDate?s.data[o].appTime=s.data[o].appTime.substring(11,16):s.data[o].appTime=s.data[o].appTime.substring(5,10);e.loadPage>1?s.data.length&&(e.Messagedata=e.Messagedata.concat(s.data)):e.Messagedata=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.Messagedata.length?e.noDataShow=!1:e.noDataShow=!0})},toMessageInfo:function(t){var e=this.Messagedata[t];this.$router.push({name:"MessageDetail",query:{MessageItem:e}})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqMessageListInfo("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqMessageListInfo("BottomLoad"))}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MessageList"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"MessageListData"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.Messagedata,function(e,o){return s("div",{key:o,staticClass:"Message",attrs:{id:o}},[s("div",{staticClass:"icon"},[s("i",{staticClass:"iconfont",class:1==e.read?"icon-yiduxiaoxi-":"icon-weiduxiaoxi"})]),t._v(" "),s("div",{staticClass:"MessageColumn",on:{click:function(e){return t.toMessageInfo(o)}}},[s("div",{staticClass:"one"},[s("div",{staticClass:"MessageItem"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"ReceiveTime"},[t._v(t._s(e.appTime))])]),t._v(" "),s("div",{staticClass:"two"},[s("div",{staticClass:"MessageInfo"},[t._v(t._s(e.appContent))])])])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var M=s("VU/8")(b,w,!1,function(t){s("8jjT")},"data-v-298b1b1c",null).exports,U={data:function(){return{headerText:"",ReceiveTime:"",MessageInfo:" ",msg_id:""}},components:{componentHeader:_},created:function(){this.$route.query.MessageItem&&(this.MessageItem=this.$route.query.MessageItem,this.headerText=this.MessageItem.title);var t={msg_id:this.MessageItem.msg_id};this.httpRequest("updataMsgToRead.do",t,function(t){})},methods:{f_Fanhui:function(){this.$router.push({name:"MessageList"})}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MessageDetail"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"detail"},[s("div",{staticClass:"time"},[t._v(t._s(t.MessageItem.appTime))]),t._v(" "),s("div",{staticClass:"info"},[t._v(t._s(t.MessageItem.appContent))])])])],1)},staticRenderFns:[]};var V=s("VU/8")(U,k,!1,function(t){s("UBwj")},"data-v-5bd253aa",null).exports,F={name:"WXLogin",data:function(){return{phoneNum:"",openId:"",Way_Verify:!1,storeCode:"",loginPswd:"",ErrMsg:"",SCErrMsg:"",UserLoginHabits:"accountPassword"}},mounted:function(){},watch:{phoneNum:function(t){this.ErrMsg&&(this.ErrMsg="")},loginPswd:function(t){this.SCErrMsg&&(this.SCErrMsg="")},storeCode:function(t){this.SCErrMsg&&(this.SCErrMsg="")}},created:function(){var t=this;if(h()("body").on("touchend",function(t){"INPUT"!=t.target.tagName&&h()("input").blur()}),"APP"==this.$store.state.G_AppOrWX&&this.$router.push({name:"Login"}),this.getWXCookie("e"),this.getWXPhoneCookie("e"),this.getWXUserLoginHabitsCookie("e"),this.getWXCookie_openid("e"),"accountPassword"==this.UserLoginHabits?this.Way_Verify=!1:"VerificationCode"==this.UserLoginHabits&&(this.Way_Verify=!0),this.storeCode.length&&this.loginPswd.length&&this.toLogin(),t.$store.state.GopenId.length)t.openId=t.$store.state.GopenId;else{var e=this.getUrlKey("code");if(e){console.log(e);var s={code:e};this.httpRequest("wechatGetOpenId.do",s,function(e){console.log(e),t.openId=e.data.openId,t.$store.state.GopenId=e.data.openId,t.setWXCookie_openid(e.data.openId),console.log(e),"SUCCESS"==e.data.returnCode&&(t.$store.state.userInfo=e.data.user,e.data.business.length>0?(t.$store.state.businessInfo=e.data.business[0],t.$store.state.CurrentRole="storesStaff",t.$store.state.CurrentRoleData=t.$store.state.RoleModuleTotalData.storesStaff,t.login_click()):t.$alert("该账号未绑定业务代码","提示",{confirmButtonText:"确定"}))})}else this.getCodeApi("123")}},methods:{toWXVerify:function(){var t=this;if(t.phoneNum.length)if(11!=t.phoneNum.length)t.ErrMsg="手机号输入有误";else{var e={cellphone:t.phoneNum};this.httpRequest("WXGetVerifyCode.do",e,function(e){console.log(e),t.setWXPhoneCookie(t.phoneNum,30),t.setWXUserLoginHabitsCookie("VerificationCode",30),t.$store.state.MinuteNum=60,t.$router.push({name:"WXVerify",query:{phoneNum:t.phoneNum,LoginOrReg:e.data}})})}},toLogin:function(){var t=this;if(t.storeCode.length&&t.loginPswd.length){var e={storeCode:t.storeCode,storePswd:t.loginPswd,openId:t.openId};this.httpRequest("wxLogin.do",e,function(e){console.log(e),"SUCCESS"==e.data.returnCode?(t.setWXCookie(t.storeCode,t.loginPswd,30),t.setWXUserLoginHabitsCookie("accountPassword",30),t.$store.state.userInfo=e.data.user,e.data.business.length>0?(t.$store.state.businessInfo=e.data.business[0],t.$store.state.CurrentRole="storesStaff",t.$store.state.CurrentRoleData=t.$store.state.RoleModuleTotalData.storesStaff,t.login_click()):t.$alert("该账号未绑定业务代码","提示",{confirmButtonText:"确定"})):t.SCErrMsg=e.Msg})}},ChangeModule:function(t){"Verify"==t?this.Way_Verify=!1:"StoreCode"==t&&(this.Way_Verify=!0)},getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},getCodeApi:function(t){var e="",s=this.$route.query.nav;e="order"==s?"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxce01bf1ba861a973&redirect_uri=http://k56.kaidongyuan.com/wechat?nav=order&response_type=code&scope=snsapi_base&state=144&connect_redirect=1#wechat_redirect":"queryOrder"==s?"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxce01bf1ba861a973&redirect_uri=http://k56.kaidongyuan.com/wechat?nav=queryOrder&response_type=code&scope=snsapi_base&state=144&connect_redirect=1#wechat_redirect":"my"==s?"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxce01bf1ba861a973&redirect_uri=http://k56.kaidongyuan.com/wechat?nav=my&response_type=code&scope=snsapi_base&state=144&connect_redirect=1#wechat_redirect":"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxce01bf1ba861a973&redirect_uri=http://k56.kaidongyuan.com/wechat&response_type=code&scope=snsapi_base&state=144&connect_redirect=1#wechat_redirect",window.location.replace(e)},login_click:function(){var t=this.$route.query.nav;"order"==t?this.$router.push({name:"SalesOrder"}):"queryOrder"==t?this.$router.push({name:"QuerySalesOrder"}):"my"==t?this.$router.push({name:"Home"}):this.$router.push({name:"Index"})}}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"WXLogin"},[s("div",{staticClass:"WXLoginContainer"},[t._m(0),t._v(" "),t.Way_Verify?s("div",{staticClass:"identeContainer"},[s("div",{staticClass:"mobilePhone"},[s("div",{staticClass:"mobilePhoneInput"}),t._v(" "),s("div",{staticClass:"mobilePhoneInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],ref:"phoneNum",attrs:{placeholder:"输入手机号"},domProps:{value:t.phoneNum},on:{input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}}),t._v(" "),t.phoneNum?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("phoneNum")}}}):t._e()]),t._v(" "),s("div",{staticClass:"ErrMsg"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.ErrMsg,expression:"ErrMsg"}]},[t._v(t._s(t.ErrMsg))])])]),t._v(" "),s("div",{staticClass:"g_signBtn",style:{color:t.phoneNum.length>0?"rgba(255,255,255,1)":"rgba(255,255,255,0.6)"},on:{click:t.toWXVerify}},[t._v("获取验证码")]),t._v(" "),s("div",{staticClass:"g_signBtn hollow",on:{click:function(e){return t.ChangeModule("Verify")}}},[t._v("用账号密码登录")])]):s("div",{staticClass:"identeContainer"},[s("div",{staticClass:"mobilePhone"},[s("div",{staticClass:"mobilePhoneInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.storeCode,expression:"storeCode"}],ref:"storeCode",attrs:{placeholder:"门店代码"},domProps:{value:t.storeCode},on:{input:function(e){e.target.composing||(t.storeCode=e.target.value)}}}),t._v(" "),t.storeCode?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("storeCode")}}}):t._e()]),t._v(" "),s("div",{staticClass:"mobilePhoneInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.loginPswd,expression:"loginPswd"}],ref:"loginPswd",attrs:{placeholder:"输入登录密码",type:"password"},domProps:{value:t.loginPswd},on:{input:function(e){e.target.composing||(t.loginPswd=e.target.value)}}}),t._v(" "),t.loginPswd?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("loginPswd")}}}):t._e()]),t._v(" "),s("div",{staticClass:"ErrMsg"},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.SCErrMsg,expression:"SCErrMsg"}]},[t._v(t._s(t.SCErrMsg))])])]),t._v(" "),s("div",{staticClass:"g_signBtn",style:{color:t.storeCode.length>0&&t.loginPswd.length>0?"rgba(255,255,255,1)":"rgba(255,255,255,0.6)"},on:{click:t.toLogin}},[t._v("登录")]),t._v(" "),s("div",{staticClass:"g_signBtn hollow",on:{click:function(e){return t.ChangeModule("StoreCode")}}},[t._v("用短信验证码登录/注册")])])]),t._v(" "),s("div",{staticClass:"verseion"},[t._v("0."+t._s(.1*t.$store.state.version))])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"LoginLogo"},[e("img",{attrs:{src:"static/img/Logo/logo.png",alt:""}})])}]};var q=s("VU/8")(F,B,!1,function(t){s("qHsS")},"data-v-08ff7392",null).exports,H={name:"WXVerify",data:function(){return{phoneNum:"",identifyingCode:"",openId:"",LoginBtnText:"登录",LoginOrReg:"login",ErrMsg:""}},components:{componentHeader:_},watch:{identifyingCode:function(t){this.ErrMsg&&(this.ErrMsg="")}},mounted:function(){var t=this;this.$refs.identifyingCode.focus(),h()(".yanButton").css("color","#555").html("重新发送("+t.$store.state.MinuteNum+")"),t.$store.state.CountDown=setInterval(function(){t.$store.state.MinuteNum--,h()(".yanButton").html("重新发送("+t.$store.state.MinuteNum+")"),t.$store.state.MinuteNum<0&&(h()(".yanButton").css("color"," #5965D8").html("重新获取验证码"),t.$store.state.MinuteNum=60,clearInterval(t.$store.state.CountDown))},1e3)},created:function(){this.$route.query.phoneNum&&(this.phoneNum=this.$route.query.phoneNum),this.$route.query.LoginOrReg&&(this.LoginOrReg=this.$route.query.LoginOrReg),this.$route.query.yzm&&(this.identifyingCode=this.$route.query.yzm)},beforeDestroy:function(){clearInterval(this.$store.state.CountDown)},methods:{f_Fanhui:function(){this.$router.push({name:"WXLogin"})},sendIdentifying:function(){var t=this;if(60==t.$store.state.MinuteNum){var e={cellphone:t.phoneNum};this.httpRequest("WXGetVerifyCode.do",e,function(e){h()(".button").css("color","#555").html("重新发送("+t.$store.state.MinuteNum+")"),t.$store.state.CountDown=setInterval(function(){t.$store.state.MinuteNum--,h()(".button").html("重新发送("+t.$store.state.MinuteNum+")"),t.$store.state.MinuteNum<0&&(h()(".button").css("color"," #5965D8").html("重新获取验证码"),t.$store.state.MinuteNum=60,clearInterval(t.$store.state.CountDown))},1e3)})}},toLogin:function(){var t=this;if(!(t.identifyingCode.length<4)){var e={cellphone:t.phoneNum,type:"login",openid:t.$store.state.GopenId,yzm:t.identifyingCode};this.httpRequest("wxXYVerCode.do",e,function(e){console.log(e),"YZSUCCESS"==e.data.returnCode?(t.$store.state.userInfo=e.data.user,e.data.business.length>0?(t.$store.state.businessInfo=e.data.business[0],t.$store.state.CurrentRole="storesStaff",t.$store.state.CurrentRoleData=t.$store.state.RoleModuleTotalData.storesStaff,t.$router.push({name:"Index"})):t.$alert("该账号未绑定业务代码","提示",{confirmButtonText:"确定"})):t.ErrMsg=e.Msg})}},toRegister:function(){var t=this;if(!(t.identifyingCode.length<4)){var e={cellphone:t.phoneNum,type:"register",yzm:t.identifyingCode};this.httpRequest("wxXYVerCode.do",e,function(e){console.log(e),"YZSUCCESS"==e.data.returnCode?(t.$store.state.WXRegIdentifyPhone=t.phoneNum,t.$store.state.WXRegLoginOrReg=t.$route.query.LoginOrReg,t.$store.state.WXRegCode=t.identifyingCode,t.$router.push({name:"CreateCustomerWeChat"})):t.ErrMsg=e.Msg})}},toAssociatedStores:function(){var t=this;if(!(t.identifyingCode.length<4)){var e={cellphone:t.phoneNum,type:"associatedStores",yzm:t.identifyingCode};this.httpRequest("wxXYVerCode.do",e,function(e){console.log(e),"YZSUCCESS"==e.data.returnCode?t.$router.push({name:"WXAssociatedStores",query:{phoneNum:t.phoneNum,LoginOrReg:t.$route.query.LoginOrReg,yzm:t.identifyingCode}}):t.ErrMsg=e.Msg})}}}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"WXVerify"},[s("componentHeader",{attrs:{IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"headTitle"},[s("div",[t._v("请输入验证码")]),t._v(" "),s("div",[t._v("验证码已通过短信发送至 "+t._s(t.phoneNum))])]),t._v(" "),s("div",{staticClass:"identeContainer"},[s("div",{staticClass:"mobilePhone"},[s("div",{staticClass:"mobilePhoneInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.identifyingCode,expression:"identifyingCode"}],ref:"identifyingCode",attrs:{placeholder:"输入验证码",type:"number",pattern:"[0-9]*"},domProps:{value:t.identifyingCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toLogin(e)},input:function(e){e.target.composing||(t.identifyingCode=e.target.value)}}}),t._v(" "),s("div",{staticClass:"button yanButton",on:{click:t.sendIdentifying}})]),t._v(" "),s("div",{staticClass:"ErrMsg"},[s("span",[t._v(t._s(t.ErrMsg))])])]),t._v(" "),"login"==t.LoginOrReg?s("div",{staticClass:"g_signBtn",style:{color:t.identifyingCode.length>3?"rgba(255,255,255,1)":"rgba(255,255,255,0.6)"},on:{click:t.toLogin}},[t._v("登录")]):t._e(),t._v(" "),"register"==t.LoginOrReg?s("div",{staticClass:"g_signBtn",style:{color:t.identifyingCode.length>3?"rgba(255,255,255,1)":"rgba(255,255,255,0.6)"},on:{click:t.toRegister}},[t._v("注册")]):t._e(),t._v(" "),"register"==t.LoginOrReg?s("div",{staticClass:"g_signBtn",style:{color:t.identifyingCode.length>3?"rgba(255,255,255,1)":"rgba(255,255,255,0.6)"},on:{click:t.toAssociatedStores}},[t._v("关联门店")]):t._e()])])],1)},staticRenderFns:[]};var Q=s("VU/8")(H,G,!1,function(t){s("43tV")},"data-v-1afe3ab4",null).exports,W={name:"WXAssociatedStores",data:function(){return{phoneNum:"",openId:"",storeName:"",storeCode:"",storePswd:"",ErrMsg:"",LoginOrReg:"",yzm:""}},components:{componentHeader:_},watch:{storeName:function(t){this.ErrMsg&&(this.ErrMsg="")},storeCode:function(t){this.ErrMsg&&(this.ErrMsg="")},storePswd:function(t){this.ErrMsg&&(this.ErrMsg="")}},created:function(){this.$route.query.phoneNum&&(this.phoneNum=this.$route.query.phoneNum),this.$route.query.LoginOrReg&&(this.LoginOrReg=this.$route.query.LoginOrReg),this.$route.query.yzm&&(this.yzm=this.$route.query.yzm)},methods:{f_Fanhui:function(){this.$router.push({name:"WXVerify",query:{phoneNum:this.phoneNum,LoginOrReg:this.LoginOrReg,yzm:this.yzm}})},toAssociated:function(){var t=this;if(t.storeName.length&&t.storeCode.length&&t.storePswd.length){var e={cellphone:t.phoneNum,storeCode:t.storeCode,storeName:t.storeName,storePswd:t.storePswd};this.httpRequest("wxReStore.do",e,function(e){console.log(e),"SUCCESS"==e.data.returnCode?(t.setWXCookie(t.storeCode,"",30),t.$alert("关联成功","提示",{confirmButtonText:"确定",callback:function(){t.$router.push({name:"WXLogin"})}})):t.ErrMsg=e.Msg})}}}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"WXAssociatedStores"},[s("componentHeader",{attrs:{IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"headTitle"},[s("div",[t._v("关联门店")]),t._v(" "),s("div",[t._v("关联手机号:"+t._s(t.phoneNum))])]),t._v(" "),s("div",{staticClass:"identeContainer"},[s("div",{staticClass:"mobilePhone"},[s("div",{staticClass:"mobilePhoneInput"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.storeName,expression:"storeName"}],ref:"storeName",attrs:{placeholder:"门店名称"},domProps:{value:t.storeName},on:{input:function(e){e.target.composing||(t.storeName=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.storeCode,expression:"storeCode"}],ref:"storeCode",attrs:{placeholder:"门店代码"},domProps:{value:t.storeCode},on:{input:function(e){e.target.composing||(t.storeCode=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.storePswd,expression:"storePswd"}],ref:"storePswd",attrs:{placeholder:"门店登录密码",type:"password"},domProps:{value:t.storePswd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toAssociated(e)},input:function(e){e.target.composing||(t.storePswd=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"ErrMsg"},[s("span",[t._v(t._s(t.ErrMsg))])])]),t._v(" "),s("div",{staticClass:"g_signBtn",style:{color:t.storeName.length&&t.storeCode.length&&t.storePswd.length?"rgba(255,255,255,1)":"rgba(255,255,255,0.6)"},on:{click:t.toAssociated}},[t._v("关联门店")])])])],1)},staticRenderFns:[]};var X=s("VU/8")(W,Y,!1,function(t){s("5hy5")},"data-v-2a22d93f",null).exports,j={name:"Binding",data:function(){return{headerText:"微信登录绑定",userName:"",password:"",WarehousesList:[],selectMShow:!1,SelectBoxFlag:!1,BouncedName:"业务代码",BusinessList:[]}},components:{componentHeader:_,componentSelectBox:m},methods:{f_Fanhui:function(){this.$router.go(-1)},toLogin:function(){this.$router.push({name:"Login"})},bind:function(){var t=this;if(this.userName)if(this.password){var e={wxOpenid:this.$store.state.WX_Openid,cellphone:this.userName,password:this.password};this.httpRequest("bindingWX.do",e,function(e){if(t.$store.state.userInfo=e.data.user,t.KeepUserNameAndPassord(t.userName,t.password),t.setCookie(t.userName,t.password,219e3),t.BusinessList=e.data.business,1==e.data.business.length){t.$store.state.businessInfo=t.BusinessList[0];for(var s=0;s<t.$store.state.RoleTotalData.length;s++)t.$store.state.userInfo.business==t.$store.state.RoleTotalData[s].business&&(t.$store.state.CurrentRole=t.$store.state.RoleTotalData[s].EnglishRoleName);for(var o in t.$store.state.RoleModuleTotalData)t.$store.state.CurrentRole==o&&(t.$store.state.CurrentRoleData=t.$store.state.RoleModuleTotalData[o]);t.SelectBoxFlag=!1,t.$router.push({name:"Index",query:{}})}else e.data.business.length>1?t.SelectBoxFlag=!0:t.$alert("该账号未绑定业务代码","提示",{confirmButtonText:"确定"})})}else t.$alert("密码不能为空","提示",{confirmButtonText:"确定"});else t.$alert("用户名不能为空","提示",{confirmButtonText:"确定"})},selectedItem:function(t){this.$store.state.businessInfo=this.BusinessList[t];for(var e=0;e<that.$store.state.RoleTotalData.length;e++)that.$store.state.userInfo.business==that.$store.state.RoleTotalData[e].business&&(that.$store.state.CurrentRole=that.$store.state.RoleTotalData[e].EnglishRoleName);for(var s in that.$store.state.RoleModuleTotalData)that.$store.state.CurrentRole==s&&(that.$store.state.CurrentRoleData=that.$store.state.RoleModuleTotalData[s]);this.SelectBoxFlag=!1,this.$router.push({name:"Index",query:{}})},selectCancel:function(){this.SelectBoxFlag=!1}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Binding"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfTextShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container"},[t._m(0),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-denglu"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],ref:"userName",staticClass:"userName",staticStyle:{"text-transform":"none"},attrs:{placeholder:"请输入手机号"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}}),t._v(" "),t.userName?s("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){return t.clearInput("userName")}}}):t._e()]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-mima"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],ref:"password",staticClass:"pswd",staticStyle:{"text-transform":"none"},attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),t.password?s("i",{staticClass:"iconfont icon-cuowu",on:{click:function(e){return t.clearInput("password")}}}):t._e()]),t._v(" "),s("button",{staticClass:"bind",on:{click:t.bind}},[t._v("关联")])]),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.BusinessList,BouncedName:t.BouncedName},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("快速绑定账号")])])}]};var K=s("VU/8")(j,z,!1,function(t){s("fpwy")},"data-v-54135d7b",null).exports,J={name:"HomeIndex",data:function(){return{headerText:"个人中心",nickname:"",cellphone:"",VersionNum:"",businesscode:"",UpdateVisitTypeHide:!1,radvisitType:"",storeCode:""}},components:{componentHeader:_,componentFooter:P},created:function(){this.nickname=this.$store.state.userInfo.userName,this.cellphone=this.$store.state.userInfo.cellphone,this.VersionNum=this.$store.state.App_Version,this.businessname=this.$store.state.businessInfo.name,this.radvisitType=this.$store.state.userInfo.visitType},methods:{updateAppVersion:function(){try{CallAndroidOrIOS("检查APP和VUE版本更新")}catch(t){}try{CallAndroidOrIOS.callAndroid("检查APP和VUE版本更新")}catch(t){}},toall:function(){this.$router.push({name:"QuerySalesOrder",query:{orderState:""}})},topay:function(){this.$router.push({name:"QuerySalesOrder",query:{orderState:"NEW"}})},toget:function(){this.$router.push({name:"QuerySalesOrder",query:{orderState:"PAID"}})},finish:function(){this.$router.push({name:"QuerySalesOrder",query:{orderState:"FINISH"}})},cancel:function(){this.$router.push({name:"QuerySalesOrder",query:{orderState:"CANCEL"}})},UpdateType:function(){this.UpdateVisitTypeHide=!0},Confirm:function(){var t=this;if(t.UpdateVisitTypeHide=!1,t.radvisitType==t.$store.state.userInfo.visitType)t.$alert("暂无数据更新","提示",{confirmButtonText:"确定"});else{var e;"车销"==t.radvisitType&&(e="car"),"访销"==t.radvisitType&&(e="walk");var s={appUsersId:t.$store.state.userInfo.user_id,way:e};t.httpRequest("updateVisitWay.do",s,function(e){1==e.status?(t.$store.state.userInfo.visitType=t.radvisitType,t.$alert("修改成功","提示",{confirmButtonText:"确定"})):t.$alert("修改失败","提示",{confirmButtonText:"确定"})})}},Cancel:function(){this.UpdateVisitTypeHide=!1,this.radvisitType=this.$store.state.userInfo.visitType},toPassword:function(){this.$router.push({name:"RePassword"})},toQuestion:function(){this.$router.push({name:"AppQuestion"})},exit:function(){var t=this;this.$confirm("确定要退出登录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"WX"==t.$store.state.G_AppOrWX?(t.getWXCookie("e"),t.storeCode&&t.setWXCookie(t.storeCode,"",30),t.$router.push({name:"WXLogin"})):t.$router.push({name:"Login"})}).catch(function(){})}}},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Home"},[s("div",{staticClass:"container"},[s("div",{staticClass:"headImg"},[s("div",{staticClass:"background"}),t._v(" "),s("div",{staticClass:"background_blank"}),t._v(" "),s("div",{staticClass:"head"},[s("div",{staticClass:"image"}),t._v(" "),s("img",{staticClass:"userinfo-avatar",attrs:{src:"static/img/Home/DefaultAvatar.png"}}),t._v(" "),s("div",{staticClass:"userName"},[t._v(t._s(t.nickname))]),t._v(" "),s("div",{staticClass:"userName"},[t._v(t._s(t.cellphone))])]),t._v(" "),s("div",{staticClass:"stripInfo"},["WX"==t.$store.state.G_AppOrWX?s("div",{staticClass:"myOrder"},[s("div",{staticClass:"title"},[t._v("我的订单")]),t._v(" "),s("div",{staticClass:"orderState"},[s("div",{on:{click:t.toall}},[s("i",{staticClass:"iconfont icon-quanbudingdan"}),s("span",[t._v("全部")])]),t._v(" "),s("div",{on:{click:t.topay}},[s("i",{staticClass:"iconfont icon-daifukuan"}),s("span",[t._v("待付款")])]),t._v(" "),s("div",{on:{click:t.toget}},[s("i",{staticClass:"iconfont icon-daishouhuo"}),s("span",[t._v("待收货")])]),t._v(" "),s("div",{on:{click:t.finish}},[s("i",{staticClass:"iconfont icon-yiwancheng"}),s("span",[t._v("已完成")])]),t._v(" "),s("div",{on:{click:t.cancel}},[s("i",{staticClass:"iconfont icon-yiquxiao"}),s("span",[t._v("已取消")])])])]):t._e(),t._v(" "),s("div",[t._m(0),t._v(" "),s("div",[s("div",[t._v(t._s(t.businessname))]),t._v(" "),s("div")])]),t._v(" "),t.$store.state.userInfo.visitType&&"WX"!=t.$store.state.G_AppOrWX&&"ospSalesman"==t.$store.state.CurrentRole?s("div",{on:{click:t.UpdateType}},[t._m(1),t._v(" "),s("div",[s("div",{staticClass:"updateClass"},[t._v(t._s(t.$store.state.userInfo.visitType))]),t._v(" "),t._m(2)])]):t._e(),t._v(" "),t.$store.state.CurrentRoleData.RePassword?s("div",{on:{click:t.toPassword}},[t._m(3),t._v(" "),t._m(4)]):t._e(),t._v(" "),t.$store.state.CurrentRoleData.AppQuestion?s("div",{on:{click:t.toQuestion}},[t._m(5),t._v(" "),t._m(6)]):t._e(),t._v(" "),s("div",{on:{click:t.updateAppVersion}},[s("div",[t._m(7),t._v(" "),s("div",[t._v(t._s("WX"==t.$store.state.G_AppOrWX?"版本":"版本更新"))])]),t._v(" "),s("div",[s("div",{staticClass:"updateClass"},[t._v(t._s(t.VersionNum)+"."+t._s(t.$store.state.version))]),t._v(" "),t._m(8)])])]),t._v(" "),s("div",{staticClass:"Exit_logon"},[s("i",{staticClass:"iconfont icon-icon-yxj-switch-account",on:{click:t.exit}}),t._v(" "),s("div",[s("span",{on:{click:t.exit}},[t._v("退出登录")])])])]),t._v(" "),t.UpdateVisitTypeHide?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses SelectMengContent"},[s("div",{staticClass:"SelectTitle SelectMengTitle"},[t._v("修改拜访方式")]),t._v(" "),s("div",{staticClass:"SelectMengItem"},[s("div",{staticClass:"RadvisitType"},[s("div",[t._v(" ")]),t._v(" "),[s("el-radio",{attrs:{label:"车销"},model:{value:t.radvisitType,callback:function(e){t.radvisitType=e},expression:"radvisitType"}},[t._v("车销")]),t._v(" "),s("el-radio",{attrs:{label:"访销"},model:{value:t.radvisitType,callback:function(e){t.radvisitType=e},expression:"radvisitType"}},[t._v("访销")])],t._v(" "),s("div",[t._v(" ")])],2)]),t._v(" "),s("div",{staticClass:"selectBtn"},[s("div",{on:{click:t.Cancel}},[t._v("取消")]),t._v(" "),s("div",{on:{click:t.Confirm}},[t._v("确定")])])])]):t._e()]),t._v(" "),"WX"!=t.$store.state.G_AppOrWX?s("componentFooter"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("i",{staticClass:"iconfont icon-yewu"})]),this._v(" "),e("div",[this._v("当前业务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("i",{staticClass:"iconfont icon-yonggongzongliang"})]),this._v(" "),e("div",[this._v("拜访方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-xiangyou"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("i",{staticClass:"iconfont icon-xiugaimima"})]),this._v(" "),e("div",[this._v("修改密码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div"),this._v(" "),e("div",[e("i",{staticClass:"iconfont icon-xiangyou"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",[e("i",{staticClass:"iconfont icon-wenhao"})]),this._v(" "),e("div",[this._v("常见问题")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div"),this._v(" "),e("div",[e("i",{staticClass:"iconfont icon-xiangyou"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-guanyu"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-xiangyou"})])}]};var tt=s("VU/8")(J,Z,!1,function(t){s("jMoi")},"data-v-33e84551",null).exports,et={name:"RePassword",data:function(){return{headerText:"修改密码",oldpwd:"",newpwd:"",reNewpwd:"",tips_Msg:"",ifTips:!1}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)},submit:function(){var t=this,e=t.$store.state.userInfo.cellphone;if(this.oldpwd)if(this.newpwd)if(this.reNewpwd)if(this.reNewpwd==this.newpwd)if(this.newpwd.length<6)t.$alert("密码不能小于6位数！","提示",{confirmButtonText:"确定"});else if(this.oldpwd!=this.newpwd){var s={cellphone:e,next_page:"xiugaimima",oldPassword:t.oldpwd,password:t.newpwd};t.httpRequest("updateUserPassword.do",s,function(s){t.ifTips=!0,t.tips_Msg="修改成功",setTimeout(function(){t.ifTips=!1,t.setCookie(e,"",219e3),t.$router.push({name:"Login",query:{}})},1500)})}else t.$alert("新密码不能与原密码相同！","提示",{confirmButtonText:"确定"});else t.$alert("两次新密码不一致！","提示",{confirmButtonText:"确定"});else t.$alert("请确认新密码！","提示",{confirmButtonText:"确定"});else t.$alert("请输入新密码！","提示",{confirmButtonText:"确定"});else t.$alert("请输入原密码！","提示",{confirmButtonText:"确定"})}}},st={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"RePassword"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",[s("span",[t._v("原密码：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.oldpwd,expression:"oldpwd"}],ref:"oldpwd",attrs:{placeholder:"请输入原密码"},domProps:{value:t.oldpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("newpwd")},input:function(e){e.target.composing||(t.oldpwd=e.target.value)}}}),t._v(" "),t.oldpwd?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("oldpwd")}}}):t._e()]),t._v(" "),s("div",[s("span",[t._v("新密码：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newpwd,expression:"newpwd"}],ref:"newpwd",attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:t.newpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFocus("reNewpwd")},input:function(e){e.target.composing||(t.newpwd=e.target.value)}}}),t._v(" "),t.newpwd?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("newpwd")}}}):t._e()]),t._v(" "),s("div",[s("span",[t._v("确认密码：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.reNewpwd,expression:"reNewpwd"}],ref:"reNewpwd",attrs:{type:"password",placeholder:"请再次输入新密码"},domProps:{value:t.reNewpwd},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit(e)},input:function(e){e.target.composing||(t.reNewpwd=e.target.value)}}}),t._v(" "),t.reNewpwd?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("reNewpwd")}}}):t._e()]),t._v(" "),s("div",{staticClass:"BtnComponent",on:{click:t.submit}},[s("div",{staticClass:"onlyBtn"},[t._v("提交")])])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()],1)},staticRenderFns:[]};var ot=s("VU/8")(et,st,!1,function(t){s("/U6h")},"data-v-18a41389",null).exports,it={data:function(){return{headerText:"个人资料"}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)}}},at={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"UserInfo"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"UserInfo"},[t._m(0),t._v(" "),s("div",[s("span",[t._v("姓名")]),t._v(" "),s("span",[t._v(t._s(t.UserName))])]),t._v(" "),s("div",[s("span",[t._v("手机号")]),t._v(" "),s("span",[t._v(t._s(t.UserTel))])]),t._v(" "),s("div",[s("span",[t._v("身份证号")]),t._v(" "),s("input"),t._v(t._s(t.UserIDNum)),t._v(" "),t.UserIDNum?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("UserIDNum")}}}):t._e()])]),t._v(" "),s("div",{staticClass:"ShopInfo"},[t._m(1),t._v(" "),s("div",[s("span",[t._v("车牌号")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleID,expression:"VehicleID"}],domProps:{value:t.VehicleID},on:{input:function(e){e.target.composing||(t.VehicleID=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v("车辆型号")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleModel,expression:"VehicleModel"}],domProps:{value:t.VehicleModel},on:{input:function(e){e.target.composing||(t.VehicleModel=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v("车长")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleLength,expression:"VehicleLength"}],domProps:{value:t.VehicleLength},on:{input:function(e){e.target.composing||(t.VehicleLength=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v("车宽")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleWidth,expression:"VehicleWidth"}],domProps:{value:t.VehicleWidth},on:{input:function(e){e.target.composing||(t.VehicleWidth=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v("车高")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleHeight,expression:"VehicleHeight"}],domProps:{value:t.VehicleHeight},on:{input:function(e){e.target.composing||(t.VehicleHeight=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v("载重吨")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleWeight,expression:"VehicleWeight"}],domProps:{value:t.VehicleWeight},on:{input:function(e){e.target.composing||(t.VehicleWeight=e.target.value)}}}),t._v(" "),t.VehicleWeight?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("VehicleWeight")}}}):t._e()]),t._v(" "),s("div",[s("span",[t._v("载重体积")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.VehicleVolume,expression:"VehicleVolume"}],domProps:{value:t.VehicleVolume},on:{input:function(e){e.target.composing||(t.VehicleVolume=e.target.value)}}}),t._v(" "),t.VehicleVolume?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput("VehicleVolume")}}}):t._e()])]),t._v(" "),s("div",{staticClass:"UploadData uploadImg "},[t._m(2),t._v(" "),s("div",{staticClass:"UploadUserIDCard"},[s("div",{staticClass:"tittleImg"},[t._v("身份证正面照片")]),t._v(" "),s("el-upload",{ref:"CarUpload",attrs:{action:t.HOST+"uploadPicture.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:4,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),s("div",{staticClass:"UploadUserIDCards"},[s("div",{staticClass:"tittleImg"},[t._v("身份证反面照片")]),t._v(" "),s("el-upload",{ref:"CarUpload",attrs:{action:t.HOST+"uploadPicture.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:4,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),s("div",{staticClass:"UploadBusiness"},[s("div",{staticClass:"tittleImg"},[t._v("营业执照照片")]),t._v(" "),s("el-upload",{ref:"CarUpload",attrs:{action:t.HOST+"uploadPicture.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:4,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{staticClass:"onlyBtn",on:{click:t.CustomerSave}},[t._v("保存")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"_head"},[e("i",{staticClass:"iconfont icon-geren"}),e("span",[this._v("个人信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"_head"},[e("i",{staticClass:"iconfont icon-dianpu"}),e("span",[this._v("店铺信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"_head"},[e("i",{staticClass:"iconfont icon-shangchuan"}),e("span",[this._v("上传资料")])])}]};var nt=s("VU/8")(it,at,!1,function(t){s("1TlC")},"data-v-a9328060",null).exports,rt={data:function(){return{headerText:"常见问题",searchValue:"",Questiondata:[],noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqProblemList()}},created:function(){this.reqProblemList()},methods:{f_Fanhui:function(){this.$router.go(-1)},reqProblemList:function(t){var e=this,s={strProblem:e.searchValue,currentPage:e.loadPage,numberPerPage:e.numberPerPage};e.httpRequest("GetCommonProblemList.do",s,function(s){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.Questiondata=e.Questiondata.concat(s.data)):e.Questiondata=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.Questiondata.length?e.noDataShow=!1:e.noDataShow=!0})},toQuestionInfo:function(t){var e=this.Questiondata[t];this.$router.push({name:"Answer",query:{QuestionItem:e,index:t}})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqProblemList("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqProblemList("BottomLoad"))}}},dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AppQuestion"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"QuestionSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按问题名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"QuestionList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.Questiondata,function(e,o){return s("div",{key:o,staticClass:"QuestionItem",attrs:{id:o}},[s("div",{staticClass:"getIndex",on:{click:function(e){return t.toQuestionInfo(o)}}},[s("i",{staticClass:"iconfont icon-jiantouzuo"}),t._v(t._s(e.problem))])])}),0)],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var ct=s("VU/8")(rt,dt,!1,function(t){s("mf1j")},"data-v-187540ca",null).exports,ut={data:function(){return{Answerdata:[],index:0,Questionid:"",headerText:"问题解答"}},components:{componentHeader:_},created:function(){var t=this;this.Questionid=this.$route.query.QuestionItem.id,this.index=this.$route.query.index;var e={problemId:t.Questionid};t.httpRequest("GetCommonProblem.do",e,function(e){t.Answerdata=e.data})},methods:{f_Fanhui:function(){this.$router.go(-1)}}},lt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Answer"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"QuestionTitle"},[s("i",{staticClass:"iconfont icon-jiantouzuo"}),t._v(t._s(t.Answerdata.problem)+" \n      ")]),t._v(" "),s("div",{staticClass:"AnswerText"},[t._v(t._s(t.Answerdata.answer))])])],1)},staticRenderFns:[]};var ht=s("VU/8")(ut,lt,!1,function(t){s("nEBk")},"data-v-32939634",null).exports,vt={data:function(){return{}},props:{ospList:{type:Array,default:function(){return[]}}},created:function(){},methods:{toSelectGoods:function(t){this.$emit("Comp_CustomerSelected",t)}}},_t={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"componentCustomer"},[s("div",{staticClass:"customerListBox"},t._l(t.ospList,function(e,o){return s("div",{key:o,staticClass:"customerListDetail",attrs:{id:o}},[s("div",{on:{click:function(e){return t.toSelectGoods(o)}}},[s("div",[s("span",[t._v("客户名称：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("客户代码：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_CODE))])]),t._v(" "),s("div",[s("span",[t._v("客户城市：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_CITY_CHINESE))])]),t._v(" "),s("div",[s("span",[t._v("客户类型：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_TYPE))])])]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"})])}),0)])},staticRenderFns:[]};var pt={data:function(){return{ConsigneeListData:[],ospList:[],searchName:"",businessCode:"",UsersId:"",noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,whoPush:""}},components:{componentCustomer:s("VU/8")(vt,_t,!1,function(t){s("CLre")},"data-v-60fd85e3",null).exports,componentHeader:_,componentFooter:P},mounted:function(){window.history.pushState(null,null,document.URL),window.addEventListener("popstate",this.onBrowserBack,!1)},destroyed:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)},created:function(){this.$route.query.whoPush&&(this.whoPush=this.$route.query.whoPush),this.loadData()},watch:{searchName:function(t,e){this.loadPage=1,this.allLoaded=!1,this.loadData()}},methods:{onBrowserBack:function(){this.f_Fanhui()},f_Fanhui:function(){this.$router.push({name:"Index"})},SelectSales:function(){this.$router.push({name:"SalesOrder"})},Comp_CustomerSelected:function(t){this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[];var e=this.ospList[t];this.whoPush.length?this.$router.push({name:"FeeBill",query:{customerInfo:e}}):this.$router.push({name:"ChooseGoods",query:{ReceiptInfo:e,whoPush:"PurchaseOrder",orderType:"PURCHASE_IN"}})},loadData:function(t){var e=this,s={appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,searchName:e.searchName,currentPage:e.loadPage,numberPerPage:e.numberPerPage};this.httpRequest("searchCustomerList.do",s,function(s){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.ospList=e.ospList.concat(s.data)):e.ospList=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.ospList.length?e.noDataShow=!1:e.noDataShow=!0})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.loadData("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.loadData("BottomLoad"))}}},ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"PurchaseOrder"},[s("componentHeader",{attrs:{headerText:t.whoPush.length?"门店列表":"采购下单",IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"fixedHead"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],attrs:{placeholder:"按供货商名称搜索"},domProps:{value:t.searchName},on:{input:function(e){e.target.composing||(t.searchName=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])])]),t._v(" "),s("div",{staticClass:"CustomerList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[s("componentCustomer",{attrs:{ospList:t.ospList},on:{Comp_CustomerSelected:t.Comp_CustomerSelected}})],1),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"NoData"},[t._m(0)]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-meiyouwuliuxinxi"}),this._v(" "),e("div",[this._v("没有供货商信息，请联系管理员")])])}]};var mt=s("VU/8")(pt,ft,!1,function(t){s("Hm+o")},"data-v-8cd75a46",null).exports,Ct={data:function(){return{SupplierName:"",suppliersId:"",supplierList:[],searchValue:"",StoresListData:[],noDataShow:!1,SelectBoxFlag:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentFooter:P,componentHeader:_,componentSelectBox:m},created:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId};if(console.log(e),"WX"==t.$store.state.G_AppOrWX)var s="wxSearchCustomerList.do";else s="searchCustomerList.do";this.httpRequest(s,e,function(e){if(console.log(e),e.data.length){for(var s=0;s<e.data.length;s++)e.data[s].name=e.data[s].CUSTOMER_NAME;var o=t.$store.state.SalesOrder_supplierListIdx;t.supplierList=e.data,t.SupplierName=e.data[o].CUSTOMER_NAME,t.suppliersId=e.data[o].CUSTOMER_ID,t.reqStoresListInfo()}else t.$alert("未获取到供应商，请联系管理员","提示",{confirmButtonText:"确定"})})},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo()}},methods:{f_Fanhui:function(){this.$router.push({name:"Index"})},SelectPurchase:function(){this.$router.push({name:"PurchaseOrder"})},Comp_CustomerSelected:function(t){this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[];var e=this.StoresListData[t],s=this.supplierList[this.$store.state.SalesOrder_supplierListIdx];this.$router.push({name:"ChooseGoods",query:{ReceiptInfo:e,DeliveryInfo:s,whoPush:"SalesOrder",orderType:"SALE_OUT"}})},reqStoresListInfo:function(t){var e=this,s={storeName:e.searchValue,businessId:e.$store.state.businessInfo.businessId,appUsersId:e.$store.state.userInfo.user_id,suppliersId:e.suppliersId,currentPage:e.loadPage,numberPerPage:e.numberPerPage};if(console.log(s),"WX"==e.$store.state.G_AppOrWX)var o="wxSearchStore.do";else o="searchStore.do";e.httpRequest(o,s,function(s){console.log(s),t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.StoresListData=e.StoresListData.concat(s.data)):e.StoresListData=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.StoresListData.length?e.noDataShow=!1:e.noDataShow=!0,1==s.data.length&&"WX"==e.$store.state.G_AppOrWX&&e.Comp_CustomerSelected(0)})},selectBoxShow:function(t){this.BouncedName=t,this.SelectBoxFlag=!0,this.SelectBoxList=this.supplierList},selectedItem:function(t){this.SupplierName=this.supplierList[t].name,this.suppliersId=this.supplierList[t].CUSTOMER_ID,this.$store.state.SalesOrder_supplierListIdx=t,this.SelectBoxFlag=!1,this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo()},selectCancel:function(){this.SelectBoxFlag=!1},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqStoresListInfo("BottomLoad"))}}},gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SalesOrder"},[s("componentHeader",{attrs:{headerText:"销售下单",IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),"WX"==t.$store.state.G_AppOrWX?s("componentHeader",{attrs:{headerText:"下单",IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}):t._e(),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"fixedHead"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按门店名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"selectCondition"},[s("div",{on:{click:function(e){return t.selectBoxShow("供货商")}}},[s("span",[t._v("供货商名称：")]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"}),t._v(" "),s("span",[t._v(t._s(t.SupplierName))])])])]),t._v(" "),s("div",{staticClass:"CustomerList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.StoresListData,function(e,o){return s("div",{key:o,staticClass:"customerList_box",attrs:{id:o}},[s("div",{on:{click:function(e){return t.Comp_CustomerSelected(o)}}},[s("div",{staticClass:"CUSTOMER_NAME"},[s("span",[t._v("客户名称：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("客户代码：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_CODE))])]),t._v(" "),s("div",[s("span",[t._v("客户城市：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_CITY_CHINESE))])]),t._v(" "),s("div",[s("span",[t._v("客户类型：")]),t._v(" "),s("span",[t._v(t._s(e.CUSTOMER_TYPE))])])]),t._v(" "),s("i",{staticClass:"iconfont icon-tiaozhuanqianwangyoujiantouxiangyouxiayibuxianxing"})])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()]),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.SelectBoxList,BouncedName:t.BouncedName},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e()],1)},staticRenderFns:[]};var Tt=s("VU/8")(Ct,gt,!1,function(t){s("CEzP")},"data-v-6a785ba2",null).exports,It={data:function(){return{PurchaseArr:[],SelectBox:{},SelectBoxHide:!1,SelectBoxList:[{name:"全部",state:""},{name:"新建",state:"NEW"},{name:"已审核",state:"AUDIT"},{name:"待装车",state:"UNPLANED"},{name:"在途",state:"SHIPPED"},{name:"已完成",state:"DELIVERED"},{name:"已取消",state:"CANCEL"}],noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentFooter:P,componentHeader:_,componentSelectBox:m},created:function(){this.SelectBox=this.SelectBoxList.length?this.SelectBoxList[0]:{},this.requsterList()},methods:{requsterList:function(t){var e=this,s={tmsOrderStatus:this.SelectBox.state,businessId:this.$store.state.businessInfo.businessId,appUsersId:this.$store.state.userInfo.user_id,currentPage:e.loadPage,numberPerPage:e.numberPerPage};this.httpRequest("getPurchaseOrderList.do",s,function(s){console.log(s.data),t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.PurchaseArr=e.PurchaseArr.concat(s.data)):e.PurchaseArr=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.PurchaseArr.length?e.noDataShow=!1:e.noDataShow=!0})},SelectSales:function(){this.$router.push({name:"QuerySalesOrder"})},SelectBoxShow:function(t){this.BouncedName=t,this.SelectBoxHide=!0},selectCancel:function(){this.SelectBoxHide=!1},selectedItem:function(t){this.SelectBox=this.SelectBoxList[t],this.SelectBoxHide=!1,this.requsterList()},toDetail:function(t){this.$router.push({name:"PurchaseOrderDetail",query:{orderId:this.PurchaseArr[t].ORDER_ID}})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.requsterList("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.requsterList("BottomLoad"))}}},St={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"QueryPurchaseOrder"},[t.$store.state.CurrentRoleData.QuerySalesOrder?s("header",{staticClass:"SalesOrderHeader"},[s("div",{on:{click:t.SelectSales}},[t._v("销售订单")]),t._v(" "),s("div",{staticClass:"activeBtn"},[t._v("采购订单")])]):s("componentHeader",{attrs:{headerText:"采购订单"}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"ScreeningNav"},[s("div",[s("div",{staticClass:"StateSelect",on:{click:function(e){return t.SelectBoxShow("订单状态")}}},[s("span",[t._v(t._s(t.SelectBox.name))]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"ConditionsSelectBtn"},[t._v("条件筛选")])])]),t._v(" "),s("div",{staticClass:"searchContainer"},[s("div",{staticClass:"searchResult"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.PurchaseArr,function(e,o){return s("div",{key:o,staticClass:"searchList",attrs:{id:o},on:{click:function(e){return t.toDetail(o)}}},[s("div",{staticClass:"list_left"},[s("div",[s("span",[t._v("订单编号：")]),s("span",[t._v(t._s(e.OMS_NO))]),s("span")]),t._v(" "),s("div",[s("span",[t._v("创建时间：")]),s("span",[t._v(t._s(e.ADDDATE))]),s("span")]),t._v(" "),s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(e.RECEIVE_PARTY_NAME))]),s("span")])]),t._v(" "),s("div",{staticClass:"list_right"},[s("span",[t._v(t._s(e.ORDER_STATUS))])])])}),0),t._v(" "),t.PurchaseArr&&t.PurchaseArr.length?s("div",{staticClass:"searchTotal"},[t._v("共计"+t._s(t.PurchaseArr.length)+"条记录")]):t._e(),t._v(" "),s("div",{staticClass:"kong"})],1)]),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()]),t._v(" "),t.SelectBoxHide?s("componentSelectBox",{attrs:{SelectBoxList:t.SelectBoxList,BouncedName:t.BouncedName},on:{selectCancel:t.selectCancel,selectedItem:t.selectedItem}}):t._e(),t._v(" "),s("componentFooter")],1)},staticRenderFns:[]};var yt=s("VU/8")(It,St,!1,function(t){s("Pju0")},"data-v-d726bfee",null).exports,Dt={data:function(){return{}},props:{OutboundOrderList:{type:Array,default:function(){return[]}},IFQuerySalesOrder:!1,MergeChooseBtnShow:!1,push_stack:!1},components:{},created:function(){},methods:{toPutDetails:function(t){if(this.IFQuerySalesOrder&&this.MergeChooseBtnShow){var e=h()(".putWarehouseList:eq("+t+")>i.iconfont");e.hasClass("icon-1")?e.removeClass("icon-1").addClass("icon-weixuanzhong"):e.hasClass("icon-weixuanzhong")&&e.removeClass("icon-weixuanzhong").addClass("icon-1")}else this.$emit("push_stack_click",!0),this.$router.push({name:"OutboundDetail",query:{transferOutId:this.OutboundOrderList[t].TRANSFER_OUT_ID}})}}},Rt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"componentOutboundOrder"},[s("div",{staticClass:"putWarehouseDetail"},t._l(t.OutboundOrderList,function(e,o){return s("div",{key:o,staticClass:"putWarehouseList",attrs:{id:o},on:{click:function(e){return t.toPutDetails(o)}}},[t.IFQuerySalesOrder&&t.MergeChooseBtnShow?s("i",{staticClass:"iconfont icon-weixuanzhong"}):t._e(),t._v(" "),s("div",[s("span",[t._v(t._s("WX"!=t.$store.state.G_AppOrWX?"出库单号":"入库单号")+"：")]),t._v(" "),s("span",[t._v(t._s(e.OUT_NO))])]),t._v(" "),"WX"!=t.$store.state.G_AppOrWX?s("div",[s("span",[t._v(t._s("TRANSFER_OUT"==e.TRANSFER_OUT_TYPE?"收 货 方 ":"门店名称")+"：")]),t._v(" "),s("span",[t._v(t._s(e.CONSIGNEE_NAME)+" ")])]):t._e(),t._v(" "),"TRANSFER_OUT"!=e.TRANSFER_OUT_TYPE&&"WX"!=t.$store.state.G_AppOrWX?s("div",[s("span",[t._v("门店地址：")]),t._v(" "),s("span",[t._v(t._s(e.CONSIGNEE_ADDRESS))])]):t._e(),t._v(" "),s("div",[s("span",[t._v("下单人名：")]),t._v(" "),s("span",[t._v(t._s(e.ADDWHO))])]),t._v(" "),s("div",[s("span",[t._v("下单日期：")]),t._v(" "),s("span",[t._v(t._s(e.ADDDATE))]),t._v(" "),s("span",{staticClass:"float red",style:{color:e.TYPE_color}},[t._v(t._s(e.TYPE_text))])]),t._v(" "),s("div",[s("span",[t._v("下单数量：")]),t._v(" "),s("span",[t._v(t._s(e.PIRCHASE_QUANTITY))]),t._v(" "),s("span",{staticClass:"float red",style:{color:e.STATUS_color}},[t._v(t._s(e.STATUS_text))])])])}),0)])},staticRenderFns:[]};var Et=s("VU/8")(Dt,Rt,!1,function(t){s("s6ma")},"data-v-3460544e",null).exports,Lt={data:function(){return{headerText:"订单详情",TextContent:"打印",orderId:"",order:{},goodsArr:[],giftArr:[],merges:[]}},components:{componentHeader:_,componentOutboundOrder:Et},created:function(){this.$route.query.orderId&&(this.orderId=this.$route.query.orderId),this.request()},methods:{f_Fanhui:function(){this.$router.go(-1)},toLogistics:function(){this.$router.push({name:"LogisticsInfo",query:{orderId:this.orderId}})},f_Text:function(){},PackUp:function(t,e){"block"==h()("."+e).css("display")?(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(-90deg)"}),h()("."+e).hide(200)):(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(0deg)"}),h()("."+e).show(200))},request:function(){var t=this,e={orderId:this.orderId};this.httpRequest("getPurchaseOrderDetail.do",e,function(e){console.log(e),t.order=e.data.order;for(var s=e.data.order.detail,o=[],i=[],a=0;a<s.length;a++)"GF"==s[a].PRODUCT_TYPE?o[o.length]=s[a]:i[i.length]=s[a];t.giftArr=o,t.goodsArr=i,e.data.TransferOutOrder.length>0&&(t.merges=e.data.TransferOutOrder)})},modify_qty_price:function(t){var e=this,s=[{productNo:t.PRODUCT_NO,orderDetailId:t.ORDER_DETAIL_ID,finalDeliveryNum:t.finalDeliveryNum,finalDeliveryAmount:t.finalDeliveryAmount}],o={appUsersId:e.$store.state.userInfo.user_id,orderId:e.orderId,finalDeliveryNum:e.order.finalDeliveryNum,finalDeliveryAmount:e.order.finalDeliveryAmount,SellOrderDetails:s};e.httpRequest("updSellOrderDelivery.do",o,function(t){e.ifTips=!0,e.tips_Msg="操作成功",setTimeout(function(){e.ifTips=!1,e.request()},1e3)})},edit_click:function(t,e){var s=this,o=0;"数量"==e?o=t.finalDeliveryNum:"价格"==e&&(o=t.finalDeliveryAmount),this.$prompt("请输入"+e,"",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d+)?$/,inputErrorMessage:"请输入数字",inputValue:o,inputType:"number",closeOnClickModal:!1}).then(function(o){var i=o.value;"数量"==e?t.finalDeliveryNum=i:"价格"==e&&(t.finalDeliveryAmount=i);for(var a=0,n=0,r=0;r<s.goodsArr.length;r++)a+=parseInt(s.goodsArr[r].finalDeliveryNum),n+=s.goodsArr[r].finalDeliveryAmount*s.goodsArr[r].finalDeliveryNum;for(r=0;r<s.giftArr.length;r++)a+=parseInt(s.giftArr[r].finalDeliveryNum),n+=s.giftArr[r].finalDeliveryAmount*s.giftArr[r].finalDeliveryNum;console.log(a),console.log(n),s.order.finalDeliveryNum=a,s.order.finalDeliveryAmount=n,s.modify_qty_price(t)}).catch(function(){}),this.$nextTick(function(){h()(".el-input__inner").select()})},dealDeliveryDte:function(t){return t.replace(/00:00:00/g,"")}}},Pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"PurchaseOrderDetail"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfTextShow:!0,TextContent:t.TextContent},on:{f_Fanhui:t.f_Fanhui,f_Text:t.f_Text}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"oDetailContainer"},[s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("订单号为：")]),s("span",[t._v(t._s(t.order.ORD_NO))])]),t._v(" "),s("div",[s("span",[t._v("创建时间：")]),s("span",[t._v(t._s(t.order.ORD_DATE_ADD))])]),t._v(" "),s("div",[s("span",[t._v("发货单位：")]),s("span",[t._v(t._s(t.order.ORD_FROM_NAME))])]),t._v(" "),s("div",[s("span",[t._v("发货地址：")]),s("span",[t._v(t._s(t.order.ORD_FROM_ADDRESS))])]),t._v(" "),s("div",[s("span",[t._v("收货单位：")]),s("span",[t._v(t._s(t.order.ORD_TO_NAME))])]),t._v(" "),s("div",[s("span",[t._v("收货地址：")]),s("span",[t._v(t._s(t.order.ORD_TO_ADDRESS))])]),t._v(" "),s("div",[s("div",[s("span",[t._v("订单状态：")]),s("span",[t._v(t._s(t.order.TMS_STATE))])])]),t._v(" "),t.order.ORD_REMARK?s("div",[s("span",[t._v("订单备注：")]),s("span",[t._v(t._s(t.order.ORD_REMARK))])]):t._e(),t._v(" "),s("div",[s("div",[s("span",[t._v("重量：")]),s("span",[t._v(t._s(t.order.ORD_WEIGHT)+" 吨")])]),t._v(" "),s("div",[s("span",[t._v("体积：")]),s("span",[t._v(t._s(t.order.ORD_VOLUME)+" m³")])])]),t._v(" "),s("div",[s("div",[s("span",[t._v("数量：")]),s("span",[t._v(t._s(t.order.ORD_QTY))])]),t._v(" "),s("div",[s("span",[t._v("货款金额：")]),s("span",[t._v("¥ "+t._s(t.order.ORD_ACT_PRICE))])])]),t._v(" "),"T"==t.$store.state.businessInfo.isEdit?s("div",[s("div",[s("span",[t._v("提货数量：")]),s("span",[t._v(t._s(t.order.finalDeliveryNum))])]),t._v(" "),s("div",[s("span",[t._v("提货金额：")]),s("span",[t._v("¥ "+t._s(t.order.finalDeliveryAmount))])])]):t._e(),t._v(" "),s("div",[t.order.ORD_MJ_PRICE?s("div",[s("span",[t._v("已优惠：")]),s("span",[t._v("¥ "+t._s(t.order.ORD_MJ_PRICE))])]):t._e()]),t._v(" "),s("div",[t._v("送货时间："+t._s(t.dealDeliveryDte(t.order.requestedDeliveryDte)))])])]),t._v(" "),t.merges.length>0?s("div",{staticClass:"merge-info"},[s("div",{staticClass:"infoHead",on:{click:function(e){return t.PackUp("infoHead","merge-c")}}},[t._v("合并订单"),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"infoContainer merge-c"},[s("componentOutboundOrder",{attrs:{IFQuerySalesOrder:!0,MergeChooseBtnShow:!1,OutboundOrderList:t.merges}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"goodsInfo"},[s("div",{staticClass:"infoHead"},[t._v("货物信息")]),t._v(" "),s("div",{staticClass:"goodsContent"},[t._l(t.goodsArr,function(e,o){return s("div",{key:o,staticClass:"goodsArr",attrs:{id:o}},[s("div",[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listRight"},[s("div",{staticClass:"PRODUCT_NAME"},[s("span",{staticStyle:{color:"#000","font-weight":"900"}},[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),s("div",[t._v("产品编号：\n                    "),s("span",[t._v(t._s(e.PRODUCT_NO))])]),t._v(" "),s("div",[s("div",[t._v("数量："),s("span",[t._v(t._s(e.PRODUCT_QTY)+" "+t._s(e.UNIT_STR))])]),t._v(" "),s("div",[t._v("付款单价："),s("span",[t._v("¥ "+t._s(e.PRODUCT_ACT_PRICE))])])]),t._v(" "),"T"==t.$store.state.businessInfo.isEdit?s("div",{staticClass:"product-item-3"},[s("div",[t._v("\n                      配送数量："),s("span",[t._v(t._s(e.finalDeliveryNum)+" "+t._s(e.UNIT_STR))]),t._v(" "),s("i",{staticClass:"iconfont icon-xie",on:{click:function(s){return t.edit_click(e,"数量")}}})]),t._v(" "),s("div",[t._v("\n                      配送单价："),s("span",[t._v("¥ "+t._s(e.finalDeliveryAmount))]),t._v(" "),s("i",{staticClass:"iconfont icon-xie",on:{click:function(s){return t.edit_click(e,"价格")}}})])]):t._e(),t._v(" "),s("div",[e.PRODUCT_ORG_PRICE?s("div",[t._v("优惠单价："),s("span",[t._v("¥ "+t._s(e.PRODUCT_ORG_PRICE))])]):t._e()])])])])}),t._v(" "),t.order.detail&&!t.order.detail.length?s("div",{staticClass:"noneGift"},[t._v("无")]):t._e()],2)]),t._v(" "),t.giftArr.length?s("div",{staticClass:"goodsInfo"},[s("div",{staticClass:"infoHead"},[t._v("赠品信息")]),t._v(" "),s("div",{staticClass:"goodsContent"},t._l(t.giftArr,function(e,o){return s("div",{key:o,staticClass:"goodsArr",attrs:{id:o}},[s("div",{staticClass:"goodsArr_item"},[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listRight"},[s("div",{staticClass:"PRODUCT_NAME"},[s("span",{staticStyle:{color:"#000","font-weight":"900"}},[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),s("div",[t._v("产品编号：\n                    "),s("span",[t._v(t._s(e.PRODUCT_NO))])]),t._v(" "),s("div",[t._v("数量："),s("span",[t._v(t._s(e.PRODUCT_QTY)+" "+t._s(e.UNIT_STR))])]),t._v(" "),s("div",[t._v("\n                    配送数量："),s("span",[t._v(t._s(e.finalDeliveryNum)+" "+t._s(e.UNIT_STR))]),t._v(" "),s("i",{staticClass:"iconfont icon-xie",on:{click:function(s){return t.edit_click(e,"数量")}}})])])]),t._v(" "),e.GIFT_TYPE&&"WINE"==e.GIFT_TYPE?s("div",{staticClass:"bottleFee"},[s("div",[s("div",[s("span",[t._v(t._s(e.BOTTLE_NAME))])]),t._v(" "),s("div",[s("span",[t._v("单价：")]),s("span",[t._v("¥ "+t._s(e.BOTTLE_PRICE))]),t._v("    "),s("span",[t._v("总价：")]),s("span",[t._v("¥ "+t._s(parseFloat(parseFloat(e.BOTTLE_PRICE)*e.PRODUCT_QTY).toFixed(2)))])])])]):t._e()])}),0)]):t._e()]),t._v(" "),"新建"!=t.order.TMS_STATE&&"待装车"!=t.order.TMS_STATE&&"已审核"!=t.order.TMS_STATE&&"取消"!=t.order.TMS_STATE?s("div",{staticClass:"footer",on:{click:t.toLogistics}},[t._v("物流信息")]):t._e()])],1)},staticRenderFns:[]};var Ot=s("VU/8")(Lt,Pt,!1,function(t){s("upUl")},"data-v-22bb4313",null).exports,At={data:function(){return{headerText:"物流信息",data:{DETAIL:""},idx:""}},components:{componentHeader:_},created:function(){var t=this;this.$route.query.orderId&&(this.orderId=this.$route.query.orderId);var e={sellOrderId:this.orderId};this.httpRequest("GetInformation.do",e,function(e){t.data=e.data})},methods:{f_Fanhui:function(){this.$router.go(-1)},tologisticsDetail:function(t){this.$router.push({name:"LogisticsInfoDetail",query:{orderId:this.data.DETAIL[t].ORDER_ID}})},toProgress:function(t){event.stopPropagation(),this.$router.push({name:"CheckSchedule",query:{orderId:this.data.DETAIL[t].ORDER_ID}})},toSign:function(t){event.stopPropagation();var e=this.data.DETAIL[t].DELIVERY_ID,s=this.data.DETAIL[t].OMS_NO;this.$router.push({name:"CheckDeliverPicture",query:{orderID:e,OMS_NO:s}})},toLine:function(t){event.stopPropagation();var e=this.data.DETAIL[t];"已交付"==e.DRIVER_STATUS?this.ViewTrajectoryInMain(e.SHIPMENT_ID,e.SHIPMENT_NO,"交付"):this.ViewTrajectoryInMain(e.SHIPMENT_ID,e.SHIPMENT_NO,"在途")}}},Nt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"LogisticsInfo"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"haveHeadcontainer"},[s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(t.data.CONSIGNEE_NAME))])]),t._v(" "),s("div",[s("span",[t._v("收货地址：")]),s("span",[t._v(t._s(t.data.CONSIGNEE_ADDRESS))])]),t._v(" "),s("div",[s("div",[s("span",[t._v("下单总量：")]),s("span",[t._v(t._s(t.data.ORDER_QTY)+" 件")])]),t._v(" "),s("div",[s("span",[t._v("发货总量：")]),s("span",[t._v(t._s(t.data.ISSUE_QTY)+" 件")])])]),t._v(" "),s("div",[s("div",[s("span",[t._v("下单总重：")]),s("span",[t._v(t._s(t.data.ORDER_WT)+" 吨")])]),t._v(" "),s("div",[s("span",[t._v("发货重量：")]),s("span",[t._v(t._s(t.data.ISSUE_WT)+" 吨")])])]),t._v(" "),s("div",[s("div",[s("span",[t._v("下单体积：")]),s("span",[t._v(t._s(t.data.ORDER_VOL)+" m³")])]),t._v(" "),s("div",[s("span",[t._v("发货体积：")]),s("span",[t._v(t._s(t.data.ISSUE_VOL)+" m³")])])])])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("原单/拆单")]),t._v(" "),t._l(t.data.DETAIL,function(e,o){return s("div",{key:o,staticClass:"infoContainer billList",attrs:{id:o},on:{click:function(e){return t.tologisticsDetail(o)}}},[s("div",[s("span",[t._v("订单编号：")]),s("span",[t._v(t._s(e.OMS_NO))])]),t._v(" "),s("div",[s("span",[t._v("配载单号：")]),s("span",[t._v(t._s(e.SHIPMENT_NO))])]),t._v(" "),s("div",[s("span",[t._v("配载时间：")]),s("span",[t._v(t._s(e.SHIP_TIME))])]),t._v(" "),s("div",[s("span",[t._v("发运时间：")]),s("span",[t._v(t._s(e.ACTUAL_DEPT_TIME))])]),t._v(" "),s("div",[s("div",[t._v("数量："),s("span",[t._v(t._s(e.ORDER_QTY)+" 件")])]),t._v(" "),s("div",[t._v("流程节点："),s("span",[t._v(t._s(e.NODE_STATUS))])])]),t._v(" "),s("div",[s("div",[t._v("重量："),s("span",[t._v(t._s(e.ORDER_WT)+" 吨")])]),t._v(" "),s("div",[t._v("司机交付："),s("span",[t._v(t._s(e.DRIVER_STATUS))])])]),t._v(" "),s("div",[t._v("体积："),s("span",[t._v(t._s(e.ORDER_VOL)+" m³")])]),t._v(" "),s("div",{staticClass:"entryBtn"},[s("div",{staticClass:"progress",attrs:{id:o},on:{click:function(e){return t.toProgress(o)}}},[t._v("查看进度")]),t._v(" "),s("div",{staticClass:"line",attrs:{id:o},on:{click:function(e){return t.toLine(o)}}},[t._v("查看路线")]),t._v(" "),s("div",{staticClass:"sign",attrs:{id:o},on:{click:function(e){return t.toSign(o)}}},[t._v("查看签名")])]),t._v(" "),s("i",{staticClass:"iconfont icon-tiaozhuanqianwangyoujiantouxiangyouxiayibuxianxing"})])}),t._v(" "),t.data.DETAIL.length?t._e():s("span",[t._v("无")])],2)])],1)},staticRenderFns:[]};var xt=s("VU/8")(At,Nt,!1,function(t){s("8KCi")},"data-v-7bcb7cc0",null).exports,$t={data:function(){return{headerText:"物流信息详情",data:{},ORD_NO:"",TMS_SHIPMENT_NO:"",TMS_DATE_LOAD:"",TMS_DATE_ISSUE:"",TMS_FLEET_NAME:"",TMS_DRIVER_NAME:"",TMS_DRIVER_TEL:"",ORD_ISSUE_QTY:0,ORD_ISSUE_WEIGHT:0,ORD_ISSUE_VOLUME:0,TMS_PLATE_NUMBER:"",ORD_WORKFLOW:"",ORD_STATE:"",DRIVER_PAY:"",OrderDetails:[]}},components:{componentHeader:_},created:function(){var t=this;this.$route.query.orderId&&(this.orderId=this.$route.query.orderId);var e={orderId:this.orderId};this.httpRequest("GetTMSOrderInfo.do",e,function(e){t.data=e.data})},methods:{f_Fanhui:function(){this.$router.go(-1)}}},bt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"LogisticsInfoDetail"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[t._v("订单编号："),s("span",[t._v(t._s(t.data.OMS_NO))])]),t._v(" "),s("div",[t._v("配载单号："),s("span",[t._v(t._s(t.data.SHIPMENT_NO))])]),t._v(" "),s("div",[t._v("配载时间："),s("span",[t._v(t._s(t.data.SHIP_TIME))])]),t._v(" "),s("div",[t._v("发运时间："),s("span",[t._v(t._s(t.data.ACTUAL_DEPT_TIME))])]),t._v(" "),s("div",[t._v("承运商名："),s("span",[t._v(t._s(t.data.trans_party_name))])]),t._v(" "),s("div",[t._v("司机车牌："),s("span",[t._v(t._s(t.data.vehicle_Code))])]),t._v(" "),s("div",[t._v("司机姓名："),s("span",[t._v(t._s(t.data.driver_Name))]),t._v("   "),s("span",[t._v(t._s(t.data.mobile_Number)+"   "),t.data.mobile_Number?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.data.mobile_Number)}}}):t._e()])]),t._v(" "),s("div",{staticClass:"bottom"},[s("div",[t._v("下单数量："),s("span",[t._v(t._s(t.data.ORDER_QTY)+" 件")])]),s("div",[t._v("订单流程："),s("span",[t._v(t._s(t.data.NODE_STATUS))])])]),t._v(" "),s("div",{staticClass:"bottom"},[s("div",[t._v("下单总重："),s("span",[t._v(t._s(t.data.ORDER_WT)+" 吨")])]),s("div",[t._v("司机交付："),s("span",[t._v(t._s(t.data.DRIVER_STATUS))])])]),t._v(" "),s("div",{staticClass:"bottom"},[s("div",[t._v("下单体积："),s("span",[t._v(t._s(t.data.ORDER_VOL)+" m³")])]),s("div",[t._v("付款方式："),s("span",[t._v(t._s())])])])])]),t._v(" "),s("div",{staticClass:"orderInfo LogisticsGoodsInfo"},[s("div",{staticClass:"infoHead"},[t._v("货物信息")]),t._v(" "),s("div",t._l(t.data.PRODUCT,function(e,o){return s("div",{key:o,staticClass:"infoContainer",attrs:{id:o}},[s("div",{staticClass:"PRODUCT_NAME"},[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",[t._v("产品编号："),s("span",[t._v(t._s(e.PRODUCT_NO))])]),t._v(" "),s("div",[t._v("产品数量："),s("span",[t._v(t._s(e.ISSUE_QTY)+" "+t._s(e.SECONDARY_UNIT_STR))])])])}),0)])])],1)},staticRenderFns:[]};var wt=s("VU/8")($t,bt,!1,function(t){s("4fUl")},"data-v-7f844bd0",null).exports,Mt={data:function(){return{headerText:"查看进度",data:[],orderId:""}},components:{componentHeader:_},created:function(){var t=this;this.$route.query.orderId&&(this.orderId=this.$route.query.orderId);var e={orderId:this.orderId};this.httpRequest("GetTMSOrderSpeed.do",e,function(e){t.data=e.data})},methods:{f_Fanhui:function(){this.$router.go(-1)}}},Ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CheckSchedule"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"progressContainer haveHeadcontainer"},t._l(t.data,function(e,o){return s("div",{key:o,attrs:{id:o}},[s("i",{staticClass:"iconfont icon-1"}),t._v(" "),s("span",[t._v(t._s(e.types))]),t._v(" "),s("span",[t._v(t._s(e.time))])])}),0)],1)},staticRenderFns:[]};var kt=s("VU/8")(Mt,Ut,!1,function(t){s("iI5B")},"data-v-616180e6",null).exports,Vt={name:"CheckDeliverPicture",data:function(){return{headerText:"查看交付照片"+this.$route.query.OMS_NO,urlParts:[]}},components:{componentHeader:_},created:function(){var t=this,e={strOrderIdx:this.$route.query.orderID};t.$emit("isLoading",!0,"拼命加载中"),this.httpRequest("GetOrderPicture.do",e,function(e){t.$emit("isLoading_",!1),t.urlParts=e.data,t.$previewRefresh()})},methods:{f_Fanhui:function(){this.$router.go(-1)}}},Ft={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"CheckDeliverPicture"},[e("componentHeader",{attrs:{headerText:this.headerText,IfFanhuiShow:!0},on:{f_Fanhui:this.f_Fanhui}}),this._v(" "),e("div",{staticClass:"container"},this._l(this.urlParts,function(t,s){return e("div",{key:s,attrs:{id:s}},[e("div",{staticClass:"PictureContainer"},[e("img",{staticClass:"picture",attrs:{align:"middle",src:t.Product_Url,preview:"2"}})])])}),0)],1)},staticRenderFns:[]};var Bt=s("VU/8")(Vt,Ft,!1,function(t){s("bJ2+")},"data-v-0385b5fc",null).exports,qt={data:function(){return{SaleArr:[],noDataShow:!1,SupplierName:"",suppliersId:"",supplierList:[],searchValue:"",SelectBoxFlag:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,MergeCancelBtnShow:!1,orderState:"",push_stack:!1}},components:{componentFooter:P,componentHeader:_,componentOutboundOrder:Et,componentSelectBox:m},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqOrderListInfo(),this.$store.state.QuerySalesOrder_searchValue=t}},destroyed:function(){0==this.push_stack&&(this.$store.state.QuerySalesOrder_searchValue="")},created:function(){var t=this;this.$route.query.orderState&&(this.orderState=this.$route.query.orderState);var e=this,s={appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId};if("WX"==e.$store.state.G_AppOrWX){var o="wxSearchCustomerList.do";this.$nextTick(function(){h()(".fixedHead").hide(),h()(".ListBox").css("padding-top","100px"),""==t.orderState?t.toAll():"NEW"==t.orderState?t.toPay():"PAID"==t.orderState?t.toGet():"FINISH"==t.orderState?t.toFinish():"CANCEL"==t.orderState&&t.toCancel()})}else{o="searchCustomerList.do";this.$nextTick(function(){h()(".orderState").hide()})}this.httpRequest(o,s,function(t){if(t.data.length){for(var s=0;s<t.data.length;s++)t.data[s].name=t.data[s].CUSTOMER_NAME;var o=e.$store.state.QuerySalesOrder_supplierListIdx;e.supplierList=t.data,e.SupplierName=t.data[o].CUSTOMER_NAME,e.suppliersId=t.data[o].CUSTOMER_ID,e.$store.state.QuerySalesOrder_searchValue?e.searchValue=e.$store.state.QuerySalesOrder_searchValue:e.reqOrderListInfo()}else e.$alert("未获取到供应商，请联系管理员","提示",{confirmButtonText:"确定"})})},methods:{f_Fanhui:function(){this.$router.push({name:"Index"})},push_stack_click:function(t){this.push_stack=t},SelectPurchase:function(){this.$router.push({name:"QueryPurchaseOrder"})},choseAll:function(){this.toAll(),this.orderState="",this.reqOrderListInfo()},choseToPay:function(){this.toPay(),this.orderState="NEW",this.reqOrderListInfo()},choseToGet:function(){this.toGet(),this.orderState="PAID",this.reqOrderListInfo()},choseFinish:function(){this.toFinish(),this.orderState="FINISH",this.reqOrderListInfo()},choseCancel:function(){this.toCancel(),this.orderState="CANCEL",this.reqOrderListInfo()},toAll:function(){h()(".all").css({"border-bottom":"2px solid #1e8cf8",color:"#1e8cf8","font-size":"17px"}),h()(".toPay").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toGet").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".finish").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".cancel").css({"border-bottom":"none","font-size":"14px",color:"#000"})},toPay:function(){h()(".all").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toPay").css({"border-bottom":"2px solid#1e8cf8",color:"#1e8cf8","font-size":"17px"}),h()(".toGet").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".finish").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".cancel").css({"border-bottom":"none","font-size":"14px",color:"#000"})},toGet:function(){console.log(222),h()(".all").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toPay").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toGet").css({"border-bottom":"2px solid#1e8cf8",color:"#1e8cf8","font-size":"17px"}),h()(".finish").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".cancel").css({"border-bottom":"none","font-size":"14px",color:"#000"})},toFinish:function(){h()(".all").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toGet").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toPay").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".finish").css({"border-bottom":"2px solid#1e8cf8",color:"#1e8cf8","font-size":"17px"}),h()(".cancel").css({"border-bottom":"none","font-size":"14px",color:"#000"})},toCancel:function(){h()(".all").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toGet").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".toPay").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".finish").css({"border-bottom":"none","font-size":"14px",color:"#000"}),h()(".cancel").css({"border-bottom":"2px solid#1e8cf8",color:"#1e8cf8","font-size":"17px"})},reqOrderListInfo:function(t){var e=this,s="WX"==e.$store.state.G_AppOrWX?"STORE_PURCHASE":"SALE_OUT",o={storeName:e.searchValue,appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,suppliersId:e.suppliersId,transferType:s,currentPage:e.loadPage,numberPerPage:e.numberPerPage,userType:e.$store.state.G_AppOrWX,orderState:e.orderState};this.httpRequest("searchTransferOut.do",o,function(s){if(t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),"WX"==e.$store.state.G_AppOrWX)for(var o=0;o<s.data.length;o++)"NEW"==s.data[o].STATUS?(s.data[o].STATUS_color="red",s.data[o].STATUS_text="待付款"):"PAID"==s.data[o].STATUS?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="待收货"):"FINISH"==s.data[o].STATUS&&"T"!=s.data[o].HAVE_RETURN?(s.data[o].STATUS_color="green",s.data[o].STATUS_text="已完成"):"CANCEL"==s.data[o].STATUS?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="已取消"):"T"==s.data[o].HAVE_RETURN?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="已退货"):(s.data[o].STATUS_color="#777",s.data[o].STATUS_text=s.data[o].STATUS);else for(o=0;o<s.data.length;o++)"NEW"==s.data[o].STATUS?(s.data[o].STATUS_color="red",s.data[o].STATUS_text="未确认"):"PAID"==s.data[o].STATUS?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="已付款"):"FINISH"==s.data[o].STATUS&&"T"!=s.data[o].HAVE_RETURN?(s.data[o].STATUS_color="green",s.data[o].STATUS_text="已确认"):"CANCEL"==s.data[o].STATUS?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="此出库单已取消"):"T"==s.data[o].HAVE_RETURN?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="已退货"):(s.data[o].STATUS_color="#777",s.data[o].STATUS_text=s.data[o].STATUS);e.loadPage>1?s.data.length&&(e.SaleArr=e.SaleArr.concat(s.data)):s.data.length?e.SaleArr=s.data:e.SaleArr=[],s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.SaleArr.length?e.noDataShow=!1:e.noDataShow=!0})},selectBoxShow:function(t){this.BouncedName=t,this.SelectBoxFlag=!0,this.SelectBoxList=this.supplierList},selectedItem:function(t){this.SupplierName=this.supplierList[t].name,this.suppliersId=this.supplierList[t].CUSTOMER_ID,this.$store.state.QuerySalesOrder_supplierListIdx=t,this.SelectBoxFlag=!1,this.loadPage=1,this.allLoaded=!1,this.reqOrderListInfo()},selectCancel:function(){this.SelectBoxFlag=!1},MergeChoose:function(){this.MergeCancelBtnShow=!0},MergeOrder:function(){for(var t=[],e=0;e<this.SaleArr.length;e++)h()(".putWarehouseList").eq(e).children(".iconfont").hasClass("icon-1")&&(t[t.length]=this.SaleArr[e].TRANSFER_OUT_ID);t.length?(this.$store.state.SumMergeOrderList=t,console.log(this.$store.state.SumMergeOrderList),this.$router.push({name:"ChooseGoods",query:{ReceiptInfo:this.supplierList[this.$store.state.QuerySalesOrder_supplierListIdx],whoPush:"PurchaseOrder",orderType:"PURCHASE_IN",CombinedOrder:"CombinedOrder"}})):this.$alert("没有选中任何订单","提示",{confirmButtonText:"确定"})},MergeCancel:function(){this.MergeCancelBtnShow=!1},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqOrderListInfo("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqOrderListInfo("BottomLoad"))}}},Ht={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"QuerySalesOrder"},["WX"==t.$store.state.G_AppOrWX||t.$store.state.CurrentRoleData.QueryPurchaseOrder?t._e():s("componentHeader",{attrs:{headerText:"销售订单"}}),t._v(" "),"WX"==t.$store.state.G_AppOrWX?s("componentHeader",{attrs:{headerText:"我的订单",IfFanhuiShow:!1},on:{f_Fanhui:t.f_Fanhui}}):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&t.$store.state.CurrentRoleData.QueryPurchaseOrder?s("header",{staticClass:"SalesOrderHeader"},[s("div",{staticClass:"activeBtn"},[t._v("销售订单")]),t._v(" "),s("div",{on:{click:t.SelectPurchase}},[t._v("采购订单")])]):t._e(),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"orderState"},[s("div",{staticClass:"all",on:{click:t.choseAll}},[t._v("全部")]),t._v(" "),s("div",{staticClass:"toPay",on:{click:t.choseToPay}},[t._v("待付款")]),t._v(" "),s("div",{staticClass:"toGet",on:{click:t.choseToGet}},[t._v("待收货")]),t._v(" "),s("div",{staticClass:"finish",on:{click:t.choseFinish}},[t._v("已完成")]),t._v(" "),s("div",{staticClass:"cancel",on:{click:t.choseCancel}},[t._v("已取消")])]),t._v(" "),s("div",{staticClass:"fixedHead"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按 门店名称/出库单号/下单人名 搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.MergeCancelBtnShow&&"osp"==t.$store.state.CurrentRole,expression:'!MergeCancelBtnShow && $store.state.CurrentRole == "osp"'}],staticClass:"MergeChoose",on:{click:t.MergeChoose}},[t._v("编辑")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.MergeCancelBtnShow,expression:"MergeCancelBtnShow"}],staticClass:"MergeCancel",on:{click:t.MergeCancel}},[t._v("取消")])])]),t._v(" "),s("div",{staticClass:"selectCondition"},[s("div",{on:{click:function(e){return t.selectBoxShow("供货商")}}},[s("span",[t._v("供货商名称：")]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"}),t._v(" "),s("span",[t._v(t._s(t.SupplierName))])])])]),t._v(" "),s("div",{staticClass:"ListBox"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[s("componentOutboundOrder",{attrs:{IFQuerySalesOrder:!0,MergeChooseBtnShow:t.MergeCancelBtnShow,OutboundOrderList:t.SaleArr},on:{push_stack_click:t.push_stack_click}})],1),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.MergeCancelBtnShow,expression:"MergeCancelBtnShow"}],staticClass:"MergeOrder",on:{click:t.MergeOrder}},[t._v("合并下单")]),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.SelectBoxList,BouncedName:t.BouncedName},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX?s("componentFooter"):t._e()],1)},staticRenderFns:[]};var Gt=s("VU/8")(qt,Ht,!1,function(t){s("QIE+")},"data-v-4db47480",null).exports,Qt={data:function(){return{}},props:{goodsArr:{type:Array,default:function(){return[]}},titleHead:"",TRANSFER_TYPE:""},methods:{Comp_edit:function(t,e){this.$emit("Comp_edit",t,e)}}},Wt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.goodsArr.length?s("div",{staticClass:"componentCargoInfo"},[s("div",{staticClass:"goodsInfoData"},[s("div",{staticClass:"infoHead"},[t._v(t._s(t.titleHead))]),t._v(" "),s("div",{staticClass:"goodsContent"},t._l(t.goodsArr,function(e,o){return s("div",{key:o,staticClass:"goodsArr",attrs:{id:o}},[s("div",[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"RightBox"},[s("div",[t._v(t._s(e.productName))]),t._v(" "),s("div",[s("span",[t._v("产品代码：")]),s("span",[t._v(t._s(e.productCode))])]),t._v(" "),s("div",[s("div",[s("span",[t._v("数量：")]),s("span",[t._v(t._s(e.pirchaseQuantity)+" "+t._s(e.UNIT_STR))])]),t._v(" "),"赠品信息"==t.titleHead||"PURCHASE_IN"!=t.TRANSFER_TYPE&&"SALE_OUT"!=t.TRANSFER_TYPE?t._e():s("div",[s("span",[t._v("付款单价：")]),s("span",[t._v("¥ "+t._s(e.payment))])])]),t._v(" "),"T"==t.$store.state.businessInfo.isEdit?s("div",{staticClass:"delivery-qty-price"},[s("div",[s("span",[t._v("配送数量：")]),s("span",[t._v(t._s(e.TAKE_PO_NUM)+" "+t._s(e.UNIT_STR))]),t._v(" "),s("i",{staticClass:"iconfont icon-xie",on:{click:function(s){return t.Comp_edit(e,"数量")}}})]),t._v(" "),"赠品信息"==t.titleHead||"PURCHASE_IN"!=t.TRANSFER_TYPE&&"SALE_OUT"!=t.TRANSFER_TYPE?t._e():s("div",[s("span",[t._v("配送单价：")]),s("span",[t._v("¥ "+t._s(e.TAKE_PRICE))]),t._v(" "),"赠品信息"==t.titleHead||"PURCHASE_IN"!=t.TRANSFER_TYPE&&"SALE_OUT"!=t.TRANSFER_TYPE?t._e():s("i",{staticClass:"iconfont icon-xie",on:{click:function(s){return t.Comp_edit(e,"价格")}}})])]):t._e(),t._v(" "),"赠品信息"!=t.titleHead&&e.MJ_PRICE>0&&("PURCHASE_IN"==t.TRANSFER_TYPE||"SALE_OUT"==t.TRANSFER_TYPE)?s("div",[s("span",[t._v("优惠单价：")]),s("span",[t._v("¥ "+t._s(e.MJ_PRICE))])]):t._e()])]),t._v(" "),"GF"==e.PRODUCT_TYPE&&"WINE"==e.GIFT_TYPE?s("div",{staticClass:"bottleFee"},[s("div",[s("div",[s("span",[t._v(t._s(e.BOTTLE_NAME))])]),t._v(" "),s("div",[s("span",[t._v("单价：")]),s("span",[t._v("¥ "+t._s(e.BOTTLE_PRICE))]),t._v("    "),s("span",[t._v("总价：")]),s("span",[t._v("¥ "+t._s(parseFloat(parseFloat(e.BOTTLE_PRICE)*e.pirchaseQuantity).toFixed(2)))])])])]):t._e()])}),0)])]):t._e()},staticRenderFns:[]};var Yt=s("VU/8")(Qt,Wt,!1,function(t){s("Q7n1")},"data-v-4ca51027",null).exports,Xt=s("eMjc"),jt=s.n(Xt),zt={data:function(){return{TextContent:"打印",orderInfo:{},goodsArr:[],giftsArr:[],OutboundObject:"osp",ifTips:!1,tips_Msg:"",selfconfirm_show:!1,confirmcontent:""}},components:{componentHeader:_,componentCargoInfo:Yt},created:function(){this.request()},methods:{f_Fanhui:function(){!this.$route.query.whoPush||"ChooseGoods"!=this.$route.query.whoPush&&"orderConfirm"!=this.$route.query.whoPush?this.$router.go(-1):this.$router.push({name:"QuerySalesOrder"})},request:function(){var t=this;if(t.$route.query.transferOutId){var e={transferOutId:t.$route.query.transferOutId};console.log(e),t.httpRequest("searchTransferOutDetail.do",e,function(e){if(console.log(e),e.data.length){"NEW"==e.data[0].orderInfo.STATUS?e.data[0].orderInfo.STATUS_text="未确认":"FINISH"==e.data[0].orderInfo.STATUS&&"T"!=e.data[0].orderInfo.HAVE_RETURN?e.data[0].orderInfo.STATUS_text="已确认":"CANCEL"==e.data[0].orderInfo.STATUS?e.data[0].orderInfo.STATUS_text="此出库单已取消":"T"==e.data[0].orderInfo.HAVE_RETURN?e.data[0].orderInfo.STATUS_text="已退货":e.data[0].orderInfo.STATUS_text=e.data[0].orderInfo.STATUS,"SALE_OUT"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TYPE_text="销售出库":"OTHER_OUT"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TYPE_text="其它出库":"TRANSFER_OUT"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TYPE_text="调拨出库":"PURCHASE_RETURN_OUT"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TYPE_text="采购退货出库":e.data[0].orderInfo.TYPE_text=e.data[0].orderInfo.transferType,t.orderInfo=e.data[0].orderInfo;for(var s=[],o=[],i=0;i<e.data[0].detail.length;i++)"GF"==e.data[0].detail[i].PRODUCT_TYPE?o[o.length]=e.data[0].detail[i]:s[s.length]=e.data[0].detail[i];t.goodsArr=s,t.giftsArr=o,0==t.orderInfo.TAKE_PRICE&&(t.orderInfo.TAKE_PRICE=t.orderInfo.PAY_PRICE),0==t.orderInfo.TAKE_NUM&&(t.orderInfo.TAKE_NUM=t.orderInfo.orderQty);for(i=0;i<t.goodsArr.length;i++)0==t.goodsArr[i].TAKE_PO_NUM&&(t.goodsArr[i].TAKE_PO_NUM=t.goodsArr[i].pirchaseQuantity),0==t.goodsArr[i].TAKE_PRICE&&(t.goodsArr[i].TAKE_PRICE=t.goodsArr[i].payment);for(i=0;i<t.giftsArr.length;i++)0==t.giftsArr[i].TAKE_PO_NUM&&(t.giftsArr[i].TAKE_PO_NUM=t.giftsArr[i].pirchaseQuantity),0==t.giftsArr[i].TAKE_PRICE&&(t.giftsArr[i].TAKE_PRICE=t.giftsArr[i].payment)}else t.$alert("没有查询到数据，请联系管理员","提示",{confirmButtonText:"确定"})})}},Comp_edit:function(t,e){var s=this,o=0;"数量"==e?o=t.TAKE_PO_NUM:"价格"==e&&(o=t.TAKE_PRICE),this.$prompt("请输入"+e,"",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d+)?$/,inputErrorMessage:"请输入数字",inputValue:o,inputType:"number",closeOnClickModal:!1}).then(function(o){var i=o.value;"数量"==e?t.TAKE_PO_NUM=i:"价格"==e&&(t.TAKE_PRICE=i);for(var a=0,n=0,r=0;r<s.goodsArr.length;r++)a+=parseInt(s.goodsArr[r].TAKE_PO_NUM),n+=s.goodsArr[r].TAKE_PRICE*s.goodsArr[r].TAKE_PO_NUM;for(r=0;r<s.giftsArr.length;r++)a+=parseInt(s.giftsArr[r].TAKE_PO_NUM),n+=s.giftsArr[r].TAKE_PRICE*s.giftsArr[r].TAKE_PO_NUM;console.log(a),console.log(n),s.orderInfo.TAKE_NUM=a,s.orderInfo.TAKE_PRICE=n,s.modify_qty_price(t)}).catch(function(){}),this.$nextTick(function(){h()(".el-input__inner").select()})},modify_qty_price:function(t){var e=this,s=[{productId:t.productId,transferOutDetailId:t.transferOutDetailId,takeNum:t.TAKE_PO_NUM,takePrice:t.TAKE_PRICE}],o={appUsersId:e.$store.state.userInfo.user_id,transferOutId:e.$route.query.transferOutId,takePoNumAll:e.orderInfo.TAKE_NUM,takeAmount:e.orderInfo.TAKE_PRICE,TransferOutDetails:s};e.httpRequest("updTranDelivery.do",o,function(t){e.ifTips=!0,e.tips_Msg="操作成功",setTimeout(function(){e.ifTips=!1,e.request()},1e3)})},downloadURI:function(t,e){var s=document.createElement("a");s.download=e,s.href=t,s.click()},setImage:function(){jt()(document.body).then(function(t){var e=t.toDataURL(),s=new plus.nativeObj.Bitmap;s.loadBase64Data(e,function(){console.log("创建成功")},function(){console.log("创建失败")}),s.save("_www/img1.jpg",{overwrite:!0},function(){console.log("保存成功")},function(){console.log("保存失败")}),plus.gallery.save("_www/img1.jpg",function(){console.log("保存图片到相册成功")},function(){console.log("保存图片到相册失败")})})},getBlob:function(t){var e=t.toDataURL("image/jpeg",1);this.dataurl=e,console.log(this.dataurl),e=e.split(",")[1],e=window.atob(e);for(var s=new Uint8Array(e.length),o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return new Blob([s],{type:"image/jpeg"})},f_Text:function(){this.setImage()},reStore:function(){var t=this;this.selfconfirm("确定要恢复成新单吗?",function(){var e={cellphone:t.$store.state.userInfo.cellphone,transferOutId:t.$route.query.transferOutId,type:"reStore"};t.httpRequest("saveCancelTransferOut.do",e,function(e){console.log(e),t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.go(-1)},2e3)})})},pay:function(){var t=this,e=returnCitySN.cip,s={cellphone:this.$store.state.userInfo.cellphone,orderId:this.orderInfo.TRANSFER_ID,total_fee:this.orderInfo.PAY_PRICE,mch_create_ip:e,sub_openid:this.$store.state.GopenId};this.httpRequest("wxPay.do",s,function(e){var s=JSON.parse(e.data.pay_info);function o(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:s.appId,timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:s.signType,paySign:s.paySign},function(e){if("get_brand_wcpay_request:ok"==e.err_msg){alert("支付成功");var s={appUsersId:t.$store.state.userInfo.user_id,transferOutId:t.$route.query.transferOutId};t.httpRequest("updTranState.do",s,function(e){t.$router.push({name:"QuerySalesOrder"})})}else"get_brand_wcpay_request:cancel"==e.err_msg?alert("取消支付"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o)):o()})},selfconfirm_cancel:function(){this.selfconfirm_show=!1},selfconfirm_confirm:function(){},selfconfirm_confirm_:function(){this.selfconfirm_show=!1,this.selfconfirm_confirm()},selfconfirm:function(t,e){this.selfconfirm_show=!0,this.confirmcontent=t,this.selfconfirm_confirm=e},returnOnclick:function(){var t=this;this.selfconfirm("确定要全部退货吗?",function(){var e={transferOutId:t.$route.query.transferOutId,businessId:t.$store.state.businessInfo.businessId,userId:t.$store.state.userInfo.user_id,cellphone:t.$store.state.userInfo.cellphone};t.httpRequest("SalesReturnAll.do",e,function(e){t.ifTips=!0,t.tips_Msg=e.Msg,setTimeout(function(){t.$router.go(-1)},2e3)})})},PartReturn:function(){var t={CUSTOMER_NAME:this.orderInfo.consignorName,CONTACT_NAME:this.orderInfo.consignorContact,CONTACT_TEL:this.orderInfo.consignorTelephone,CUSTOMER_ADDRESS:this.orderInfo.consignorAddress},e={CUSTOMER_NAME:this.orderInfo.consigneeName,CONTACT_NAME:this.orderInfo.consigneeContact,CUSTOMER_TEL:this.orderInfo.consigneeTelephone,CUSTOMER_ADDRESS:this.orderInfo.consigneeAddress};this.$router.push({name:"ChooseGoods",query:{ReceiptInfo:t,DeliveryInfo:e,whoPush:"OutboundDetail",orderType:"SALE_RETURN_IN_PART",transferOutId:this.orderInfo.TRANSFER_ID}})},confirmOutbound:function(){var t=this;if("SALE_OUT"==this.orderInfo.transferType)this.selfconfirm("确定要出库吗?",function(){var e={transferOutId:t.$route.query.transferOutId,types:"user"};console.log(e),t.httpRequest("saveConfirmTransferOut.do",e,function(e){console.log(e),t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.go(-1)},2e3)})});else{var e="确定要出库吗?";"WX"==this.$store.state.G_AppOrWX&&(e="确定要收货吗？"),this.selfconfirm(e,function(){var e={transferOutId:t.$route.query.transferOutId,types:"osp"};console.log(e),t.httpRequest("saveConfirmTransferOut.do",e,function(e){console.log(e),t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.go(-1)},2e3)})})}},cancelOutbound:function(){var t=this;this.selfconfirm("确定要取消出库吗?",function(){var e={cellphone:t.$store.state.userInfo.cellphone,transferOutId:t.$route.query.transferOutId};console.log(e),t.httpRequest("saveCancelTransferOut.do",e,function(e){console.log(e),t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.go(-1)},2e3)})})},confirmTransferOut:function(){var t=this;this.selfconfirm("确定要调拔吗?",function(){var e={cellphone:t.$store.state.userInfo.cellphone,transferId:t.$route.query.transferOutId,appUsersId:t.$store.state.userInfo.user_id,type:"OUT"};t.httpRequest("saveTransferConfirm.do",e,function(e){t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.go(-1)},2e3)})})},cancelTransferIn:function(){var t=this;this.selfconfirm("确定取消调拔出库吗?",function(){var e={transferId:t.$route.query.transferOutId,appUsersId:t.$store.state.userInfo.user_id,type:"OUT"};t.httpRequest("saveTransferCancel.do",e,function(e){t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.go(-1)},2e3)})})}}},Kt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"OutboundDetail"},[s("componentHeader",{attrs:{headerText:"WX"!=t.$store.state.G_AppOrWX?"出库详情":"订单详情",IfFanhuiShow:!0,IfTextShow:!0,TextContent:t.TextContent},on:{f_Fanhui:t.f_Fanhui,f_Text:t.f_Text}}),t._v(" "),s("div",{staticClass:"putDetails haveHeadcontainer"},[s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[t._v(t._s("WX"!=t.$store.state.G_AppOrWX?"出库单号":"订单编号")+"："),s("span",[t._v(t._s(t.orderInfo.OUTNO))])]),t._v(" "),s("div",[t._v("创建时间："),s("span",[t._v(t._s(t.orderInfo.ADDDATE))])]),t._v(" "),"WX"!=t.$store.state.G_AppOrWX?s("div",[t._v("订单类型："),s("span",[t._v(t._s(t.orderInfo.TYPE_text))])]):t._e(),t._v(" "),s("div",[t._v("订单状态："),s("span",[t._v(t._s(t.orderInfo.STATUS_text))])]),t._v(" "),t.orderInfo.REMARK?s("div",[t._v("订单备注："),s("span",[t._v(t._s(t.orderInfo.REMARK))])]):t._e(),t._v(" "),s("div",{staticClass:"flexDiv"},["PURCHASE_IN"==t.orderInfo.transferType||"SALE_OUT"==t.orderInfo.transferType||"WX"==t.$store.state.G_AppOrWX?s("div",[t._v("付款价格："),s("span",[t._v("¥ "+t._s(t.orderInfo.PAY_PRICE))])]):t._e(),t._v(" "),s("div",[t._v("下单数量："),s("span",[t._v(t._s(t.orderInfo.orderQty))])]),t._v(" "),t.orderInfo.MJ_PRICE>0?s("div",[t._v("优惠："),s("span",[t._v("¥"+t._s(t.orderInfo.MJ_PRICE))])]):t._e()]),t._v(" "),"T"==t.$store.state.businessInfo.isEdit?s("div",{staticClass:"flexDiv"},["PURCHASE_IN"==t.orderInfo.transferType||"SALE_OUT"==t.orderInfo.transferType||"WX"==t.$store.state.G_AppOrWX?s("div",[t._v("配送总价："),s("span",[t._v("¥ "+t._s(t.orderInfo.TAKE_PRICE))])]):t._e(),t._v(" "),s("div",[t._v("配送总量："),s("span",[t._v(t._s(t.orderInfo.TAKE_NUM))])])]):t._e(),t._v(" "),t.orderInfo.REQUESTED_DELIVERY_DTE?s("div",[t._v("要求送货时间："),s("span",[t._v(t._s(t.orderInfo.REQUESTED_DELIVERY_DTE?t.orderInfo.REQUESTED_DELIVERY_DTE.substring(0,10):t.orderInfo.REQUESTED_DELIVERY_DTE))])]):t._e()])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("发货方")]),t._v(" "),s("div",{staticClass:"infoContainer customerInfo"},[s("div",[t._m(0),s("div",[s("span",[t._v(t._s(t.orderInfo.consignorName))])])]),t._v(" "),s("div",[t._m(1),s("div",[t.orderInfo.consignorContact?s("span",[t._v(t._s(t.orderInfo.consignorContact)+"  ")]):t._e(),s("span",[t._v(t._s(t.orderInfo.consignorTelephone)+"   "),t.orderInfo.consignorTelephone?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.orderInfo.consignorTelephone)}}}):t._e()])])]),t._v(" "),s("div",[t._m(2),s("div",[s("span",[t._v(t._s(t.orderInfo.consignorAddress))])])])])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("收货方")]),t._v(" "),s("div",{staticClass:"infoContainer customerInfo"},["TRANSFER_OUT"==t.orderInfo.transferType?s("div",[t._m(3),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeName))])])]):s("div",[t._m(4),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeName))])])]),t._v(" "),"TRANSFER_OUT"==t.orderInfo.transferType?s("div",[t._m(5),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeTelephone)+"   "),t.orderInfo.consigneeTelephone?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.orderInfo.consigneeTelephone)}}}):t._e()])])]):s("div",[t._m(6),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeContact)+"   ")]),s("span",[t._v(t._s(t.orderInfo.consigneeTelephone)+"   "),t.orderInfo.consigneeTelephone?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.orderInfo.consigneeTelephone)}}}):t._e()])])]),t._v(" "),t.orderInfo.consigneeAddress?s("div",[t._m(7),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeAddress))])])]):t._e()])]),t._v(" "),s("componentCargoInfo",{attrs:{goodsArr:t.goodsArr,TRANSFER_TYPE:t.orderInfo.transferType,titleHead:"货物信息"},on:{Comp_edit:t.Comp_edit}}),t._v(" "),s("componentCargoInfo",{attrs:{goodsArr:t.giftsArr,titleHead:"赠品信息"},on:{Comp_edit:t.Comp_edit}}),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&"FINISH"==t.orderInfo.STATUS&&"SALE_OUT"==t.orderInfo.transferType&&"T"!=t.orderInfo.HAVE_RETURN?s("div",{staticClass:"returnGoods",on:{click:t.returnOnclick}},[t._v("全部退货")]):t._e(),t._v(" "),"WX"!=t.$store.state.G_AppOrWX&&"FINISH"==t.orderInfo.STATUS&&"SALE_OUT"==t.orderInfo.transferType&&"T"!=t.orderInfo.HAVE_RETURN?s("div",{staticClass:"returnGoods",on:{click:t.PartReturn}},[t._v("部分退货")]):t._e(),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()],1),t._v(" "),"TRANSFER_OUT"!=t.orderInfo.transferType?s("div",{staticClass:"entryBtn"},["NEW"==t.orderInfo.STATUS?s("div",{on:{click:t.cancelOutbound}},[t._v("取消订单")]):t._e(),t._v(" "),"NEW"==t.orderInfo.STATUS&&"WX"!=t.$store.state.G_AppOrWX&&("osp"==t.$store.state.CurrentRole||"ospSalesman"==t.$store.state.CurrentRole&&"车销"==t.$store.state.userInfo.visitType)?s("div",{on:{click:t.confirmOutbound}},[t._v("确定出库")]):t._e(),t._v(" "),"NEW"==t.orderInfo.STATUS&&"WX"==t.$store.state.G_AppOrWX?s("div",{on:{click:t.pay}},[t._v("付款")]):t._e(),t._v(" "),"PAID"==t.orderInfo.STATUS&&"WX"==t.$store.state.G_AppOrWX?s("div",{on:{click:t.confirmOutbound}},[t._v("确认收货")]):t._e()]):t._e(),t._v(" "),"NEW"==t.orderInfo.STATUS&&"TRANSFER_OUT"==t.orderInfo.transferType&&"WX"!=t.$store.state.G_AppOrWX?s("div",{staticClass:"entryBtn"},[s("div",{on:{click:t.cancelTransferIn}},[t._v("取消调拔")]),t._v(" "),"osp"==t.$store.state.CurrentRole?s("div",{on:{click:t.confirmTransferOut}},[t._v("确定调拔")]):t._e()]):t._e(),t._v(" "),"CANCEL"==t.orderInfo.STATUS&&"WX"!=t.$store.state.G_AppOrWX?s("div",{staticClass:"entryBtn"},[s("div",{on:{click:t.reStore}},[t._v("恢复为新单")])]):t._e(),t._v(" "),t.selfconfirm_show?s("div",{staticClass:"selfconfirm"},[s("div",{staticClass:"selfconfirm_contianer"},[s("div",{staticClass:"selfconfirm_head"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"selfconfirm_content"},[t._v(t._s(t.confirmcontent))]),t._v(" "),s("div",{staticClass:"selfconfirm_btn"},[s("div",{on:{click:function(e){return t.selfconfirm_cancel()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(e){return t.selfconfirm_confirm_()}}},[t._v("确认")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("客户名称：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("联系")]),this._v("人：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("发货地址：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("业务")]),this._v("员：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("门店名称：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("联系电话：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("联系")]),this._v("人：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("收货地址：")])])}]};var Jt=s("VU/8")(zt,Kt,!1,function(t){s("qUmM")},"data-v-1951d3dc",null).exports,Zt={name:"ChooseGoods",data:function(){return{headerText:"选择商品",AddressShow:!1,goodsList:[],HnavBrandList:[],VnavTypeList:[],HnavBrandIndex:0,VnavTypeIdx:0,totalNum:0,totalPrice:0,isHidden:!1,cartShow:0,submitArr:[],element:"",inputFocus:!1,inputValue:"",ShoppingCartDetailHide:!1,ReceiptInfo:{},DeliveryInfo:{},number:{},inputNum:0,firstReq:!1,whoPush:"",orderType:"",isShowSelectStore:!1,SelectedInfoName:"",returnOrtransrerText:"",isShowSelectReceiveAndDeliver:!1,receORdeliv_consignee:"",receORdeliv_consignor:"",IFreceORdeliv_transition:!1,IFSelectReceiveMeng:!1,ReceiveORDeliverName:"",ReceiveORDeliverHeaderName:"",visitId:0,CurrentStoresId:0,IfTextShow:!1,TextContent:"跳过",noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,searchValue:"",promotionName:""}},components:{componentHeader:_},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.resquestProductList()}},mounted:function(){window.history.pushState(null,null,document.URL),window.addEventListener("popstate",this.onBrowserBack,!1);var t=parseFloat(h()(".fixedTop").css("height"))+parseFloat(h()("header").css("height"))+"px";h()(".LowerBody").css("paddingTop",t)},destroyed:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)},created:function(){var t=this,e=this.$store.state.BackBottle;if(this.submitArr=e.g_submitArr,this.ReceiptInfo=e.ConsigneeData_selected,this.DeliveryInfo=e.DeliveryAddr_selected,this.totalNum=e.totalNum,this.$route.query.whoPush&&(this.whoPush=this.$route.query.whoPush),this.$route.query.orderType&&(this.orderType=this.$route.query.orderType),this.$route.query.ReceiptInfo&&(this.ReceiptInfo=this.$route.query.ReceiptInfo),this.$route.query.DeliveryInfo&&(this.DeliveryInfo=this.$route.query.DeliveryInfo),"PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType){this.headerText="采购下单";var s={customerId:t.ReceiptInfo.CUSTOMER_ID};if(console.log(s),t.httpRequest("getCustomerParent.do",s,function(e){t.DeliveryInfo=e.data}),this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder){var o={outOrderIds:t.$store.state.SumMergeOrderList,consignee_id:t.ReceiptInfo.CUSTOMER_ID};console.log(o),t.httpRequest("mergeSaleOrder.do",o,function(e){console.log(e),t.submitArr=e.data;for(var s=0,o=0;o<e.data.length;o++)s=parseInt(s)+parseInt(e.data[o].number);t.totalNum=s})}}if("SalesOrder"==this.whoPush&&"SALE_OUT"==this.orderType&&("WX"==t.$store.state.G_AppOrWX?this.headerText="产品订购":this.headerText="销售下单"),("CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType||"HistoryVisit"==this.whoPush&&"SALE_OUT"==this.orderType)&&(this.headerText="建议订单",this.IfTextShow=!0,this.$route.query.visitId&&(this.visitId=this.$route.query.visitId),!e.totalNum)){this.$route.query.CurrentStoresId&&(this.CurrentStoresId=this.$route.query.CurrentStoresId);var i={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:t.CurrentStoresId};console.log(i),t.httpRequest("GetStoreOne.do",i,function(e){console.log(e),t.ReceiptInfo=e.data,t.DeliveryInfo=e.data.suppliers})}if("InventoryManage"==this.whoPush&&"OTHER_IN"==this.orderType&&(this.headerText="其他入库",this.isShowSelectStore=!0,this.returnOrtransrerText="选择发货方",this.$route.query.CustomerInfo&&(this.DeliveryInfo=this.$route.query.CustomerInfo),this.SelectedInfoName=this.DeliveryInfo.CUSTOMER_NAME),"InventoryManage"==this.whoPush&&"OTHER_OUT"==this.orderType&&(this.headerText="其他出库",this.isShowSelectStore=!0,this.returnOrtransrerText="选择收货方",this.$route.query.CustomerInfo&&(this.ReceiptInfo=this.$route.query.CustomerInfo),this.SelectedInfoName=this.ReceiptInfo.CUSTOMER_NAME),"InventoryManage"==this.whoPush&&"SALE_RETURN_IN"==this.orderType&&(this.headerText="销售退货",this.isShowSelectStore=!0,this.returnOrtransrerText="选择门店",this.$route.query.CustomerInfo&&(this.DeliveryInfo=this.$route.query.CustomerInfo),this.SelectedInfoName=this.DeliveryInfo.CUSTOMER_NAME),"OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType&&(this.headerText="部分退货"),"InventoryManage"==this.whoPush&&"TRANSFER"==this.orderType){if(this.headerText="调拨",this.isShowSelectReceiveAndDeliver=!0,t.$route.query.IFreceORdeliv_transition)this.IFreceORdeliv_transition=t.$route.query.IFreceORdeliv_transition;else{var a={storeName:"",cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,suppliersId:t.$store.state.InventoryOspInfo.CUSTOMER_ID,currentPage:1,numberPerPage:5};console.log(a),t.httpRequest("findUserList.do",a,function(e){console.log(e),1==e.data.length&&(t.ReceiptInfo={CUSTOMER_ID:e.data[0].APP_USERS_ID,CONTACT_NAME:e.data[0].USER_NAME,CONTACT_TEL:e.data[0].CELLPHONE,CUSTOMER_TEL:e.data[0].CELLPHONE},t.receORdeliv_consignee=t.ReceiptInfo.CUSTOMER_NAME?t.ReceiptInfo.CUSTOMER_NAME:t.ReceiptInfo.CONTACT_NAME)})}this.IFreceORdeliv_transition?this.$route.query.CustomerInfo&&(this.DeliveryInfo=this.$route.query.CustomerInfo):this.$route.query.CustomerInfo&&(this.ReceiptInfo=this.$route.query.CustomerInfo),this.receORdeliv_consignee=this.ReceiptInfo.CUSTOMER_NAME?this.ReceiptInfo.CUSTOMER_NAME:this.ReceiptInfo.CONTACT_NAME,this.receORdeliv_consignor=this.DeliveryInfo.CUSTOMER_NAME?this.DeliveryInfo.CUSTOMER_NAME:this.DeliveryInfo.CONTACT_NAME}var n={businessId:this.$store.state.businessInfo.businessId,appUsersType:this.$store.state.G_AppOrWX,appUsersId:t.$store.state.userInfo.user_id};console.log(n),this.httpRequest("searchProductType.do",n,function(e){t.firstReq=!0,t.noDataShow=!1,t.HnavBrandList=e.data,t.HnavBrandIndex=0,t.VnavTypeIdx=0,e.data.length?(t.VnavTypeList=e.data[0].TYPE,t.resquestProductList()):t.noDataShow=!0})},methods:{onBrowserBack:function(){this.f_Fanhui()},f_Fanhui:function(){this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[],this.$store.state.OptionsGiftNumberList={},this.$store.state.ORDER_REQUEST_DELIVERY="",this.$store.state.ORDER_REMARK_VALUE="","CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType?this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?this.$router.go(-1):this.$router.push({name:"CustomerVisit"}):"HistoryVisit"==this.whoPush&&"SALE_OUT"==this.orderType?this.$route.query.orderConfirmattached&&"orderConfirm"==this.$route.query.orderConfirmattached?this.$router.push({name:"HistoryVisit",query:{orderConfirmattached:"orderConfirm"}}):this.$router.go(-1):"OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType?this.$router.push({name:this.whoPush,query:{transferOutId:this.$route.query.transferOutId,whoPush:"ChooseGoods"}}):"PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType&&this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder?this.$router.push({name:"QuerySalesOrder"}):this.$router.push({name:this.whoPush})},f_Text:function(){this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[],this.$store.state.OptionsGiftNumberList={},this.$store.state.ORDER_REQUEST_DELIVERY="",this.$store.state.ORDER_REMARK_VALUE="",this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?this.$router.go(-1):this.$router.push({name:"VividDisplay"})},receORdeliv_transition:function(){var t=this.DeliveryInfo;this.DeliveryInfo=this.ReceiptInfo,this.ReceiptInfo=t,this.IFreceORdeliv_transition=!this.IFreceORdeliv_transition,this.receORdeliv_consignee=this.ReceiptInfo.CUSTOMER_NAME?this.ReceiptInfo.CUSTOMER_NAME:this.ReceiptInfo.CONTACT_NAME,this.receORdeliv_consignor=this.DeliveryInfo.CUSTOMER_NAME?this.DeliveryInfo.CUSTOMER_NAME:this.DeliveryInfo.CONTACT_NAME,this.loadPage=1,this.allLoaded=!1,this.resquestProductList()},toSelectSalesMan:function(t){if(this.$store.state.BackBottle.g_submitArr=this.submitArr,this.$store.state.BackBottle.totalNum=this.totalNum,this.$store.state.BackBottle.ConsigneeData_selected=this.ReceiptInfo,this.$store.state.BackBottle.DeliveryAddr_selected=this.DeliveryInfo,!this.IFreceORdeliv_transition&&"Deliver"==t||this.IFreceORdeliv_transition&&"Receive"==t)return this.IFreceORdeliv_transition?(this.ReceiveORDeliverName=this.receORdeliv_consignee,this.ReceiveORDeliverHeaderName="收货方全称"):(this.ReceiveORDeliverName=this.receORdeliv_consignor,this.ReceiveORDeliverHeaderName="发货方全称"),void(this.IFSelectReceiveMeng=!0);this.$router.push({name:"SelectSalesman",query:{whoPush:"ChooseGoods",whoPush_order:this.whoPush,orderType:this.orderType,IFreceORdeliv_transition:this.IFreceORdeliv_transition}})},toSelectStores:function(){this.$store.state.BackBottle.g_submitArr=this.submitArr,this.$store.state.BackBottle.totalNum=this.totalNum,this.$store.state.BackBottle.ConsigneeData_selected=this.ReceiptInfo,this.$store.state.BackBottle.DeliveryAddr_selected=this.DeliveryInfo,this.$router.push({name:"SelectStores",query:{whoPush:"ChooseGoods",whoPush_order:this.whoPush,orderType:this.orderType}})},resquestProductList:function(t){var e=this,s="",o="";"OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType&&(s=this.$route.query.transferOutId),("PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType||"SalesOrder"==this.whoPush&&"SALE_OUT"==this.orderType)&&(o=this.ReceiptInfo.CUSTOMER_ID),("CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType||"HistoryVisit"==this.whoPush&&"SALE_OUT"==this.orderType)&&(o=this.CurrentStoresId);var i={productName:e.searchValue,businessId:e.$store.state.businessInfo.businessId,appUsersId:e.$store.state.userInfo.user_id,productBrand:e.HnavBrandList[e.HnavBrandIndex].PRODUCT_BRAND_ID,productType:e.VnavTypeList[e.VnavTypeIdx].PRODUCT_TYPE_ID,transferOutId:s,currentPage:e.loadPage,numberPerPage:e.numberPerPage,consignee_id:o,userType:e.$store.state.G_AppOrWX};"InventoryManage"==e.whoPush&&"TRANSFER"==e.orderType?e.IFreceORdeliv_transition?e.receORdeliv_consignor&&(i.opeType="IN",i.dbUserId=e.DeliveryInfo.CUSTOMER_ID,i.superiorId=e.ReceiptInfo.CUSTOMER_ID):(i.opeType="OUT",i.superiorId=e.DeliveryInfo.CUSTOMER_ID):"SALE_OUT"==e.orderType&&(i.superiorId=e.DeliveryInfo.CUSTOMER_ID),"PurchaseOrder"==e.whoPush&&"PURCHASE_IN"==e.orderType&&e.$route.query.CombinedOrder&&"CombinedOrder"==e.$route.query.CombinedOrder&&(i.outOrderIds=e.$store.state.SumMergeOrderList,console.log(e.$store.state.SumMergeOrderList)),console.log(i),e.httpRequest("searchProductList.do",i,function(s){console.log(s.data),t&&"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded();for(var o=0;o<s.data.length;o++)e.number[s.data[o].PRODUCT_ID]=0;e.loadPage>1?s.data.length&&(e.goodsList=e.goodsList.concat(s.data)):e.goodsList=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1;e.$store.state.BackBottle;if(e.firstReq){e.firstReq=!1;for(var i=0;i<e.submitArr.length;i++)e.totalPrice+=e.submitArr[i].number*e.submitArr[i].DIS_PRICE;for(o=0;o<e.goodsList.length;o++)for(i=0;i<e.submitArr.length;i++)if(e.submitArr[i].PRODUCT_ID==e.goodsList[o].PRODUCT_ID){e.number[e.goodsList[o].PRODUCT_ID]=e.submitArr[i].number;break}e.totalPrice=e.totalPrice.toFixed(2)}else for(o=0;o<e.goodsList.length;o++)for(i=0;i<e.submitArr.length;i++)if(e.submitArr[i].PRODUCT_ID==e.goodsList[o].PRODUCT_ID){e.number[e.goodsList[o].PRODUCT_ID]=e.submitArr[i].number;break}})},submitClick:function(){event.stopPropagation();if(this.totalNum){if("InventoryManage"==this.whoPush&&"SALE_RETURN_IN"==this.orderType&&!this.SelectedInfoName)return void this.$alert("请选择从哪个店退货","提示",{confirmButtonText:"确定"});if("InventoryManage"==this.whoPush&&"OTHER_IN"==this.$route.query.orderType&&!this.SelectedInfoName)return void this.$alert("请选择发货方","提示",{confirmButtonText:"确定"});if("InventoryManage"==this.whoPush&&"OTHER_OUT"==this.$route.query.orderType&&!this.SelectedInfoName)return void this.$alert("请选择收货方","提示",{confirmButtonText:"确定"});if("InventoryManage"==this.whoPush&&"TRANSFER"==this.orderType)if(this.IFreceORdeliv_transition){if(!this.receORdeliv_consignor)return void this.$alert("请选择发货人","提示",{confirmButtonText:"确定"})}else if(!this.receORdeliv_consignee)return void this.$alert("请选择收货人","提示",{confirmButtonText:"确定"});var t;this.$store.state.BackBottle.g_submitArr=this.submitArr,this.$store.state.BackBottle.totalNum=this.totalNum,this.$store.state.BackBottle.ConsigneeData_selected=this.ReceiptInfo,this.$store.state.BackBottle.DeliveryAddr_selected=this.DeliveryInfo,t="CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType||"HistoryVisit"==this.whoPush&&"SALE_OUT"==this.orderType?this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?{whoPush:this.whoPush,orderType:this.orderType,visitId:this.visitId,VisitModifyData:"VisitModifyData",pageName:this.$route.query.pageName?this.$route.query.pageName:""}:{whoPush:this.whoPush,orderType:this.orderType,visitId:this.visitId}:"OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType?{whoPush:this.whoPush,orderType:this.orderType,transferOutId:this.$route.query.transferOutId}:"InventoryManage"==this.whoPush&&"TRANSFER"==this.orderType?{whoPush:this.whoPush,orderType:this.orderType,IFreceORdeliv_transition:this.IFreceORdeliv_transition}:"PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType&&this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder?{whoPush:this.whoPush,orderType:this.orderType,CombinedOrder:"CombinedOrder"}:{whoPush:this.whoPush,orderType:this.orderType},this.$router.push({name:"OrderConfirm",query:t})}else this.$alert("至少选择一种商品","提示",{confirmButtonText:"确定"})},BrandItemClick:function(t){this.HnavBrandIndex=t,this.VnavTypeIdx=0,this.VnavTypeList=this.HnavBrandList[t].TYPE,this.loadPage=1,this.allLoaded=!1,this.resquestProductList()},TypeListClick:function(t){this.VnavTypeIdx=t,this.loadPage=1,this.allLoaded=!1,this.resquestProductList()},Address:function(){this.AddressShow=!0},AddressShowHide:function(){this.AddressShow=!1},animat_cartShowIf:function(){if(!h()(".footBo_move").is(":animated")){var t=h()(".footBo_move").css("height");this.ShoppingCartDetailHide?(h()(".footBo_move").animate({marginTop:0},500),h()(".OutermostGray").fadeOut(500),this.ShoppingCartDetailHide=!1):(h()(".OutermostGray").fadeIn(500),this.ShoppingCartDetailHide=!0,h()(".footBo_move").animate({marginTop:"-"+t},500))}},cancel_entry:function(){this.isHidden=!1},ensure_entry:function(){if("NaN"==parseInt(this.inputValue).toString()||parseInt(this.inputValue)<0)this.isHidden=!1;else{var t=this.number,e=this.submitArr;if(!("OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType&&parseInt(this.inputValue)>this.goodsList[this.inputNum].KX_NUM)){var s=!1,o=this.totalNum,i=this.totalPrice;if(e.length)if("页面"==this.element){for(var a=0;a<e.length;a++)e[a].PRODUCT_ID==this.goodsList[this.inputNum].PRODUCT_ID&&(e[a].number=parseInt(this.inputValue),s=!0);if(s||0==this.inputValue||(e[e.length]=this.goodsList[this.inputNum],e[e.length-1].number=parseInt(this.inputValue)),o=parseInt(this.totalNum)-t[this.goodsList[this.inputNum].PRODUCT_ID]+parseInt(this.inputValue),i=parseFloat(this.totalPrice)+(parseInt(this.inputValue)-t[this.goodsList[this.inputNum].PRODUCT_ID])*this.goodsList[this.inputNum].DIS_PRICE,t[this.goodsList[this.inputNum].PRODUCT_ID]=parseInt(this.inputValue),0==this.inputValue)for(var n=0;n<e.length;n++)e[n].PRODUCT_ID==this.goodsList[this.inputNum].PRODUCT_ID&&e.splice(n,1)}else"购物车"==this.element&&(o=parseInt(this.totalNum)-e[this.inputNum].number+parseInt(this.inputValue),i=parseFloat(this.totalPrice)+(parseInt(this.inputValue)-parseInt(e[this.inputNum].number))*e[this.inputNum].DIS_PRICE,t[e[this.inputNum].PRODUCT_ID]=parseInt(this.inputValue),e[this.inputNum].number=parseInt(this.inputValue),0==this.inputValue&&e.splice(this.inputNum,1));else 0!=this.inputValue&&(e[0]=this.goodsList[this.inputNum],e[0].number=parseInt(this.inputValue),i=(o=parseInt(this.inputValue))*this.goodsList[this.inputNum].DIS_PRICE,t[this.goodsList[this.inputNum].PRODUCT_ID]=parseInt(this.inputValue));this.isHidden=!1,this.number=t,this.submitArr=e,this.totalNum=o,this.totalPrice=i.toFixed(2)}}},entryShow:function(t,e){event.stopPropagation();this.clearNum(),"页面"==t.currentTarget.dataset.element?this.element="页面":"购物车"==t.currentTarget.dataset.element&&(this.element="购物车"),this.isHidden=!0,this.inputNum=t.currentTarget.id,this.$nextTick(function(){0!=e&&h()("#autofocus_input").val(e),h()("#autofocus_input").focus(),h()("#autofocus_input").select()})},clearNum:function(){this.inputValue=""},jian:function(t){event.stopPropagation();if(this.number[this.goodsList[t.currentTarget.id].PRODUCT_ID]>0){var e=this.number;e[this.goodsList[t.currentTarget.id].PRODUCT_ID]=e[this.goodsList[t.currentTarget.id].PRODUCT_ID]-1;for(var s=parseFloat(this.totalPrice)-parseFloat(this.goodsList[t.currentTarget.id].DIS_PRICE),o=this.submitArr,i=0;i<o.length;i++)o[i].PRODUCT_ID==this.goodsList[t.currentTarget.id].PRODUCT_ID&&(o[i].number=e[this.goodsList[t.currentTarget.id].PRODUCT_ID],0==e[this.goodsList[t.currentTarget.id].PRODUCT_ID]&&o.splice(i,1));this.number=e,this.totalNum=this.totalNum-1,this.totalPrice=s.toFixed(2),this.submitArr=o}},jia:function(t){event.stopPropagation();var e=this.number;if(!("OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType&&e[this.goodsList[t.currentTarget.id].PRODUCT_ID]+1>parseInt(this.goodsList[t.currentTarget.id].KX_NUM))){e[this.goodsList[t.currentTarget.id].PRODUCT_ID]=parseFloat(e[this.goodsList[t.currentTarget.id].PRODUCT_ID])+1;var s=parseFloat(this.totalPrice)+parseFloat(this.goodsList[t.currentTarget.id].DIS_PRICE),o=this.submitArr,i=!1;if(0==o.length)o[0]=this.goodsList[t.currentTarget.id],o[0].number=1;else{for(var a=0;a<o.length;a++)o[a].PRODUCT_ID==this.goodsList[t.currentTarget.id].PRODUCT_ID&&(i=!0,o[a].number=e[this.goodsList[t.currentTarget.id].PRODUCT_ID]);i||(o[o.length]=this.goodsList[t.currentTarget.id],o[o.length-1].number=1)}this.number=e,this.submitArr=o,this.totalNum=this.totalNum+1,this.totalPrice=s.toFixed(2)}},jian2:function(t){event.stopPropagation();var e=this.submitArr,s=this.number;e[t.currentTarget.id].number--;for(var o=parseFloat(this.totalPrice)-parseFloat(this.submitArr[t.currentTarget.id].DIS_PRICE),i=0;i<this.goodsList.length;i++)this.goodsList[i].PRODUCT_ID==e[t.currentTarget.id].PRODUCT_ID&&s[this.goodsList[i].PRODUCT_ID]--;0==e[t.currentTarget.id].number&&(e.splice(t.currentTarget.id,1),this.$nextTick(function(){var t=h()(".footBo_move").css("height");h()(".footBo_move").animate({marginTop:"-"+t},300)})),this.number=s,this.totalNum=this.totalNum-1,this.totalPrice=o.toFixed(2),this.submitArr=e},jia2:function(t){event.stopPropagation();var e=this.submitArr,s=this.number;if(!("OutboundDetail"==this.whoPush&&"SALE_RETURN_IN_PART"==this.orderType&&e[t.currentTarget.id].number+1>e[t.currentTarget.id].KX_NUM)){e[t.currentTarget.id].number++;for(var o=parseFloat(this.totalPrice)+parseFloat(this.submitArr[t.currentTarget.id].DIS_PRICE),i=0;i<this.goodsList.length;i++)this.goodsList[i].PRODUCT_ID==e[t.currentTarget.id].PRODUCT_ID&&s[this.goodsList[i].PRODUCT_ID]++;this.submitArr=e,this.number=s,this.totalNum=this.totalNum+1,this.totalPrice=o.toFixed(2)}},showPromotionInfo:function(t){"none"==h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide").css("display")?(h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionShow .icon-xiangxiaxialakuang").css("transform","rotate(0deg)"),h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide").stop().show(500)):(h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionShow .icon-xiangxiaxialakuang").css("transform","rotate(-90deg)"),h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide").stop().hide(500))},promotionInstruction:function(t,e){event.stopPropagation(),"none"==h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide>div:eq("+e+") .promotionDeHide").css("display")?(h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide>div:eq("+e+") .PI-nav-d .icon-xiangxiaxialakuang").css("transform","rotate(0deg)"),h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide>div:eq("+e+") .promotionDeHide").stop().show(500)):(h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide>div:eq("+e+") .PI-nav-d .icon-xiangxiaxialakuang").css("transform","rotate(-90deg)"),h()(".selectGoodsList:eq("+t+") .promotionInfo .promotionHide>div:eq("+e+") .promotionDeHide").stop().hide(500))},SelectReceiveMengHide:function(){this.IFSelectReceiveMeng=!1},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.resquestProductList("BottomLoad"))}}},te={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ChooseGoods"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:"WX"!=t.$store.state.G_AppOrWX,IfTextShow:t.IfTextShow,TextContent:t.TextContent},on:{f_Fanhui:t.f_Fanhui,f_Text:t.f_Text}}),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有商品可选,请联系管理员")])]):t._e(),t._v(" "),t.noDataShow?t._e():s("div",{staticClass:"container"},[s("div",{staticClass:"fixedTop"},[s("div",{staticClass:"HorizontalNav"},t._l(t.HnavBrandList,function(e,o){return s("div",{key:o,staticClass:"BrandItem",class:{Hnav_active:t.HnavBrandIndex==o},attrs:{id:o},on:{click:function(e){return t.BrandItemClick(o)}}},[t._v(t._s(e.PRODUCT_BRAND)+"\n        ")])}),0),t._v(" "),t.isShowSelectStore?s("div",{staticClass:"selectStore"},[s("div",{on:{click:t.toSelectStores}},[t._v(t._s(t.returnOrtransrerText)+"："+t._s(t.SelectedInfoName))])]):t._e(),t._v(" "),t.isShowSelectReceiveAndDeliver?s("div",{staticClass:"selectReceiveAndDeliver"},[s("div",{staticClass:"select_Receive",on:{click:function(e){return t.toSelectSalesMan("Receive")}}},[s("div",[s("span",[t._v("收货方：")]),t._v(" "),s("span",[t._v(t._s(t.receORdeliv_consignee))]),t._v(" "),t.IFreceORdeliv_transition?t._e():s("i",{staticClass:"iconfont icon-xiangyou"})])]),t._v(" "),s("div",{staticClass:"select_transition",on:{click:t.receORdeliv_transition}},[s("i",{staticClass:"iconfont icon-jiaohuan"})]),t._v(" "),s("div",{staticClass:"select_Deliver",on:{click:function(e){return t.toSelectSalesMan("Deliver")}}},[s("div",[s("span",[t._v("发货方：")]),t._v(" "),s("span",[t._v(t._s(t.receORdeliv_consignor))]),t._v(" "),t.IFreceORdeliv_transition?s("i",{staticClass:"iconfont icon-xiangyou"}):t._e()])])]):t._e(),t._v(" "),s("div",{staticClass:"OtherNav"},[s("div",{staticClass:"CSearch"},[s("div",[s("i",{staticClass:"iconfont icon-sousuo"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按产品名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"otherInfoBtn"},[s("div",{on:{click:t.Address}},[t._v("收货/发货")])])])]),t._v(" "),s("div",{staticClass:"LowerBody"},[s("div",{staticClass:"VerticalNav"},[t._l(t.VnavTypeList,function(e,o){return s("div",{key:o,class:{Vnav_active:t.VnavTypeIdx==o},attrs:{id:o},on:{click:function(e){return t.TypeListClick(o)}}},[t._v(t._s(e.PRODUCT_TYPE))])}),t._v(" "),s("span",{staticClass:"navKong"})],2),t._v(" "),s("div",{staticClass:"GoodsDisplay"},[s("mt-loadmore",{ref:"loadmore",attrs:{bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.goodsList,function(e,o){return s("div",{key:o,staticClass:"selectGoodsList",attrs:{id:o},on:{click:function(e){return t.showPromotionInfo(o)}}},[s("div",{staticClass:"selectGoodsListItem"},[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listCenter"},[s("div",{staticClass:"goodsNumame"},[s("span",[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),s("div",{staticClass:"specifications"},[s("span",[t._v("规格：")]),s("span",[t._v(t._s(e.PRODUCT_DESC))])]),t._v(" "),s("div",{staticClass:"specifications"},[s("span",[t._v("单位：")]),s("span",[t._v(t._s(e.UNIT_OF_MEASURE_STR))])]),t._v(" "),s("div",{staticClass:"moneyGroup"},[s("div",[s("span",[t._v("¥"+t._s(e.DIS_PRICE))]),t._v(" "),"InventoryManage"==t.whoPush&&"TRANSFER"==t.orderType?s("div",{staticClass:"InventoryQtyClass"},[t._v("库存 : "+t._s(e.DB_NUM))]):t._e(),t._v(" "),"SALE_OUT"==t.orderType?s("div",{staticClass:"InventoryQtyClass"},[t._v("库存 : "+t._s(e.KC_NUM))]):t._e()]),t._v(" "),s("div",{staticClass:"listLast"},[s("i",{staticClass:"iconfont icon-Untitled-",attrs:{id:o},on:{click:t.jian}}),t._v(" "),s("span",{attrs:{id:o,"data-element":"页面"},on:{click:function(s){return t.entryShow(s,t.number[e.PRODUCT_ID])}}},[t._v(t._s(t.number[e.PRODUCT_ID]))]),t._v(" "),s("i",{staticClass:"iconfont icon-jia1",attrs:{id:o},on:{click:t.jia}})])])])]),t._v(" "),e.CPCL.length?s("div",{staticClass:"promotionInfo"},[s("div",{staticClass:"promotionShow"},[s("i",{staticClass:"iconfont icon-xiangxiaxialakuang"}),s("span",[t._v("促销信息")])]),t._v(" "),s("div",{staticClass:"promotionHide"},t._l(e.CPCL,function(e,i){return s("div",{key:i,attrs:{id:i},on:{click:function(e){return t.promotionInstruction(o,i)}}},[s("div",[s("div",{staticClass:"PI-icon-d"},[s("i",{staticClass:"iconfont icon-cuxiao"})]),t._v(" "),s("div",{staticClass:"PI-name-d"},[s("span",[t._v(t._s(e.name))]),t._v(" "),e.detail.length?s("span",{staticClass:"promotionDeShow",staticStyle:{color:"#666"}},[t._v("（需满足以下条件）")]):t._e()]),t._v(" "),e.detail.length?s("div",{staticClass:"PI-nav-d"},[s("i",{staticClass:"iconfont icon-xiangxiaxialakuang"})]):t._e()]),t._v(" "),s("div",{staticClass:"promotionDeHide"},[s("div",{staticClass:"promotionInstru"},t._l(e.detail,function(e,o){return s("div",{key:o,attrs:{id:o}},[s("span",[t._v(t._s(e.product_name))]),t._v(" "),s("span",[t._v("   "+t._s(e.num))]),s("span",[t._v(t._s(e.unitStr))])])}),0)])])}),0)]):t._e()])}),0)],1)])]),t._v(" "),t.AddressShow?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"AddressConfirm"},[s("div",{staticClass:"AddressConfirmHead"},[s("span",[t._v("收货/发货")]),t._v(" "),s("i",{staticClass:"iconfont icon-guanbi",on:{click:t.AddressShowHide}})]),t._v(" "),s("div",{staticClass:"Info"},[t.ReceiptInfo.CUSTOMER_NAME||t.ReceiptInfo.CONTACT_NAME||t.ReceiptInfo.CONTACT_TEL||t.ReceiptInfo.CUSTOMER_ADDRESS?s("div",{staticClass:"ReceiveInfo"},[s("div",[s("span",[t._v("收  货  方：")]),s("span",[t._v(t._s(t.ReceiptInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("收货人名：")]),s("span",[t._v(t._s(t.ReceiptInfo.CONTACT_NAME))]),s("span",[t._v("    "+t._s(t.ReceiptInfo.CONTACT_TEL)+"   "),t.ReceiptInfo.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.ReceiptInfo.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("收货地址：")]),s("span",[t._v(t._s(t.ReceiptInfo.CUSTOMER_ADDRESS))])]),t._v(" "),s("span")]):t._e(),t._v(" "),t.DeliveryInfo.CUSTOMER_NAME||t.DeliveryInfo.CONTACT_NAME||t.DeliveryInfo.CUSTOMER_TEL||t.DeliveryInfo.CUSTOMER_ADDRESS?s("div",{staticClass:"DeliveryInfo"},[s("div",[s("span",[t._v("发  货  方：")]),s("span",[t._v(t._s(t.DeliveryInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("发货人名：")]),s("span",[t._v(t._s(t.DeliveryInfo.CONTACT_NAME))]),t._v("    "),s("span",[t._v(t._s(t.DeliveryInfo.CUSTOMER_TEL)+"   "),t.DeliveryInfo.CUSTOMER_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.DeliveryInfo.CUSTOMER_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("发货地址：")]),s("span",[t._v(t._s(t.DeliveryInfo.CUSTOMER_ADDRESS))])]),t._v(" "),s("span")]):t._e()])])]):t._e(),t._v(" "),t.IFSelectReceiveMeng?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"IFSelectReceiveMeng"},[s("div",[t._v(t._s(t.ReceiveORDeliverHeaderName))]),t._v(" "),s("div",[t._v(t._s(t.ReceiveORDeliverName))]),t._v(" "),s("i",{staticClass:"iconfont icon-guanbi",on:{click:t.SelectReceiveMengHide}})])]):t._e(),t._v(" "),s("div",{staticClass:"foot_cart"},[s("div",{staticClass:"foot_top",on:{click:t.animat_cartShowIf}},[s("div",{staticClass:"totalNum"},[t._m(0),t._v(" "),s("div",[s("div",[t._v("¥ "+t._s(t.totalPrice))]),t._v(" "),s("div",[t._v("总数："+t._s(t.totalNum))])])]),t._v(" "),s("div",{staticClass:"submit",on:{click:t.submitClick}},[t._v("提交")])]),t._v(" "),s("div",{staticClass:"foot_bottom"},[s("div",{staticClass:"OutermostGray",on:{click:t.animat_cartShowIf}}),t._v(" "),s("div",{staticClass:"footBo_move"},[s("div",{staticClass:"footBottom_head"},[t._v("已选商品详情：")]),t._v(" "),s("div",{staticClass:"footBottom_fixedBox"},t._l(t.submitArr,function(e,o){return s("div",{key:o,staticClass:"cartGoodsList",attrs:{id:o}},[s("div",{staticClass:"cartListLeft"},[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",{staticClass:"listLast"},[s("i",{staticClass:"iconfont icon-Untitled-",attrs:{id:o},on:{click:t.jian2}}),t._v(" "),s("span",{attrs:{id:o,"data-element":"购物车"},on:{click:function(s){return t.entryShow(s,e.number)}}},[t._v(t._s(e.number))]),t._v(" "),s("i",{staticClass:"iconfont icon-jia1",attrs:{id:o},on:{click:t.jia2}})])])}),0)])])]),t._v(" "),t.isHidden?s("div",{staticClass:"entryNumber"},[s("div",{staticClass:"entry_contaniner"},[s("div",{staticClass:"entry_contaniner_header"},[t._v("请输入产品数量")]),t._v(" "),s("div",{staticClass:"clearNum"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],ref:"autofocus_input",attrs:{id:"autofocus_input",bindinput:"goodsNum",type:"number"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),t.inputValue?s("i",{staticClass:"iconfont icon-guanbi",on:{click:t.clearNum}}):t._e()]),t._v(" "),s("div",{staticClass:"entryBtn"},[s("div",{staticClass:"en_cancel",on:{click:t.cancel_entry}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"en_ensure",on:{click:t.ensure_entry}},[t._v("确定")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-shoppingCart-full"})])}]};var ee=s("VU/8")(Zt,te,!1,function(t){s("IexR")},"data-v-36870bbd",null).exports,se={data:function(){return{headerText:"订单确认",submitArr:[],giftInfo_IfShow:!0,SpecifyGift:[],OptionsAvailableGift:[],OptionsGiftChosenCart:[],MJ_hidden:!1,REMARK_VALUE:"",isHidden:!1,inputValue:"",inputNum:0,totalNum:0,totalPrice:0,totalPayment:0,sumMjPrice_cru:0,ifTips:!1,tips_Msg:"",whoPush:"",orderType:"",storeId:0,visitId:0,pickerOptions:{shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"明天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:"后天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+1728e5),t.$emit("pick",e)}}]},REQUEST_DELIVERY:"",PAY_TYPE:""}},components:{componentHeader:_},mounted:function(){window.history.pushState(null,null,document.URL),window.addEventListener("popstate",this.onBrowserBack,!1)},destroyed:function(){window.removeEventListener("popstate",this.onBrowserBack,!1)},created:function(){var t=this,e=this.$store.state.BackBottle;this.ReceiptInfo=e.ConsigneeData_selected,this.DeliveryInfo=e.DeliveryAddr_selected,this.submitArr=e.g_submitArr,this.REQUEST_DELIVERY=this.$store.state.ORDER_REQUEST_DELIVERY,this.REMARK_VALUE=this.$store.state.ORDER_REMARK_VALUE,this.$store.state.OptionsGiftChosenCart&&(this.OptionsGiftChosenCart=t.$store.state.OptionsGiftChosenCart),console.log(this.submitArr),this.totalNum=e.totalNum,this.$route.query.whoPush&&(this.whoPush=this.$route.query.whoPush),this.$route.query.orderType&&(this.orderType=this.$route.query.orderType),this.$route.query.visitId&&(this.visitId=this.$route.query.visitId);for(var s=0;s<t.submitArr.length;s++){var o=t.submitArr[s];t.totalPrice+=parseFloat(o.UNIT_PRICE)*o.number}if(this.totalPrice=this.totalPrice.toFixed(2),"PurchaseOrder"==t.whoPush&&"PURCHASE_IN"==t.orderType||"SalesOrder"==t.whoPush&&"SALE_OUT"==t.orderType||"CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType||"HistoryVisit"==this.whoPush&&"SALE_OUT"==this.orderType){for(var i=[],a=0,n=0;n<t.submitArr.length;n++)i[n]={UNIT_PRICE:t.submitArr[n].UNIT_PRICE,DIS_PRICE:t.submitArr[n].DIS_PRICE,PRODUCT_ID:t.submitArr[n].PRODUCT_ID,PO_QTY:t.submitArr[n].number,PO_UNIT:t.submitArr[n].UNIT_OF_MEASURE,PO_UNIT_STR:t.submitArr[n].UNIT_OF_MEASURE_STR,FL_PRICE:t.submitArr[n].FL_PRICE};"SalesOrder"==t.whoPush&&"SALE_OUT"==t.orderType&&(a=t.ReceiptInfo.CUSTOMER_ID),"PurchaseOrder"==t.whoPush&&"PURCHASE_IN"==t.orderType&&(a=t.ReceiptInfo.CUSTOMER_ID),("CheckInventory"==t.whoPush&&"SALE_OUT"==t.orderType||"HistoryVisit"==t.whoPush&&"SALE_OUT"==t.orderType)&&(a=t.ReceiptInfo.CUSTOMER_ID);var r={businessId:t.$store.state.businessInfo.businessId,consigneeId:a,OrderDetails:i};"PurchaseOrder"==t.whoPush&&"PURCHASE_IN"==t.orderType&&t.$route.query.CombinedOrder&&"CombinedOrder"==t.$route.query.CombinedOrder&&(r.outOrderIds=t.$store.state.SumMergeOrderList),console.log(r),t.httpRequest("simulatedOrder.do",r,function(e){t.$store.state.OptionsAvailableGift.length||(t.submitArr=e.data.detail),t.SpecifyGift=e.data.GIVE,t.OptionsAvailableGift=e.data.STRAGY,t.PAY_TYPE=e.data.PAY_TYPE,t.totalNum=0;for(var s=0;s<t.submitArr.length;s++)t.totalNum+=parseInt(t.submitArr[s].poQty);for(var o=0;o<e.data.GIVE.length;o++)t.totalNum+=parseInt(e.data.GIVE[o].giveNum);for(var i=0;i<t.OptionsGiftChosenCart.length;i++)t.totalNum+=parseInt(t.OptionsGiftChosenCart[i].number);t.CalculateTotalPrice()})}else t.giftInfo_IfShow=!1},methods:{onBrowserBack:function(){this.f_Fanhui()},f_Fanhui:function(){this.$store.state.OptionsGiftChosenCart=[],this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftNumberList={},this.$store.state.ORDER_REQUEST_DELIVERY="",this.$store.state.ORDER_REMARK_VALUE="","OutboundDetail"!=this.whoPush||"SALE_RETURN_IN_PART"!=this.orderType?"InventoryManage"!=this.whoPush||"TRANSFER"!=this.orderType?"HistoryVisit"!=this.whoPush||"SALE_OUT"!=this.orderType?"PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType&&this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder?this.$router.push({name:"ChooseGoods",query:{whoPush:this.whoPush,orderType:this.orderType,CombinedOrder:"CombinedOrder"}}):"CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType&&this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?this.$router.go(-1):this.$router.push({name:"ChooseGoods",query:{whoPush:this.whoPush,orderType:this.orderType}}):this.$router.push({name:"ChooseGoods",query:{whoPush:this.whoPush,orderType:this.orderType,orderConfirmattached:"orderConfirm"}}):this.$router.push({name:"ChooseGoods",query:{whoPush:this.whoPush,orderType:this.orderType,IFreceORdeliv_transition:this.$route.query.IFreceORdeliv_transition}}):this.$router.push({name:"ChooseGoods",query:{whoPush:this.whoPush,orderType:this.orderType,transferOutId:this.$route.query.transferOutId}})},orderSubmit:function(){var t=this,e=this.submitArr,s=[];if("InventoryManage"==this.whoPush&&"OTHER_OUT"==this.orderType||"InventoryManage"==this.whoPush&&"SALE_RETURN_IN"==this.orderType||"InventoryManage"==this.whoPush&&"TRANSFER"==this.orderType||"OutboundDetail"==t.whoPush&&"SALE_RETURN_IN_PART"==t.orderType){for(var o=0;o<e.length;o++)s[o]={productId:""+e[o].PRODUCT_ID,pirchaseQuantity:e[o].number,unitPrice:e[o].UNIT_PRICE,payment:e[o].UNIT_PRICE,amount:e[o].number*e[o].UNIT_PRICE?e[o].number*e[o].UNIT_PRICE:0,unit:e[o].UNIT_OF_MEASURE};var i=0,a=0;t.DeliveryInfo.CUSTOMER_ID&&(i=t.DeliveryInfo.CUSTOMER_ID),t.ReceiptInfo.CUSTOMER_ID&&(a=t.ReceiptInfo.CUSTOMER_ID);var n=0;"InventoryManage"==t.whoPush&&"TRANSFER"==t.orderType&&(n=t.$store.state.userInfo.user_id,t.$route.query.IFreceORdeliv_transition?(n=i,i=0):(n=a,a=0));var r="";"OutboundDetail"==t.whoPush&&"SALE_RETURN_IN_PART"==t.orderType&&(r=t.$route.query.transferOutId);var d={appUsersId:t.$store.state.userInfo.user_id,usersId:n,businessId:t.$store.state.businessInfo.businessId,consignorId:i,consigneeId:a,transferOutType:t.orderType,pirchaseQuantity:t.totalNum,amount:t.totalPrice?t.totalPrice:0,TransferOutDetails:s,visitId:v,transferOutId:r,remark:t.REMARK_VALUE};this.httpRequest("saveTransferOut.do",d,function(e){t.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[],isShowSelectStore:!1},t.$store.state.OptionsAvailableGift=[],t.$store.state.OptionsGiftChosenCart=[],t.$store.state.OptionsGiftNumberList={},t.$store.state.ORDER_REQUEST_DELIVERY="",t.$store.state.ORDER_REMARK_VALUE="",t.ifTips=!0,t.tips_Msg="操作成功","OutboundDetail"!=t.whoPush||"SALE_RETURN_IN_PART"!=t.orderType?setTimeout(function(){t.$router.push({name:t.whoPush})},2e3):setTimeout(function(){t.$router.push({name:t.whoPush,query:{whoPush:"orderConfirm",transferOutId:t.$route.query.transferOutId}})},2e3)})}else if(("SalesOrder"==this.whoPush&&"SALE_OUT"==this.orderType||"CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType||"HistoryVisit"==this.whoPush&&"SALE_OUT"==this.orderType)&&"OSP"!=this.$store.state.visitObject){for(var c=[],u=0;u<e.length;u++)"TJCL"==e[u].promotionStrategy?(p=e[u].priceInit,c[c.length]=e[u].strategyDetailId):p=e[u].DIS_PRICE,s[u]={productId:e[u].PRODUCT_ID+"",pirchaseQuantity:e[u].number,unit:e[u].UNIT_OF_MEASURE,unitPrice:e[u].UNIT_PRICE,payment:p,PRODUCT_TYPE:e[u].PRODUCT_TYPE};for(var l=0;l<t.SpecifyGift.length;l++)c[c.length]=t.SpecifyGift[l].strategyDetailId,s[s.length]={productId:t.SpecifyGift[l].PRODUCT_ID+"",pirchaseQuantity:t.SpecifyGift[l].giveNum,unit:t.SpecifyGift[l].UNIT_OF_MEASURE,unitPrice:t.SpecifyGift[l].UNIT_PRICE,payment:0,PRODUCT_TYPE:t.SpecifyGift[l].PRODUCT_TYPE,bottlePrice:t.SpecifyGift[l].bottlePrice,bottleId:t.SpecifyGift[l].bottleId,GIFT_TYPE:t.SpecifyGift[l].GIFT_TYPE};for(var h=0;h<t.OptionsGiftChosenCart.length;h++)c[c.length]=t.OptionsGiftChosenCart[h].strategyDetailId,s[s.length]={productId:t.OptionsGiftChosenCart[h].PRODUCT_ID+"",pirchaseQuantity:t.OptionsGiftChosenCart[h].number,unit:t.OptionsGiftChosenCart[h].UNIT_OF_MEASURE,unitPrice:t.OptionsGiftChosenCart[h].UNIT_PRICE,payment:0,PRODUCT_TYPE:t.OptionsGiftChosenCart[h].PRODUCT_TYPE,bottlePrice:t.OptionsGiftChosenCart[h].bottlePrice,bottleId:t.OptionsGiftChosenCart[h].bottleId,GIFT_TYPE:t.OptionsGiftChosenCart[h].GIFT_TYPE};i=0,a=0;t.DeliveryInfo.CUSTOMER_ID&&(i=t.DeliveryInfo.CUSTOMER_ID),t.ReceiptInfo.CUSTOMER_ID&&(a=t.ReceiptInfo.CUSTOMER_ID);var v=0;("CheckInventory"==t.whoPush&&"SALE_OUT"==t.orderType||"HistoryVisit"==t.whoPush&&"SALE_OUT"==t.orderType)&&(v=t.visitId),console.log(s);var _="WX"==t.$store.state.G_AppOrWX?"STORE_PURCHASE":t.orderType;d={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,consignorId:i,consigneeId:a,transferOutType:_,pirchaseQuantity:t.totalNum,REQUESTED_DELIVERY_DTE:t.REQUEST_DELIVERY?t.REQUEST_DELIVERY+" 00:00:00":"",STRATEGY_ID:c,payPrice:t.totalPayment,mjPrice:t.sumMjPrice_cru,TransferOutDetails:s,visitId:v,remark:t.REMARK_VALUE};console.log(d),this.httpRequest("saveSellOut.do",d,function(e){t.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[],isShowSelectStore:!1},t.$store.state.OptionsAvailableGift=[],t.$store.state.OptionsGiftChosenCart=[],t.$store.state.OptionsGiftNumberList={},t.$store.state.ORDER_REQUEST_DELIVERY="",t.$store.state.ORDER_REMARK_VALUE="",t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){"CheckInventory"==t.whoPush&&"SALE_OUT"==t.orderType||"HistoryVisit"==t.whoPush&&"SALE_OUT"==t.orderType?t.$route.query.VisitModifyData&&"VisitModifyData"==t.$route.query.VisitModifyData?t.$router.go(-2):t.$router.push({name:"VividDisplay",query:{visit_whoPush:"OrderConfirm"}}):t.$router.push({name:"QuerySalesOrder"})},2e3)})}else if("PURCHASE_IN"==this.orderType||"OSP"==this.$store.state.visitObject){var p;for(c=[],u=0;u<e.length;u++)"TJCL"==e[u].promotionStrategy?(p=e[u].priceInit,c[c.length]=e[u].strategyDetailId):p=e[u].DIS_PRICE,s[u]={productId:e[u].PRODUCT_ID+"",pirchaseQuantity:e[u].number,unit:e[u].UNIT_OF_MEASURE,unitPrice:e[u].UNIT_PRICE,payment:p,PRODUCT_TYPE:e[u].PRODUCT_TYPE,FL_PRICE:e[u].FL_PRICE};for(l=0;l<t.SpecifyGift.length;l++)c[c.length]=t.SpecifyGift[l].strategyDetailId,s[s.length]={productId:t.SpecifyGift[l].PRODUCT_ID+"",pirchaseQuantity:t.SpecifyGift[l].giveNum,unit:t.SpecifyGift[l].UNIT_OF_MEASURE,unitPrice:t.SpecifyGift[l].UNIT_PRICE,payment:0,PRODUCT_TYPE:t.SpecifyGift[l].PRODUCT_TYPE,bottlePrice:t.SpecifyGift[l].bottlePrice,bottleId:t.SpecifyGift[l].bottleId,GIFT_TYPE:t.SpecifyGift[l].GIFT_TYPE};for(h=0;h<t.OptionsGiftChosenCart.length;h++)c[c.length]=t.OptionsGiftChosenCart[h].strategyDetailId,s[s.length]={productId:t.OptionsGiftChosenCart[h].PRODUCT_ID+"",pirchaseQuantity:t.OptionsGiftChosenCart[h].number,unit:t.OptionsGiftChosenCart[h].UNIT_OF_MEASURE,unitPrice:t.OptionsGiftChosenCart[h].UNIT_PRICE,payment:0,PRODUCT_TYPE:t.OptionsGiftChosenCart[h].PRODUCT_TYPE,bottlePrice:t.OptionsGiftChosenCart[h].bottlePrice,bottleId:t.OptionsGiftChosenCart[h].bottleId,GIFT_TYPE:t.OptionsGiftChosenCart[h].GIFT_TYPE};d={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,orgnizationId:t.ReceiptInfo.CUSTOMER_ID,REQUEST_DELIVERY:t.REQUEST_DELIVERY?t.REQUEST_DELIVERY+" 00:00:00":"",TOTAL_QTY:t.totalNum,OrderDetails:s,CONSIGNEE_REMARK:t.REMARK_VALUE,payPrice:t.totalPayment,mjPrice:t.sumMjPrice_cru,STRATEGY_ID:c,PAYMENT_TYPE:"",outOrderIds:t.$store.state.SumMergeOrderList,visitId:t.visitId};console.log(d),this.httpRequest("savePurchaseOrders.do",d,function(e){t.ifTips=!0,t.tips_Msg="操作成功",t.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[],isShowSelectStore:!1},t.$store.state.OptionsAvailableGift=[],t.$store.state.OptionsGiftChosenCart=[],t.$store.state.OptionsGiftNumberList={},t.$store.state.ORDER_REQUEST_DELIVERY="",t.$store.state.ORDER_REMARK_VALUE="",setTimeout(function(){"PurchaseOrder"==t.whoPush&&t.$route.query.CombinedOrder&&"CombinedOrder"==t.$route.query.CombinedOrder?t.$router.push({name:"QuerySalesOrder"}):"OSP"!=t.$store.state.visitObject?t.$router.push({name:"QueryPurchaseOrder"}):t.$router.push({name:"VividDisplay",query:{visit_whoPush:"OrderConfirm"}})},2e3)})}else if("InventoryManage"==this.whoPush&&"OTHER_IN"==this.orderType){for(o=0;o<e.length;o++)s[o]={productId:""+e[o].PRODUCT_ID,pirchaseQuantity:e[o].number,transferOutQuantity:e[o].number,unitPrice:e[o].UNIT_PRICE,amount:e[o].number*e[o].UNIT_PRICE?e[o].number*e[o].UNIT_PRICE:0};i=0;t.DeliveryInfo.CUSTOMER_ID&&(i=t.DeliveryInfo.CUSTOMER_ID);d={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,orgnizationId:t.ReceiptInfo.CUSTOMER_ID,consignorId:i,transferType:"OTHER_IN",pirchaseQuantity:t.totalNum,transferOutQuantity:t.totalNum,amount:t.totalPrice?t.totalPrice:0,TransferReceiptDetails:s,remark:t.REMARK_VALUE};console.log(d),this.httpRequest("saveTransferReceipt.do",d,function(e){t.ifTips=!0,t.tips_Msg="操作成功",t.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[],isShowSelectStore:!1},t.$store.state.OptionsAvailableGift=[],t.$store.state.OptionsGiftChosenCart=[],t.$store.state.OptionsGiftNumberList={},t.$store.state.ORDER_REQUEST_DELIVERY="",t.$store.state.ORDER_REMARK_VALUE="",setTimeout(function(){t.$router.push({name:t.whoPush})},2e3)})}},_addGift:function(){if(this.$store.state.OptionsAvailableGift=this.OptionsAvailableGift,this.$store.state.BackBottle.g_submitArr=this.submitArr,this.$store.state.ORDER_REQUEST_DELIVERY=this.REQUEST_DELIVERY,this.$store.state.ORDER_REMARK_VALUE=this.REMARK_VALUE,console.log(this.submitArr),"HistoryVisit"!=this.whoPush||"SALE_OUT"!=this.orderType)return"CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType?this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?void this.$router.push({name:"AddFreeGift",query:{whoPush:this.whoPush,orderType:this.orderType,visitId:this.visitId,VisitModifyData:"VisitModifyData"}}):void this.$router.push({name:"AddFreeGift",query:{whoPush:this.whoPush,orderType:this.orderType,visitId:this.visitId}}):void("PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType&&this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder?this.$router.push({name:"AddFreeGift",query:{whoPush:this.whoPush,orderType:this.orderType,CombinedOrder:"CombinedOrder"}}):this.$router.push({name:"AddFreeGift",query:{whoPush:this.whoPush,orderType:this.orderType}}));this.$router.push({name:"AddFreeGift",query:{whoPush:this.whoPush,orderType:this.orderType,orderConfirmattached:"orderConfirm",visitId:this.visitId}})},jian:function(t){(parseFloat(this.submitArr[t.currentTarget.id].priceInit)-1).toFixed(2)<parseFloat(this.submitArr[t.currentTarget.id].priceMin)?this.submitArr[t.currentTarget.id].priceInit=parseFloat(this.submitArr[t.currentTarget.id].priceMin).toFixed(2):this.submitArr[t.currentTarget.id].priceInit=parseFloat(parseFloat(this.submitArr[t.currentTarget.id].priceInit)-1).toFixed(2),this.CalculateTotalPrice()},jia:function(t){parseFloat(this.submitArr[t.currentTarget.id].priceInit)+1>parseFloat(this.submitArr[t.currentTarget.id].priceMax)?this.submitArr[t.currentTarget.id].priceInit=parseFloat(this.submitArr[t.currentTarget.id].priceMax).toFixed(2):this.submitArr[t.currentTarget.id].priceInit=parseFloat(parseFloat(this.submitArr[t.currentTarget.id].priceInit)+1).toFixed(2),this.CalculateTotalPrice()},entryShow:function(t){console.log(t.currentTarget.id),this.isHidden=!0,this.inputNum=t.currentTarget.id},ensure_entry:function(){if("NaN"==parseInt(this.inputValue).toString()||parseInt(this.inputValue)<0)this.isHidden=!1;else{if(parseFloat(this.inputValue)>=parseFloat(this.submitArr[this.inputNum].priceMax))return this.submitArr[this.inputNum].priceInit=parseFloat(this.submitArr[this.inputNum].priceMax).toFixed(2),this.isHidden=!1,void this.CalculateTotalPrice();if(parseFloat(this.inputValue)<=parseFloat(this.submitArr[this.inputNum].priceMin))return this.submitArr[this.inputNum].priceInit=parseFloat(this.submitArr[this.inputNum].priceMin).toFixed(2),this.isHidden=!1,void this.CalculateTotalPrice();this.submitArr[this.inputNum].priceInit=parseFloat(this.inputValue).toFixed(2),this.isHidden=!1,this.CalculateTotalPrice()}},cancel_entry:function(){this.isHidden=!1},CalculateTotalPrice:function(){for(var t=0,e=0,s=0,o=0;o<this.submitArr.length;o++)s="TJCL"==this.submitArr[o].promotionStrategy?this.submitArr[o].priceInit:this.submitArr[o].DIS_PRICE,t+=parseFloat(s)*parseInt(this.submitArr[o].number),e+=parseFloat(this.submitArr[o].UNIT_PRICE)*parseInt(this.submitArr[o].number);for(var i=0;i<this.SpecifyGift.length;i++)if("WINE"==this.SpecifyGift[i].GIFT_TYPE){var a=this.SpecifyGift[i];t=parseFloat(t+parseFloat(a.bottlePrice)*a.giveNum).toFixed(2)}for(i=0;i<this.OptionsGiftChosenCart.length;i++)if("WINE"==this.OptionsGiftChosenCart[i].GIFT_TYPE){var n=this.OptionsGiftChosenCart[i];t=parseFloat(t+parseFloat(n.bottlePrice)*n.number).toFixed(2)}this.totalPayment=parseFloat(t).toFixed(2),this.sumMjPrice_cru=parseFloat(e-t).toFixed(2)>=0?parseFloat(e-t).toFixed(2):0},modify_price:function(t){var e=this,s=t.DIS_PRICE;this.$prompt("请输入价格","",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d+(\.\d+)?$/,inputErrorMessage:"请输入数字",inputValue:s,inputType:"number",closeOnClickModal:!1}).then(function(s){var o=s.value;t.DIS_PRICE=o,e.CalculateTotalPrice()}).catch(function(){}),this.$nextTick(function(){h()(".el-message-box__input .el-input__inner").select()})}}},oe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"OrderConfirm"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DeliveryInfo"},[s("div",{staticClass:"infoHead_"},[t._v("发货信息")]),t._v(" "),s("div",{staticClass:"infoContainer_"},[s("div",[s("span",[t._v("发货客户")]),s("span",[t._v(t._s(t.DeliveryInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("发货人名")]),s("span",[t._v(t._s(t.DeliveryInfo.CONTACT_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联系方式")]),s("span",[t._v(t._s(t.DeliveryInfo.CUSTOMER_TEL)+"   "),t.DeliveryInfo.CUSTOMER_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.DeliveryInfo.CUSTOMER_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("发货地址")]),s("span",[t._v(t._s(t.DeliveryInfo.CUSTOMER_ADDRESS))])])])]),t._v(" "),s("div",{staticClass:"ReceiveInfo"},[s("div",{staticClass:"infoHead_"},[t._v("收货信息")]),t._v(" "),s("div",{staticClass:"infoContainer_"},[s("div",[s("span",[t._v("收货客户")]),s("span",[t._v(t._s(t.ReceiptInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("收货人名")]),s("span",[t._v(t._s(t.ReceiptInfo.CONTACT_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联系方式")]),s("span",[t._v(t._s(t.ReceiptInfo.CONTACT_TEL)+"   "),t.ReceiptInfo.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.ReceiptInfo.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("收货地址")]),s("span",[t._v(t._s(t.ReceiptInfo.CUSTOMER_ADDRESS))])])])]),t._v(" "),s("div",{staticClass:"orderInfos"},[s("div",{staticClass:"infoHead_"},[t._v("订单信息")]),t._v(" "),t._l(t.submitArr,function(e,o){return s("div",{key:o,staticClass:"orderList",attrs:{id:o}},[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listRight"},[s("div",{staticClass:"PRODUCT_NAME"},[s("span",[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),s("div",{staticClass:"listRightBottom"},[s("div",{staticClass:"listRightBottomLeft"},[s("div",[s("span",[t._v("原价：")]),t._v(" "),s("span",{staticClass:"listRight_rmb"},[t._v("￥")]),t._v(" "),s("span",{staticClass:"listRight_rmbNUM"},[t._v(t._s(e.UNIT_PRICE))])]),t._v(" "),s("div",[s("span",[t._v("数量：")]),t._v(" "),s("span",{staticClass:"listRight_rmbNUM"},[t._v(t._s(e.number)+" ")]),t._v(" "),s("span",[t._v(t._s(e.UNIT_OF_MEASURE_STR))])])]),t._v(" "),s("div",{staticClass:"listRightBottomRight"},["TJCL"==e.promotionStrategy?s("div",{staticClass:"priceAdjust"},[s("span",[t._v("现价：")]),t._v(" "),s("i",{staticClass:"iconfont icon-Untitled-",attrs:{id:o},on:{click:t.jian}}),t._v(" "),s("div",{staticClass:"priceAdjust_price",attrs:{id:o},on:{click:t.entryShow}},[s("span",{staticClass:"listRight_rmb"},[t._v("￥")]),s("span",{staticClass:"listRight_rmbNUM"},[t._v(t._s(e.priceInit))])]),t._v(" "),s("i",{staticClass:"iconfont icon-jia1",attrs:{id:o},on:{click:t.jia}})]):s("div",[s("span",[t._v("现价：")]),t._v(" "),s("span",{staticClass:"listRight_rmb"},[t._v("￥")]),t._v(" "),s("span",{staticClass:"listRight_rmbNUM"},[t._v(t._s(e.DIS_PRICE))]),t._v(" "),"T"==t.$store.state.businessInfo.isEdit?s("i",{staticClass:"iconfont icon-xie",on:{click:function(s){return t.modify_price(e)}}}):t._e()])])])])])})],2),t._v(" "),t.giftInfo_IfShow?s("div",{staticClass:"GiftInfo"},[s("div",{staticClass:"infoHead_"},[t._v("赠品")]),t._v(" "),s("div",{staticClass:"GiftContainer"},[t.SpecifyGift.length?s("div",{staticClass:"SpecifyGiftList"},t._l(t.SpecifyGift,function(e,o){return s("div",{key:o,staticClass:"haveGift",attrs:{id:o}},[s("div",[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listCenter"},[s("div",{staticClass:"PRODUCT_NAME"},[s("span",[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),e.PRODUCT_DESC?s("div",[s("span",[t._v("规格：")]),s("span",[t._v(t._s(e.PRODUCT_DESC))])]):t._e()]),t._v(" "),s("div",{staticClass:"gift_right"},[t._v("\n                "+t._s(e.giveNum)+" "+t._s(e.UNIT_OF_MEASURE_STR)+"\n              ")])]),t._v(" "),"WINE"==e.GIFT_TYPE?s("div",{staticClass:"bottleFee"},[s("div",[s("div",[s("span",[t._v(t._s(e.bottleName))])]),t._v(" "),s("div",[s("span",[t._v("单价：")]),s("span",[t._v("¥ "+t._s(e.bottlePrice))]),t._v("    "),s("span",[t._v("总价：")]),s("span",[t._v("¥ "+t._s(parseFloat(parseFloat(e.giveNum)*parseFloat(e.bottlePrice)).toFixed(2)))])])])]):t._e()])}),0):t._e(),t._v(" "),t.OptionsGiftChosenCart.length?s("div",{staticClass:"OptionsGiftList"},t._l(t.OptionsGiftChosenCart,function(e,o){return s("div",{key:o,staticClass:"haveGift",attrs:{id:o}},[s("div",[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listCenter"},[s("div",{staticClass:"PRODUCT_NAME"},[s("span",[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),e.PRODUCT_DESC?s("div",[s("span",[t._v("规格：")]),s("span",[t._v(t._s(e.PRODUCT_DESC))])]):t._e()]),t._v(" "),s("div",{staticClass:"gift_right"},[t._v("\n                "+t._s(e.number)+" "+t._s(e.UNIT_OF_MEASURE_STR)+"\n              ")])]),t._v(" "),"WINE"==e.GIFT_TYPE?s("div",{staticClass:"bottleFee"},[s("div",[s("div",[s("span",[t._v(t._s(e.bottleName))])]),t._v(" "),s("div",[s("span",[t._v("单价：")]),s("span",[t._v("¥ "+t._s(e.bottlePrice))]),t._v("    "),s("span",[t._v("总价：")]),s("span",[t._v("¥ "+t._s(parseFloat(parseFloat(e.number)*parseFloat(e.bottlePrice)).toFixed(2)))])])])]):t._e()])}),0):t._e()]),t._v(" "),s("div",{staticClass:"noneGift"},[t.SpecifyGift.length||t.OptionsAvailableGift.length?t._e():s("span",[t._v("无赠品")]),t._v(" "),t.OptionsAvailableGift.length?s("div",{staticClass:"addGift"},[s("span",{on:{click:t._addGift}},[t._v(t._s(t.OptionsGiftChosenCart.length?"重新添加":"添加赠品"))])]):t._e()])]):t._e(),t._v(" "),s("div",{staticClass:"total"},[s("div",{staticClass:"infoHead_"},[t._v("总计")]),t._v(" "),s("div",{staticClass:"infoContainer_"},[s("div",[s("span",[t._v("总数")]),s("span",[t._v(t._s(t.totalNum))])]),t._v(" "),t.sumMjPrice_cru>0?s("div",[s("span",[t._v("已优惠")]),s("span",[t._v("¥"+t._s(t.sumMjPrice_cru))])]):t._e(),t._v(" "),t.giftInfo_IfShow?s("div",[s("span",[t._v("付款")]),s("span",[t._v("¥"+t._s(t.totalPayment))])]):t._e(),t._v(" "),t.giftInfo_IfShow?s("div",{staticClass:"pay_typeInfo"},[s("span",[t._v("付款方式")]),s("span",[t._v(t._s(t.PAY_TYPE)+"\n        ")])]):t._e(),t._v(" "),t.MJ_hidden?s("div",[s("div",[t._v("促销策略")]),s("div",[t._v(t._s(t.MJ_REMARK))])]):t._e(),t._v(" "),t.MJ_hidden?s("div",[s("div",[t._v("满减总计")]),s("div",[t._v(t._s(t.MJ_PRICE))])]):t._e()])]),t._v(" "),t.giftInfo_IfShow?s("div",{staticClass:"arrDate"},[s("div",{staticClass:"infoHead_"},[t._v("选择送货时间")]),t._v(" "),s("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期时间",align:"right","picker-options":t.pickerOptions,format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.REQUEST_DELIVERY,callback:function(e){t.REQUEST_DELIVERY=e},expression:"REQUEST_DELIVERY"}})],1):t._e(),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.REMARK_VALUE,expression:"REMARK_VALUE"}],staticClass:"Remark",attrs:{placeholder:"请输入备注信息",maxlength:"-1"},domProps:{value:t.REMARK_VALUE},on:{input:function(e){e.target.composing||(t.REMARK_VALUE=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{staticClass:"onlyBtn",on:{click:t.orderSubmit}},[t._v("确认")])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),t.isHidden?s("div",{staticClass:"entryNumber"},[s("div",{staticClass:"entryContaniner"},[s("div",{staticClass:"entry_contaniner_header"},[t._v("请输入产品价格")]),t._v(" "),s("div",[t._v("可调整价格上限："),s("span",[t._v(t._s(t.submitArr[t.inputNum].priceMax))])]),t._v(" "),s("div",[t._v("可调整价格下限："),s("span",[t._v(t._s(t.submitArr[t.inputNum].priceMin))])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{type:"number"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),s("div",{staticClass:"entryBtn"},[s("div",{staticClass:"en_cancel",on:{click:t.cancel_entry}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"en_ensure",on:{click:t.ensure_entry}},[t._v("确定")])])])]):t._e()],1)},staticRenderFns:[]};var ie=s("VU/8")(se,oe,!1,function(t){s("hr20")},"data-v-ca1b75d2",null).exports,ae={data:function(){return{headerText:"添加赠品",GiftList:[],currentStrategyIdx:0,number:{},isHidden:!1,footCartListData:[],totalNum:0,inputValue:"",inputValue_old:"",inputNum:0,SumChoosableNum:0,SumHasChosenNum:0,whoPush:"",orderType:"",visitId:0}},components:{componentHeader:_},created:function(){this.$route.query.whoPush&&(this.whoPush=this.$route.query.whoPush),this.$route.query.orderType&&(this.orderType=this.$route.query.orderType),this.$route.query.visitId&&(this.visitId=this.$route.query.visitId),this.GiftList=this.$store.state.OptionsAvailableGift,this.$store.state.OptionsGiftChosenCart.length&&(this.footCartListData=JSON.parse(n()(this.$store.state.OptionsGiftChosenCart)));for(var t=0;t<this.GiftList.length;t++){this.number[this.GiftList[t].strategyOrderId]={},this.GiftList[t].HasChosenNum=0,this.SumHasChosenNum=0,this.SumChoosableNum+=this.GiftList[t].afterGiftNum;for(var e=0;e<this.GiftList[t].gift.length;e++)this.GiftList[t].gift[e].number=0,this.number[this.GiftList[t].strategyOrderId][this.GiftList[t].gift[e].PRODUCT_ID]=0}if(this.footCartListData.length)for(var s in this.$store.state.OptionsGiftNumberList&&(this.number=JSON.parse(n()(this.$store.state.OptionsGiftNumberList))),this.number){for(var o=0;o<this.GiftList.length;o++)if(s==this.GiftList[o].strategyOrderId){for(var i in this.number[s]){this.GiftList[o].HasChosenNum+=this.number[s][i];for(var a=0;a<this.GiftList[o].gift.length;a++)i==this.GiftList[o].gift[a].PRODUCT_ID&&(this.GiftList[o].gift[a].number=this.number[s][i])}break}for(var r in this.number[s])this.SumHasChosenNum+=this.number[s][r]}},methods:{f_Fanhui:function(){"PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType&&this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder?this.$router.push({name:"OrderConfirm",query:{whoPush:this.whoPush,orderType:this.orderType,CombinedOrder:"CombinedOrder"}}):"CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType&&this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?this.$router.go(-1):this.$router.push({name:"OrderConfirm",query:{whoPush:this.whoPush,orderType:this.orderType,visitId:this.visitId}})},selectClass:function(t){this.currentStrategyIdx=t.currentTarget.id},submit:function(){event.stopPropagation(),this.$store.state.OptionsGiftChosenCart=JSON.parse(n()(this.footCartListData)),this.$store.state.OptionsGiftNumberList=JSON.parse(n()(this.number)),"PurchaseOrder"==this.whoPush&&"PURCHASE_IN"==this.orderType&&this.$route.query.CombinedOrder&&"CombinedOrder"==this.$route.query.CombinedOrder?this.$router.push({name:"OrderConfirm",query:{whoPush:this.whoPush,orderType:this.orderType,CombinedOrder:"CombinedOrder"}}):"CheckInventory"==this.whoPush&&"SALE_OUT"==this.orderType&&this.$route.query.VisitModifyData&&"VisitModifyData"==this.$route.query.VisitModifyData?this.$router.go(-1):this.$router.push({name:"OrderConfirm",query:{whoPush:this.whoPush,orderType:this.orderType,visitId:this.visitId}})},jian:function(t){event.stopPropagation();var e=this.GiftList[this.currentStrategyIdx];if(this.number[e.strategyOrderId][e.gift[t.currentTarget.id].PRODUCT_ID]>0){this.number[e.strategyOrderId][e.gift[t.currentTarget.id].PRODUCT_ID]--,e.HasChosenNum--,this.SumHasChosenNum--;for(var s=0;s<this.footCartListData.length;s++)this.footCartListData[s].PRODUCT_ID==this.GiftList[this.currentStrategyIdx].gift[t.currentTarget.id].PRODUCT_ID&&(this.footCartListData[s].number--,this.footCartListData[s].number<=0&&this.footCartListData.splice(s,1))}},jia:function(t){event.stopPropagation();var e=this.GiftList[this.currentStrategyIdx];if(parseInt(e.afterGiftNum)-parseInt(e.HasChosenNum)<=0)this.$alert("超出当前赠品可选数额","提示",{confirmButtonText:"确定"});else{this.number[e.strategyOrderId][e.gift[t.currentTarget.id].PRODUCT_ID]++,e.HasChosenNum++,this.SumHasChosenNum++;this.footCartListData;var s=!1;if(0==this.footCartListData.length)this.footCartListData[0]=e.gift[t.currentTarget.id],this.footCartListData[0].number=1;else{for(var o=0;o<this.footCartListData.length;o++)this.footCartListData[o].PRODUCT_ID==this.GiftList[this.currentStrategyIdx].gift[t.currentTarget.id].PRODUCT_ID&&(s=!0,this.footCartListData[o].number++);s||(this.footCartListData[this.footCartListData.length]=this.GiftList[this.currentStrategyIdx].gift[t.currentTarget.id],this.footCartListData[this.footCartListData.length-1].number=1)}}},animat_cartShowIf:function(){if(!h()(".footBo_move").is(":animated")){var t=h()(".footBo_move").css("height");this.ShoppingCartDetailHide?(h()(".footBo_move").animate({marginTop:0},500),h()(".OutermostGray").fadeOut(500),this.ShoppingCartDetailHide=!1):(h()(".OutermostGray").fadeIn(500),this.ShoppingCartDetailHide=!0,h()(".footBo_move").animate({marginTop:"-"+t},500))}},cancel_entry:function(){this.isHidden=!1},ensure_entry:function(){if(event.stopPropagation(),"NaN"==parseInt(this.inputValue).toString()||parseInt(this.inputValue)<0)this.isHidden=!1;else{var t=this.GiftList[this.currentStrategyIdx];if(parseInt(this.inputValue)>parseInt(t.afterGiftNum))this.$alert("输入的数量不可大于剩余数量","提示",{confirmButtonText:"确定"});else{var e=this.footCartListData,s=!1;if(e.length){for(var o=0;o<e.length;o++)e[o].PRODUCT_ID==t.gift[this.inputNum].PRODUCT_ID&&(e[o].number=e[o].number+parseInt(this.inputValue)-this.inputValue_old,s=!0);if(s||0==this.inputValue||(e[e.length]=t.gift[this.inputNum],e[e.length-1].number=parseInt(this.inputValue)),this.SumHasChosenNum=parseInt(this.SumHasChosenNum)-this.number[t.strategyOrderId][t.gift[this.inputNum].PRODUCT_ID]+parseInt(this.inputValue),t.HasChosenNum=parseInt(t.HasChosenNum)-this.number[t.strategyOrderId][t.gift[this.inputNum].PRODUCT_ID]+parseInt(this.inputValue),this.number[t.strategyOrderId][t.gift[this.inputNum].PRODUCT_ID]=parseInt(this.inputValue),0==this.inputValue)for(var i=0;i<e.length;i++)e[i].PRODUCT_ID==t.gift[this.inputNum].PRODUCT_ID&&e.splice(i,1)}else 0!=this.inputValue&&(e[0]=t.gift[this.inputNum],e[0].number=parseInt(this.inputValue),this.SumHasChosenNum=parseInt(this.inputValue),t.HasChosenNum=parseInt(this.inputValue),this.number[t.strategyOrderId][t.gift[this.inputNum].PRODUCT_ID]=parseInt(this.inputValue));this.isHidden=!1,this.footCartListData=e}}},entryShow:function(t,e){event.stopPropagation();var s=this;this.clearNum(),this.isHidden=!0,this.inputNum=t.currentTarget.id,s.$nextTick(function(){s.inputValue_old=e,0!=e&&h()("#autofocus_input").val(e),h()("#autofocus_input").focus(),h()("#autofocus_input").select()})},clearNum:function(){this.inputValue=""}}},ne={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AddFreeGift"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"calssType"},[s("div",{staticClass:"goodsHead"},[t._v("选择策略：")]),t._v(" "),t._l(t.GiftList,function(e,o){return s("div",{key:o,staticClass:"classList",attrs:{id:o},on:{click:t.selectClass}},[s("i",{staticClass:"iconfont",class:{"icon-xuanzhong":t.currentStrategyIdx==o,"icon-weixuanzhong":t.currentStrategyIdx!=o}}),t._v(" "),s("span",[t._v(t._s(e.strategyName))]),t._v(" "),s("div",[t._v("已选："),s("span",[t._v(t._s(e.HasChosenNum))])]),t._v(" "),s("div",[t._v("剩余："),s("span",[t._v(t._s(parseInt(e.afterGiftNum)-parseInt(e.HasChosenNum)))])])])})],2),t._v(" "),t.GiftList[t.currentStrategyIdx].afterGiftNum>0?s("div",{staticClass:"gift"},[s("div",{staticClass:"goodsHead"},[t._v("产品：")]),t._v(" "),t._l(t.GiftList[t.currentStrategyIdx].gift,function(e,o){return s("div",{key:o,staticClass:"selectGoodsList",attrs:{id:o}},[s("div",{staticClass:"selectGoodsListItem"},[s("div",{staticClass:"LeftIcon"},[s("img",{attrs:{src:e.PRODUCT_PIC?e.PRODUCT_PIC:"static/img/Order/goods.png",alt:""}})]),t._v(" "),s("div",{staticClass:"listCenter"},[s("div",{staticClass:"goodsNumame"},[s("span",[t._v(t._s(e.PRODUCT_NAME))])]),t._v(" "),e.PRODUCT_DESC?s("div",{staticClass:"specifications"},[s("span",[t._v("规格：")]),t._v(" "),s("span",[t._v(t._s(e.PRODUCT_DESC))])]):t._e(),t._v(" "),e.UNIT_OF_MEASURE_STR?s("div",{staticClass:"specifications"},[s("span",[t._v("单位：")]),t._v(" "),s("span",[t._v(t._s(e.UNIT_OF_MEASURE_STR))])]):t._e()]),t._v(" "),s("div",{staticClass:"listLast"},[s("i",{staticClass:"iconfont icon-Untitled-",attrs:{id:o},on:{click:t.jian}}),t._v(" "),s("span",{attrs:{id:o},on:{click:function(s){return t.entryShow(s,t.number[t.GiftList[t.currentStrategyIdx].strategyOrderId][e.PRODUCT_ID])}}},[t._v(t._s(t.number[t.GiftList[t.currentStrategyIdx].strategyOrderId][e.PRODUCT_ID]))]),t._v(" "),s("i",{staticClass:"iconfont icon-jia1",attrs:{id:o},on:{click:t.jia}})])]),t._v(" "),"WINE"==e.GIFT_TYPE?s("div",{staticClass:"bottleFee"},[s("div",[s("div",[s("span",[t._v(t._s(e.bottleName))])]),t._v(" "),s("div",[s("span",[t._v("单价：")]),s("span",[t._v("¥ "+t._s(e.bottlePrice))]),t._v("    "),s("span",[t._v("总价：")]),s("span",[t._v("¥ "+t._s(parseFloat(parseFloat(e.bottlePrice)*t.number[t.GiftList[t.currentStrategyIdx].strategyOrderId][e.PRODUCT_ID]).toFixed(2)))])])])]):t._e()])})],2):s("div",{staticClass:"noOptionalQty"},[t._v(t._s(t.GiftList[t.currentStrategyIdx].strategyName)+"没有可选数量，请联系管理员")])]),t._v(" "),s("div",{staticClass:"foot_cart"},[s("div",{staticClass:"foot_top",on:{click:t.animat_cartShowIf}},[s("div",{staticClass:"totalNum"},[t._m(0),t._v(" "),s("div",[t._v("已选："+t._s(t.SumHasChosenNum))]),t._v(" "),s("div",[t._v("剩余："+t._s(parseInt(t.SumChoosableNum)-parseInt(t.SumHasChosenNum)))])]),t._v(" "),s("div",{staticClass:"submit",on:{click:t.submit}},[t._v("提交")])]),t._v(" "),s("div",{staticClass:"foot_bottom"},[s("div",{staticClass:"OutermostGray",on:{click:t.animat_cartShowIf}}),t._v(" "),s("div",{staticClass:"footBo_move"},[s("div",{staticClass:"footBottom_head"},[t._v("已选商品详情：")]),t._v(" "),s("div",{staticClass:"footBottom_fixedBox"},t._l(t.footCartListData,function(e,o){return s("div",{key:o,staticClass:"cartGoodsList",attrs:{id:o}},[s("div",{staticClass:"cartListLeft"},[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",{staticClass:"listLast"},[s("span",[t._v(t._s(e.number))])])])}),0)])])]),t._v(" "),t.isHidden?s("div",{staticClass:"entryNumber"},[s("div",{staticClass:"entry_contaniner"},[s("div",{staticClass:"entry_contaniner_header"},[t._v("请输入产品数量")]),t._v(" "),s("div",{staticClass:"clearNum"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],attrs:{id:"autofocus_input",type:"number"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t._v(" "),t.inputValue?s("i",{staticClass:"iconfont icon-guanbi",on:{click:t.clearNum}}):t._e()]),t._v(" "),s("div",{staticClass:"entryBtn"},[s("div",{staticClass:"en_cancel",on:{click:t.cancel_entry}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"en_ensure",on:{click:t.ensure_entry}},[t._v("确定")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-shoppingCart-full"})])}]};var re=s("VU/8")(ae,ne,!1,function(t){s("HhZ1")},"data-v-e1188a54",null).exports,de={data:function(){return{}},props:{ReportList:{type:Array,default:function(){return[]}}},components:{},created:function(){},methods:{toDetails:function(t){this.$router.push({name:"CustomerSalesDetailReport",query:{customerId:this.ReportList[t].customerId,customerName:this.ReportList[t].CUSTOMER_NAME,startDate:this.ReportList[0].startDate,endDate:this.ReportList[0].endDate}})},drawQty:function(t,e){setTimeout(function(){h()(".progressQty").eq(t).css("width",e+"%")},30)},drawMoney:function(t,e){setTimeout(function(){h()(".progressMoney").eq(t).css("width",e+"%"),h()(".colorQty").css("background-color","#DB7171"),h()(".progressQty").css("background-color","#DB7171"),h()(".colorMoney").css("background-color","#5899C3"),h()(".progressMoney").css("background-color","#5899C3"),h()(".moneyCostomerName").css("visibility","hidden")},30)}}},ce={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"componentReportBar"},[s("div",{staticClass:"reportContainer"},t._l(t.ReportList,function(e,o){return s("div",{key:o,staticClass:"reportItem",attrs:{id:o},on:{click:function(e){return t.toDetails(o)}}},[s("div",{staticClass:"lineOne"},[s("span",[t._v(t._s(e.CUSTOMER_NAME))]),t._v(" "),s("span",[t._v(t._s(e.qty)+" "),s("span",[t._v("("+t._s(e.progressQty)+"%)")])])]),t._v(" "),s("div",{staticClass:"lineTwo"},[s("div",{staticClass:"progressQty"},[t._v(t._s(t.drawQty(o,e.progressQty)))])]),t._v(" "),s("div",{staticClass:"lineThreePrompt"},[s("span",{staticClass:"moneyCostomerName"},[t._v(t._s(e.CUSTOMER_NAME))]),t._v(" "),s("span",[t._v(t._s(e.money)+" "),s("span",[t._v("("+t._s(e.progressMoney)+"%)")])])]),t._v(" "),s("div",{staticClass:"lineThree"},[s("div",{staticClass:"progressMoney"},[t._v(t._s(t.drawMoney(o,e.progressMoney)))])])])}),0)])},staticRenderFns:[]};var ue=s("VU/8")(de,ce,!1,function(t){s("lsM6")},"data-v-f448d1b6",null).exports,le={data:function(){return{headerText:"客户拜访",SupplierName:"",suppliersId:"",VisitRouteName:"",VisitRouteId:"",VisitStateName:"",SelectBoxFlag:!1,BouncedName:"",searchValue:"",cruuentSeleText:"",StatisticsShow:!1,CurrentDate:"",CustomerListData:[],SelectBoxList:[],supplierList:[],VisitLineList:[],noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,TargetVisits:"",TodayVisits:"",VisitsRate:"",MonthTargetVisits:"",MonthVisits:"",progressMonth:"",VisitsRateMonth:""}},components:{componentHeader:_,componentSelectBox:m,componentReportBar:ue},created:function(){var t=this,e="findSuppliers.do";"OSP"==this.$store.state.visitObject&&(e="findClassA.do");var s=t.$store.state.VisitStateList;t.$store.state.VisitConditionUserHabits.VisitState?this.VisitStateName=t.$store.state.VisitConditionUserHabits.VisitState:this.VisitStateName=s[0].name;var o={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId};this.httpRequest(e,o,function(e){if(e.data.length){var s=t.$store.state.CustomerVisit_supplierListIdx;t.supplierList=e.data,t.SupplierName=e.data[s].name,t.suppliersId=e.data[s].suppliersId,t.getVisitLine()}else t.$alert("未获取到供应商，请联系管理员","提示",{confirmButtonText:"确定"})})},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqStoreInfo()}},methods:{f_Fanhui:function(){this.$store.state.VisitConditionUserHabits={VisitLine:"",VisitState:""},this.$router.push({name:"Index"})},toRecomRoute:function(){this.$store.state.VisitConditionUserHabits.VisitLine=this.VisitRouteName,this.$store.state.VisitConditionUserHabits.VisitState=this.VisitStateName,this.$router.push({name:"RecomRoute",query:{suppliersId:this.suppliersId,VisitRouteId:this.VisitRouteId}})},drawLine:function(t){setTimeout(function(){var e=(100*t).toFixed(1);e>100&&(e=100),h()(".progressMonth").css("width",e+"%")},30)},getVisitLine:function(){var t=this,e={suppliersId:t.suppliersId};t.httpRequest("GetVisitLine.do",e,function(e){if(e.data.length){if(t.VisitLineList=e.data,t.$store.state.VisitConditionUserHabits.VisitLine)t.VisitRouteName=t.$store.state.VisitConditionUserHabits.VisitLine;else{t.Date=new Date;var s=t.Date.getDay();t.VisitRouteName="星期"+"天一二三四五六".charAt(s)}for(var o=0;o<e.data.length;o++)t.VisitRouteName==e.data[o].name&&(t.VisitRouteId=e.data[o].visitId);t.reqStoreInfo()}else t.$alert("未获取到拜访线路，请联系管理员","提示",{confirmButtonText:"确定"})})},reqStoreInfo:function(t){var e=this,s=this.$store.state.VisitStateList,o={suppliersId:e.suppliersId,cellphone:e.$store.state.userInfo.cellphone,userId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,strLineId:e.VisitRouteId,strStoreName:e.searchValue,strStoreState:e.VisitStateName,currentPage:e.loadPage,numberPerPage:e.numberPerPage},i="findStores.do";"OSP"==this.$store.state.visitObject&&(i="findClassB.do"),e.httpRequest(i,o,function(o){t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded());for(var i=0;i<o.data.length;i++)for(var a=0;a<s.length;a++)o.data[i].visitState==s[a].name&&(o.data[i].color=s[a].color);e.loadPage>1?o.data.length&&(e.CustomerListData=e.CustomerListData.concat(o.data)):e.CustomerListData=o.data,o.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.CustomerListData.length?e.noDataShow=!1:e.noDataShow=!0})},f_Chakan:function(){var t=this;this.CurrentDate||(this.CurrentDate=this.getNowTime("getDate"));var e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,orgnizationId:t.suppliersId};this.httpRequest("visitCountReport.do",e,function(e){console.log(e.data),e.data?(t.TargetVisits=e.data.targetSum,t.TodayVisits=e.data.visitSum,t.MonthTargetVisits=e.data.targetSumMonth,t.MonthVisits=e.data.visitSumMonth,0==e.data.targetSum||0==e.data.targetSumMonth?(t.VisitsRate="100%",t.progressMonth=1):(t.VisitsRate=(t.TodayVisits/t.TargetVisits*100).toFixed(1)+"%",t.progressMonth=t.MonthVisits/t.MonthTargetVisits,t.VisitsRateMonth=(100*t.progressMonth).toFixed(1)+"%"),t.StatisticsShow=!0):t.$alert("未获取到数据，请联系管理员","提示",{confirmButtonText:"确定"})})},StatisticsHide:function(){this.StatisticsShow=!1},selectBoxShow:function(t){this.BouncedName=t,this.SelectBoxFlag=!0,"供货商"==t?(this.SelectBoxList=this.supplierList,this.cruuentSeleText="供货商"):"拜访线路"==t?(this.SelectBoxList=this.VisitLineList,this.cruuentSeleText="拜访线路"):"拜访状态"==t&&(this.SelectBoxList=this.$store.state.VisitStateList,this.cruuentSeleText="拜访状态")},selectedItem:function(t){"供货商"==this.cruuentSeleText?(this.SupplierName=this.supplierList[t].name,this.suppliersId=this.supplierList[t].suppliersId,this.loadPage=1,this.allLoaded=!1,this.$store.state.CustomerVisit_supplierListIdx=t,this.getVisitLine()):"拜访线路"==this.cruuentSeleText?(this.VisitRouteName=this.VisitLineList[t].name,this.VisitRouteId=this.VisitLineList[t].visitId,this.loadPage=1,this.allLoaded=!1,this.reqStoreInfo()):"拜访状态"==this.cruuentSeleText&&(this.VisitStateName=this.$store.state.VisitStateList[t].name,this.loadPage=1,this.allLoaded=!1,this.reqStoreInfo()),this.SelectBoxFlag=!1},selectCancel:function(){this.SelectBoxFlag=!1},toCreateNewVisit:function(t){var e=this;if(this.$store.state.CurrentStoresId=this.CustomerListData[t].storesId,this.$store.state.VisitConditionUserHabits.VisitLine=this.VisitRouteName,this.$store.state.VisitConditionUserHabits.VisitState=this.VisitStateName,"拜访中"==e.CustomerListData[t].visitState){var s={storesId:this.$store.state.CurrentStoresId,startTime:"",endTime:"",currentPage:1,numberPerPage:1};e.httpRequest("GetVisitHistory.do",s,function(t){var s=t.data[0];"拜访中"==s.VISIT_STATES?(e.$store.state.CurrentVisitId=s.PRATY_VISIT_ID,"进店"==s.VISIT_STEPS?e.$router.push({name:"CreateNewVisit"}):"确认信息"==s.VISIT_STEPS?e.$router.push({name:"CheckInventory"}):"检查库存"==s.VISIT_STEPS?e.$router.push({name:"ChooseGoods",query:{CurrentStoresId:e.$store.state.CurrentStoresId,visitId:e.$store.state.CurrentVisitId,whoPush:"HistoryVisit",orderType:"SALE_OUT"}}):"建议订单"==s.VISIT_STEPS?e.$router.push({name:"VividDisplay"}):"生动化陈列"==s.VISIT_STEPS?e.$router.push({name:"LeaveStore"}):e.$router.push({name:"LeaveStore",query:{pageName:"查看拜访"}})):e.$alert('请进入"历史拜访"完成上次任务',"提示",{confirmButtonText:"确定"})})}else e.$router.push({name:"IntoTheShop",query:{LineId:e.VisitRouteId}})},toHistoryVisit:function(t){event.stopPropagation();var e=this.CustomerListData[t];this.$store.state.CurrentStoresId=e.storesId,this.$store.state.CurrentStoresHistoryInfo={storesName:e.storesName,lastvisitTime:e.lastvisitTime,visitCount:e.visitCount},this.$store.state.VisitConditionUserHabits.VisitLine=this.VisitRouteName,this.$store.state.VisitConditionUserHabits.VisitState=this.VisitStateName,this.$router.push({name:"HistoryVisit"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqStoreInfo("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqStoreInfo("BottomLoad"))}}},he={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerVisit"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfChakanShow:!0},on:{f_Fanhui:t.f_Fanhui,f_Chakan:t.f_Chakan}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"FixedHead"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按客户名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"selectCondition"},[s("div",{on:{click:function(e){return t.selectBoxShow("供货商")}}},[s("span",[t._v("供货商名称：")]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"}),t._v(" "),s("span",[t._v(t._s(t.SupplierName))])]),t._v(" "),s("div",{on:{click:function(e){return t.selectBoxShow("拜访线路")}}},[s("span",[t._v("拜访线路：")]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"}),t._v(" "),s("span",[t._v(t._s(t.VisitRouteName))])]),t._v(" "),s("div",{on:{click:function(e){return t.selectBoxShow("拜访状态")}}},[s("span",[t._v("拜访状态：")]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"}),t._v(" "),s("span",[t._v(t._s(t.VisitStateName))])])])]),t._v(" "),s("div",{staticClass:"CustomerList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.CustomerListData,function(e,o){return s("div",{key:o,staticClass:"CustomerItem",attrs:{id:o},on:{click:function(e){return t.toCreateNewVisit(o)}}},[s("div",{staticClass:"firmName"},[s("span",[t._v(t._s(e.storesName))]),t._v(" "),s("span",{staticClass:"vi_status",style:{backgroundColor:e.color}},[t._v(t._s(e.visitState))])]),t._v(" "),s("div",{staticClass:"firmAddr"},[s("span",[t._v(t._s(e.address1))])]),t._v(" "),e.lastvisitTime?s("div",[s("span",[t._v("上次拜访时间：")]),s("span",[t._v(t._s(e.lastvisitTime))])]):t._e(),t._v(" "),s("div",{staticClass:"HaveBeenVisit"},[s("div",[t._v("已拜访"+t._s(e.visitCount)+"次")]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xie"}),t._v(" "),s("span",[t._v("拜访")])]),t._v(" "),s("div",{on:{click:function(e){return t.toHistoryVisit(o)}}},[s("i",{staticClass:"iconfont icon-chakan"}),t._v(" "),s("span",[t._v("历史拜访")])])])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()]),t._v(" "),t.StatisticsShow?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"CustomerVisitStatistics"},[s("div",{staticClass:"StatisticsHead"},[t._m(0),t._v(" "),s("div",[s("span",[t._v(t._s(t.CurrentDate))])])]),t._v(" "),s("div",[s("div",[s("div",[t._v(t._s(t.TargetVisits))]),t._v(" "),s("div",[t._v("目标拜访量")])]),t._v(" "),s("div",[s("div",[t._v(t._s(t.TodayVisits))]),t._v(" "),s("div",[t._v("今日拜访量")])]),t._v(" "),s("div",[s("div",[t._v(t._s(t.VisitsRate))]),t._v(" "),s("div",[t._v("今日达成率")])])]),t._v(" "),s("div",[s("div",{staticClass:"monthVisit"},[t._v("月已拜访  "),s("span",[t._v(t._s(t.MonthVisits)+" ")]),t._v("/"),s("span",[t._v(t._s(t.MonthTargetVisits))]),t._v(" "),s("span",[t._v(t._s(t.VisitsRateMonth))])]),t._v(" "),s("div",{staticClass:"progressBorder"},[s("div",{staticClass:"progressMonth"},[t._v(t._s(t.drawLine(this.progressMonth)))])])]),t._v(" "),s("p",[s("span",{on:{click:t.StatisticsHide}},[t._v("关闭")])])])]):t._e(),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.SelectBoxList,BouncedName:t.BouncedName},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e(),t._v(" "),t.noDataShow?t._e():s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.toRecomRoute}},[t._v("推荐线路")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("客户拜访统计")])])}]};var ve=s("VU/8")(le,he,!1,function(t){s("LJ/V")},"data-v-66ea39ca",null).exports,_e={data:function(){return{headerText:"推荐线路",lngLats:[],lineArr:[],map_g:"",suppliersId:"",VisitRouteId:"",CustomerListData:[],myInterval:"",myInterval_onComplete:"",myInterval_onError:"",geoShopList:[],geoTotalQty:0,geoOkQty:0,ifTips:!1,tips_Msg:""}},components:{componentHeader:_},destroyed:function(){clearInterval(this.myInterval),clearInterval(this.myInterval_onComplete),clearInterval(this.myInterval_onError)},mounted:function(){var t=this,e=new AMap.Map("container",{resizeEnable:!0});t.map_g=e,AMap.plugin("AMap.Geolocation",function(){var s=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoom:5});e.addControl(s),s.getCurrentPosition(function(s,o){"complete"==s?(t.onComplete(o),e.zoom=5):t.onError(o)})}),t.$route.query.suppliersId&&(t.suppliersId=t.$route.query.suppliersId),t.$route.query.VisitRouteId&&(t.VisitRouteId=t.$route.query.VisitRouteId);var s={suppliersId:t.suppliersId,cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,strLineId:t.VisitRouteId,strStoreName:"",strStoreState:"全部",currentPage:1,numberPerPage:999};t.httpRequest("findStores.do",s,function(s){t.CustomerListData=s.data,t.lngLats=[],t.geoShopList=[],t.geoTotalQty=0,t.geoOkQty=0;for(var o=0;o<t.CustomerListData.length;o++){var i=[];if(0!=t.CustomerListData[o].longitude&&""!=t.CustomerListData[o].longitude&&0!=t.CustomerListData[o].latitude&&""!=t.CustomerListData[o].latitude||(t.geoTotalQty++,t.geoShopList.push(t.CustomerListData[o])),0==t.CustomerListData[o].longitude||""==t.CustomerListData[o].longitude||0==t.CustomerListData[o].latitude||""==t.CustomerListData[o].latitude)new AMap.Geocoder({}).getLocation(t.CustomerListData[o].address1,function(e,s){"complete"===e&&"OK"===s.info?(t.geoOkQty++,i=[s.geocodes[0].location.lng,s.geocodes[0].location.lat],t.lngLats.push(i)):(log.error("根据地址查询位置失败"),t.geoOkQty++,i=[114.085947,22.547],t.lngLats.push(i))});else i=[t.CustomerListData[o].longitude,t.CustomerListData[o].latitude],t.lngLats.push(i)}0==t.geoTotalQty?t.drawMarker(e,"that.lngLats"):t.myInterval=window.setInterval(function(){if(console.log("that.geoOkQty:"+t.geoOkQty+"  that.geoTotalQty："+t.geoTotalQty),t.geoOkQty==t.geoTotalQty){if(console.log("geo完毕"),clearInterval(t.myInterval),t.geoShopList.length<=2){for(var s="",o=0;o<t.geoShopList.length;o++)s=s+t.geoShopList[o].storesName+"，";s=s.substr(0,s.length-1),t.tips_Msg=s+"未维护坐标，线路可能不准确"}else t.tips_Msg="有"+t.geoShopList.length+"个门店未维护坐标，线路可能不准确";t.ifTips=!0,setTimeout(function(){t.ifTips=!1},5e3),t.drawMarker(e,t.lngLats)}else console.log("等待geo，延迟1秒")},1e3)})},created:function(){},methods:{f_Fanhui:function(){this.$route.query.visit_whoPush&&"CreateNewVisit"==this.$route.query.visit_whoPush?this.$router.push({name:"CustomerVisit"}):this.$router.go(-1)},drawMarker:function(t,e){var s=this;s.lineArr=s.lngLats,AMapUI.loadUI(["overlay/SimpleMarker","overlay/SimpleInfoWindow"],function(e,o){for(var i=0,a=s.lngLats.length;i<a;i++){var n=new e({iconStyle:{src:"static/img/Visit/LM_visit_client.png",style:{width:"35px",height:"35px"}},offset:new AMap.Pixel(-17.5,-17.5),map:t,showPositionPoint:!0,position:s.lngLats[i],zIndex:100+i}),r=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)}),d=[];d.push("<div style='padding:7px 0px 0px 0px;'><b>"+s.CustomerListData[i].storesName+"</b></div>"),d.push("<div style='margin-top:7px;'>"+s.CustomerListData[i].CONTACT_NAME+"   "+s.CustomerListData[i].CONTACT_TEL+"</div>"),d.push("<div>"+s.CustomerListData[i].address1+"</div>"),d.push("<div id='nav' class="+i+" style='width:40px; height:30px; color:blue;'>导航</div>"),n.content=d.join(""),n.on("click",c),r.on("open",u),r.on("close",l)}function c(e){s.markerClick(r,t,e)}function u(){setTimeout(function(){var t=document.getElementById("nav");console.log(t),t&&(t.onclick=function(){var e=s.CustomerListData[t.className],o=s.lngLats[t.className];s.navOnclick(o[0],o[1],e.address1)})},200)}function l(){console.log("关闭窗体")}t.setFitView()})},navOnclick:function(t,e,s){try{CallAndroidOrIOS.callAndroid("导航",t,e,s)}catch(t){}try{CallAndroidOrIOS("导航",t,e,s)}catch(t){}},markerClick:function(t,e,s){t.setContent(s.target.content),t.open(e,s.target.getPosition())},onComplete:function(t){var e=this;console.log("获取【当前位置】成功",t),0==e.geoTotalQty?e.drawDriving(t.position.lng,t.position.lat):e.myInterval_onComplete=window.setInterval(function(){console.log("that.geoOkQty:"+e.geoOkQty+"  that.geoTotalQty："+e.geoTotalQty),e.geoOkQty==e.geoTotalQty?(console.log("onComplete geo完毕"),clearInterval(e.myInterval_onComplete),e.drawDriving(t.position.lng,t.position.lat)):console.log("onComplete等待geo，延迟1秒")},1e3)},onError:function(t){var e=this;console.log("获取【当前位置】失败",t),0==e.geoTotalQty?setTimeout(function(){e.drawDriving(102.799574,24.97502)},900):e.myInterval_onError=window.setInterval(function(){console.log("that.geoOkQty:"+e.geoOkQty+"  that.geoTotalQty："+e.geoTotalQty),e.geoOkQty==e.geoTotalQty?(console.log("onError geo完毕"),clearInterval(e.myInterval_onError),setTimeout(function(){e.drawDriving(102.799574,24.97502)},900)):console.log("onError等待geo，延迟1秒")},1e3)},drawDriving:function(t,e){var s,o=new AMap.Driving({map:this.map_g,panel:"panel",hideMarkers:!0}),i=(s=(s=[]).concat(this.lngLats)).pop();o.search(new AMap.LngLat(t,e),i,{waypoints:s},function(t,e){"complete"===t?console.log("绘制驾车路线完成"):console.log("获取驾车数据失败："+e)}),this.map_g.setFitView()},SetCurrAddress:function(t,e,s,o){this.CurrentLocation=t,this.lng=e,this.lat=s}}},pe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"RecomRoute"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container",attrs:{id:"container"}}),t._v(" "),s("div",{attrs:{id:"panel"}}),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips_text"},[s("div",{staticClass:"tips_content"},[s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()],1)},staticRenderFns:[]};var fe=s("VU/8")(_e,pe,!1,function(t){s("fS8C")},"data-v-dee4965a",null).exports,me={data:function(){return{headerText:"历史拜访",VisitHistListData:[],storesName:"",lastvisitTime:"",visitCount:0,noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_},mounted:function(){var t=parseFloat(h()(".ModifyMainHead").css("height"))+parseFloat(h()("header").css("height"));h()(".VisitList").css("paddingTop",t+"px")},created:function(){this.$store.state.CurrentStoresHistoryInfo.storesName&&(this.storesName=this.$store.state.CurrentStoresHistoryInfo.storesName),this.$store.state.CurrentStoresHistoryInfo.lastvisitTime&&(this.lastvisitTime=this.$store.state.CurrentStoresHistoryInfo.lastvisitTime),this.$store.state.CurrentStoresHistoryInfo.visitCount&&(this.visitCount=this.$store.state.CurrentStoresHistoryInfo.visitCount),this.reqVisitList()},methods:{f_Fanhui:function(){this.$route.query.orderConfirmattached&&"orderConfirm"==this.$route.query.orderConfirmattached?this.$router.push({name:"CustomerVisit"}):this.$router.go(-1)},reqVisitList:function(t){var e=this,s={storesId:this.$store.state.CurrentStoresId,startTime:"",endTime:"",currentPage:e.loadPage,numberPerPage:e.numberPerPage};console.log(s),e.httpRequest("GetVisitHistory.do",s,function(s){console.log(s),t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.VisitHistListData=e.VisitHistListData.concat(s.data)):e.VisitHistListData=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.VisitHistListData.length?e.noDataShow=!1:e.noDataShow=!0})},toLeaveStore:function(t){this.$store.state.CurrentVisitId=this.VisitHistListData[t].PRATY_VISIT_ID,this.$router.push({name:"LeaveStore",query:{pageName:"查看拜访",VISIT_STATES:this.VisitHistListData[t].VISIT_STATES,ModifyCustomerattached:this.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==this.$route.query.ModifyCustomerattached?this.$route.query.ModifyCustomerattached:""}})},ContinueVisit:function(t){event.stopPropagation();this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[],this.$store.state.CurrentVisitId=this.VisitHistListData[t].PRATY_VISIT_ID,"拜访中"==this.VisitHistListData[t].VISIT_STATES?"进店"==this.VisitHistListData[t].VISIT_STEPS?this.$router.push({name:"CreateNewVisit"}):"确认信息"==this.VisitHistListData[t].VISIT_STEPS?this.$router.push({name:"CheckInventory"}):"检查库存"==this.VisitHistListData[t].VISIT_STEPS?this.$router.push({name:"ChooseGoods",query:{CurrentStoresId:this.$store.state.CurrentStoresId,visitId:this.$store.state.CurrentVisitId,whoPush:"HistoryVisit",orderType:"SALE_OUT"}}):"建议订单"==this.VisitHistListData[t].VISIT_STEPS?this.$router.push({name:"VividDisplay"}):"生动化陈列"==this.VisitHistListData[t].VISIT_STEPS?this.$router.push({name:"LeaveStore"}):this.toLeaveStore(t):this.toLeaveStore(t)},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqVisitList("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqVisitList("BottomLoad"))}}},Ce={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"HistoryVisit"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"ModifyMainHead"},[s("div",[t._v(t._s(t.storesName))]),t._v(" "),s("div",[t.lastvisitTime?s("div",[s("span",[t._v("最后拜访时间：")]),s("span",[t._v(t._s(t.lastvisitTime))])]):t._e(),t._v(" "),s("div",[s("span",[t._v("拜访次数：")]),s("span",[t._v(t._s(t.visitCount))])])])]),t._v(" "),s("div",{staticClass:"VisitList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.VisitHistListData,function(e,o){return s("div",{key:o,staticClass:"VisitListItem",attrs:{id:o},on:{click:function(e){return t.toLeaveStore(o)}}},[s("div",[t._v(t._s(e.VISIT_DATE))]),t._v(" "),s("div",{staticClass:"visitAddress"},[s("i",{staticClass:"iconfont icon-dizhi"}),t._v(" "),s("span",[t._v(t._s(e.ACTUAL_VISITING_ADDRESS))])]),t._v(" "),t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?t._e():s("div",{staticClass:"VISIT_STATES"},[s("span",{style:{color:"已拜访"==e.VISIT_STATES?"rgb(40, 180, 95)":"rgb(228, 196, 121)"}},[t._v(t._s(e.VISIT_STATES))]),t._v(" "),"拜访中"==e.VISIT_STATES?s("div",{on:{click:function(e){return t.ContinueVisit(o)}}},[s("i",{staticClass:"iconfont icon-xie"}),s("span",[t._v("继续拜访")])]):t._e()]),t._v(" "),s("div",{staticClass:"xiangyou"},[s("i",{staticClass:"iconfont icon-xiangyou"})])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var ge=s("VU/8")(me,Ce,!1,function(t){s("BTol")},"data-v-3d8aa3c5",null).exports,Te={data:function(){return{headerText:"拜访记录"}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)}}},Ie={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"VisitRecord"},[e("componentHeader",{attrs:{headerText:this.headerText,IfFanhuiShow:!0},on:{f_Fanhui:this.f_Fanhui}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container haveHeadcontainer"},[e("div",{staticClass:"CustomerName"})])}]};var Se=s("VU/8")(Te,Ie,!1,function(t){s("0mdq")},"data-v-053642fe",null).exports,ye={data:function(){return{headerText:"确认客户信息",CurrentDate:"",storesData:{},v_remark:""}},components:{componentHeader:_},created:function(){var t=this;this.CurrentDate=this.getNowTime("getDate");var e={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:t.$store.state.CurrentStoresId};t.httpRequest("GetStoreOne.do",e,function(e){t.storesData=e.data})},methods:{f_Fanhui:function(){this.$route.query.visit_whoPush&&"IntoTheShop"==this.$route.query.visit_whoPush?this.$router.push({name:"CustomerVisit"}):this.$router.go(-1)},toModifyCustomerInfo:function(){console.log(this.storesData),this.$router.push({name:"ModifyCustomerInfo",query:{storeInfo:this.storesData}})},toIntoTheShop:function(){var t=this;this.CurrentDate=this.getNowTime("getDate");var e={cellphone:t.$store.state.userInfo.cellphone,types:"CONFIRM",visitId:t.$store.state.CurrentVisitId,remarks:t.v_remark};t.httpRequest("GetVisitPicStatus.do",e,function(e){t.$route.query.VisitModifyData&&"VisitModifyData"==t.$route.query.VisitModifyData?t.$router.go(-1):t.$router.push({name:"CheckInventory",query:{visit_whoPush:"CreateNewVisit"}})})}}},De={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CreateNewVisit"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"VisitDate"},[s("span",[t._v("拜访日期：")]),t._v(" "),s("span",[t._v(t._s(t.CurrentDate))])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("客户代码：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.CODE))])]),t._v(" "),s("div",[s("span",[t._v("客户名称：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.NAME))])]),t._v(" "),s("div",[s("span",[t._v("客户等级：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.CUSTOMER_GRADE))])]),t._v(" "),s("div",[s("span",[t._v("渠      道：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.CHANNEL))])]),t._v(" "),s("div",[s("span",[t._v("拜访线路：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.VISIT_ROUTE))])])]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("联系人名：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.CONTACT_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联系电话：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.CONTACT_TEL)+"   "),t.storesData.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.storesData.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",{staticClass:"ADDRESS1"},[s("span",[t._v("地址详情：")]),t._v(" "),s("span",[t._v(t._s(t.storesData.ADDRESS1))])])])]),t._v(" "),s("div",{staticClass:"v_remark"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.v_remark,expression:"v_remark"}],attrs:{placeholder:"请输入备注信息"},domProps:{value:t.v_remark},on:{input:function(e){e.target.composing||(t.v_remark=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.toModifyCustomerInfo}},[t._v("修改客户信息")]),t._v(" "),s("div",{on:{click:t.toIntoTheShop}},[t._v("确认")])])])],1)},staticRenderFns:[]};var Re=s("VU/8")(ye,De,!1,function(t){s("hqGP")},"data-v-5542e9ae",null).exports,Ee={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n\t地方多传\n\t地方多传\n\t地方多传\n\t地方多传\n  ")])},staticRenderFns:[]};var Le={data:function(){return{headerText:"进店",storesData:{},dialogImageUrl:"",dialogVisible:!1,uploadParams:{},CurrentLocation:"",uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,ifTips:!1,tips_Msg:"",lng:0,lat:0}},components:{componentHeader:_,componentVisitSteps:s("VU/8")({data:function(){return{}},props:{headerText:"",IfFanhuiShow:!1},methods:{Fanhui:function(){this.IfFanhuiShow&&this.$emit("f_Fanhui")}}},Ee,!1,function(t){s("2rpq")},"data-v-231ef6e7",null).exports},mounted:function(){this.TelliOSORAndroidVueOfGetCurrentLocMounted(),window.SetCurrAddress=this.SetCurrAddress,h()(".el-upload__input").attr("capture","camera")},created:function(){var t=this;t.$route.query.LineId&&(t.LineId=t.$route.query.LineId);var e={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:t.$store.state.CurrentStoresId};t.httpRequest("GetStoreOne.do",e,function(e){t.storesData=e.data}),this.uploadParams.actualVisitingAddress=encodeURIComponent(this.CurrentLocation)},methods:{f_Fanhui:function(){this.$router.go(-1)},SetCurrAddress:function(t,e,s,o){this.CurrentLocation=t,this.lng=e,this.lat=s},toCheckInventory:function(){var t=this;if(t.CurrentLocation.length)if(h()("div.uploadImg ul>li").length){var e={actualVisitingAddress:t.CurrentLocation,cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:t.$store.state.CurrentStoresId,strLicense:t.LineId,visitLevel:t.$store.state.visitObject};console.log(e),this.httpRequest("GetEnterShop.do",e,function(e){console.log(e),t.uploadParams.visitId=e.data.PRATY_VISIT_ID,t.uploadParams.userId=t.$store.state.userInfo.user_id,t.uploadParams.cellphone=t.$store.state.userInfo.cellphone,t.uploadParams.businessCode=t.$store.state.businessInfo.businessCode,t.$store.state.CurrentVisitId=e.data.PRATY_VISIT_ID,t.uploadTotalNum=h()("div.uploadImg ul>li").length,t.$refs.upload_ref.submit()})}else t.$alert("请拍摄门店照片","提示",{confirmButtonText:"确定"});else t.$alert("当前位置不能为空","提示",{confirmButtonText:"确定"})},updateBtn:function(){var t=this;t.CurrentLocation.length?this.$confirm("确定要将当前位置更新为客户地址吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:t.$store.state.CurrentStoresId,storesAdress:t.CurrentLocation,longitude:t.lng,latitude:t.lat};t.httpRequest("updateCustomerAddress.do",e,function(e){t.ifTips=!0,t.tips_Msg=e.Msg,setTimeout(function(){t.ifTips=!1},2e3);var s={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:t.$store.state.CurrentStoresId};console.log(s),t.httpRequest("GetStoreOne.do",s,function(e){console.log(e),t.storesData=e.data})})}).catch(function(){}):t.$alert("当前位置不能为空！","提示",{confirmButtonText:"确定"})},ChangeVisitStatus:function(){this.$router.push({name:"CreateNewVisit",query:{visit_whoPush:"IntoTheShop"}})},uploadSuccess:function(t,e,s){console.log(t);this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.ChangeVisitStatus():this.ChangeVisitStatus()},uploadError:function(t,e,s){console.log(t);if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.ChangeVisitStatus()},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},beforeUpload2:function(t){return new i.a(function(e,s){var o=new Image;o.src=URL.createObjectURL(t),o.onload=function(){var t=document.createElement("canvas"),s=t.getContext("2d"),i=(o.src.length,o.width),a=o.height;t.width=i,t.height=a,s.fillRect(0,0,t.width,t.height),s.drawImage(o,0,0,i,a);var n,r=t.toDataURL("image/jpeg",.1);n=r.split(",")[0].indexOf("base64")>=0?atob(r.split(",")[1]):unescape(r.split(",")[1]);for(var d=r.split(",")[0].split(":")[1].split(";")[0],c=new Uint8Array(n.length),u=0;u<n.length;u+=1)c[u]=n.charCodeAt(u);console.log(new Blob([c],{type:d}));var l=new Blob([c],{type:d});e(l)}})}}},Pe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"IntoTheShop"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"addr"},[s("span",[t._v("客户地址：")]),s("span",[t._v(t._s(t.storesData.ADDRESS1))])]),t._v(" "),s("div",{staticClass:"addr"},[s("span",[t._v("当前位置：")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.CurrentLocation,expression:"CurrentLocation"}],domProps:{value:t.CurrentLocation},on:{input:function(e){e.target.composing||(t.CurrentLocation=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"updateBtn"},[s("span",{on:{click:t.updateBtn}},[t._v("将当前位置更新为客户地址")])]),t._v(" "),s("div",{staticClass:"uploadImg"},[s("div",[t._v("请拍摄门店照片")]),t._v(" "),s("el-upload",{ref:"upload_ref",attrs:{action:t.HOST_xsy+"GetVisitEnterShop.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:2,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.toCheckInventory}},[t._v("确认")])])],1)},staticRenderFns:[]};var Oe=s("VU/8")(Le,Pe,!1,function(t){s("Xvjc")},"data-v-399742ae",null).exports,Ae={data:function(){return{headerText:"检查库存",GoodsBrand:"",goodsType:"",BrandIdx:0,TypeIdx:0,searchValue:"",SelectBoxFlagBrand:!1,SelectBoxFlagType:!1,SelectBoxListBrand:[],SelectBoxListType:[],GoodsListData:[],CheckedListData:[],remark:"",classGoodNoData:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,expireTimeOption:{disabledDate:function(t){return t.getTime()>=Date.now()}}}},components:{componentHeader:_,componentSelectBox:m},created:function(){var t=this,e={businessId:t.$store.state.businessInfo.businessId,appUsersId:t.$store.state.userInfo.user_id};console.log(e),t.httpRequest("searchProductType.do",e,function(e){console.log(e),t.SelectBoxListBrand=e.data,t.SelectBoxListBrand.length&&(t.BrandIdx=0,t.GoodsBrand=t.SelectBoxListBrand[0].PRODUCT_BRAND,t.SelectBoxListBrand[0].TYPE[0]&&(t.SelectBoxListType=t.SelectBoxListBrand[0].TYPE,t.goodsType=t.SelectBoxListBrand[0].TYPE[0].PRODUCT_TYPE,t.TypeIdx=0)),t.reqGoodList()})},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqGoodList()}},methods:{f_Fanhui:function(){this.$route.query.visit_whoPush&&"CreateNewVisit"==this.$route.query.visit_whoPush?this.$router.push({name:"CustomerVisit"}):this.$router.go(-1)},reqGoodList:function(t){var e=this,s={productName:e.searchValue,appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,productBrand:e.SelectBoxListBrand[e.BrandIdx].PRODUCT_BRAND_ID,productType:e.SelectBoxListBrand[e.BrandIdx].TYPE[e.TypeIdx].PRODUCT_TYPE_ID,currentPage:e.loadPage,numberPerPage:e.numberPerPage,consignee_id:"",userType:e.$store.state.G_AppOrWX};console.log(s),e.httpRequest("searchProductList.do",s,function(s){if(console.log(s),t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.GoodsListData=e.GoodsListData.concat(s.data)):e.GoodsListData=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.GoodsListData.length?e.classGoodNoData=!1:e.classGoodNoData=!0,e.CheckedListData.length&&e.GoodsListData.length)for(var o=0;o<e.CheckedListData.length;o++)for(var i=0;i<e.GoodsListData.length;i++)if(e.CheckedListData[o].PRODUCT_ID==e.GoodsListData[i].PRODUCT_ID){e.GoodsListData[i].value=e.CheckedListData[o].value,e.GoodsListData[i].DateInProduced=e.CheckedListData[o].DateInProduced;break}})},AddCheckedList:function(t,e){for(var s=!0,o=0;o<this.CheckedListData.length;o++)this.CheckedListData[o].PRODUCT_ID==this.GoodsListData[t].PRODUCT_ID&&("number"==e?"NaN"==parseInt(this.GoodsListData[t].value).toString()||parseInt(this.GoodsListData[t].value)<=0?this.CheckedListData.splice(o,1):this.CheckedListData[o].value=this.GoodsListData[t].value:"Date"==e&&(this.CheckedListData[o].DateInProduced=this.GoodsListData[t].DateInProduced),s=!1);if(s){if("number"==e&&("NaN"==parseInt(this.GoodsListData[t].value).toString()||parseInt(this.GoodsListData[t].value)<=0))return void(this.GoodsListData[t].value="");this.CheckedListData.unshift(this.GoodsListData[t])}},removeGoods:function(t){for(var e=0;e<this.GoodsListData.length;e++)this.GoodsListData[e].PRODUCT_ID==this.CheckedListData[t].PRODUCT_ID&&(this.GoodsListData[e].value="",this.GoodsListData[e].DateInProduced="");this.CheckedListData.splice(t,1),this.$nextTick(function(){var t=h()(".footBo_move").css("height");h()(".footBo_move").animate({marginTop:"-"+t},300)})},SelectBoxShowBrand:function(){this.SelectBoxFlagBrand=!0},SelectBoxShowType:function(){this.SelectBoxFlagType=!0},SelectComitBrand:function(t){this.GoodsBrand=this.SelectBoxListBrand[t].PRODUCT_BRAND,this.BrandIdx=t,this.SelectBoxListType=this.SelectBoxListBrand[t].TYPE,this.SelectBoxListBrand[t].TYPE[0]?(this.goodsType=this.SelectBoxListBrand[t].TYPE[0].PRODUCT_TYPE,this.TypeIdx=0):this.goodsType="",this.loadPage=1,this.allLoaded=!1,this.reqGoodList(),this.SelectBoxFlagBrand=!1},SelectComitType:function(t){this.goodsType=this.SelectBoxListBrand[this.BrandIdx].TYPE[t].PRODUCT_TYPE,this.TypeIdx=t,this.loadPage=1,this.allLoaded=!1,this.reqGoodList(),this.SelectBoxFlagType=!1},SelectCancelBrand:function(){this.SelectBoxFlagBrand=!1},SelectCancelType:function(){this.SelectBoxFlagType=!1},toSuggestOrder:function(){event.stopPropagation();var t=this,e=[];this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[];for(var s=0;s<t.CheckedListData.length;s++){if(t.CheckedListData[s].value&&!t.CheckedListData[s].DateInProduced)return void t.$alert("库存数量有值时，生产日期不能为空","提示",{confirmButtonText:"确定"});if(!t.CheckedListData[s].value&&t.CheckedListData[s].DateInProduced)return void t.$alert("生产日期有值时，库存数量不能为空","提示",{confirmButtonText:"确定"});t.CheckedListData[s].value&&(e[e.length]={productId:t.CheckedListData[s].PRODUCT_ID,productNo:t.CheckedListData[s].PRODUCT_CODE,productName:t.CheckedListData[s].PRODUCT_NAME,inventory:t.CheckedListData[s].value,productionTime:t.CheckedListData[s].DateInProduced,unit:t.CheckedListData[s].UNIT_OF_MEASURE_STR})}var o={visitId:t.$store.state.CurrentVisitId,businessId:t.$store.state.businessInfo.businessId,cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,strProduct:e,strCheckInventory:t.remark};console.log(o),t.httpRequest("GetVisitCheckInventory.do",o,function(e){console.log(e),t.$route.query.VisitModifyData&&"VisitModifyData"==t.$route.query.VisitModifyData?t.$router.go(-1):t.$router.push({name:"ChooseGoods",query:{CurrentStoresId:t.$store.state.CurrentStoresId,visitId:t.$store.state.CurrentVisitId,whoPush:"CheckInventory",orderType:"SALE_OUT"}})})},animat_cartShowIf:function(){if(!h()(".footBo_move").is(":animated")){var t=h()(".footBo_move").css("height");this.ShoppingCartDetailHide?(h()(".footBo_move").animate({marginTop:0},500),h()(".OutermostGray").fadeOut(500),this.ShoppingCartDetailHide=!1):(h()(".OutermostGray").fadeIn(500),this.ShoppingCartDetailHide=!0,h()(".footBo_move").animate({marginTop:"-"+t},500))}},clearInput_check:function(t){this.GoodsListData[t].DateInProduced="";for(var e=0;e<this.CheckedListData.length;e++)this.GoodsListData[t].PRODUCT_ID==this.CheckedListData[e].PRODUCT_ID&&(this.CheckedListData[e].DateInProduced="")},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqGoodList("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqGoodList("BottomLoad"))}}},Ne={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CheckInventory"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"ScreeningNav"},[s("div",[s("div",{staticClass:"StateSelect",on:{click:t.SelectBoxShowBrand}},[s("span",[t._v("品牌："+t._s(t.GoodsBrand))]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"StateSelect",on:{click:t.SelectBoxShowType}},[s("span",[t._v("类型："+t._s(t.goodsType))]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangxia"})])]),t._v(" "),s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按商品名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])])]),t._v(" "),s("div",{staticClass:"goodsList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.GoodsListData,function(e,o){return s("div",{key:o,staticClass:"goodsListItem",attrs:{id:o}},[s("div",{staticClass:"inv_goodsInfo"},[s("div",{staticClass:"inventoryLeft"},[s("div",{staticStyle:{"font-weight":"900"}},[t._v(t._s(e.PRODUCT_NAME))])])]),t._v(" "),s("div",{staticClass:"InventoryQty"},[s("div",{staticClass:"_inventoryQty"},[s("span",[t._v("库存数量：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"dataItem.value"}],attrs:{id:o,type:"number",pattern:"[0-9]*"},domProps:{value:e.value},on:{blur:function(e){return t.AddCheckedList(o,"number")},input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}}),t._v(" "),s("span",[t._v(t._s(e.UNIT_OF_MEASURE_STR))])]),t._v(" "),s("div",{staticClass:"_inventoryDate"},[s("span",[t._v("生产日期：")]),t._v(" "),s("el-date-picker",{attrs:{editable:!1,"clear-icon":"",type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","picker-options":t.expireTimeOption},on:{change:function(e){return t.AddCheckedList(o,"Date")}},model:{value:e.DateInProduced,callback:function(s){t.$set(e,"DateInProduced",s)},expression:"dataItem.DateInProduced"}}),t._v(" "),s("span",{staticClass:"DateInProduced"},[t._v(t._s(e.DateInProduced))]),t._v(" "),e.DateInProduced?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput_check(o)}}}):t._e()],1)])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.classGoodNoData?s("div",{staticClass:"classGoodNoData"},[t._v("未搜索到商品数据")]):t._e()]),t._v(" "),t.SelectBoxFlagBrand?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses"},[s("div",{staticClass:"SelectTitle"},[t._v("请选择品牌")]),t._v(" "),s("div",{staticClass:"SelectItem"},t._l(t.SelectBoxListBrand,function(e,o){return s("div",{key:o,attrs:{id:o},on:{click:function(e){return t.SelectComitBrand(o)}}},[t._v(t._s(e.PRODUCT_BRAND))])}),0),t._v(" "),s("div",{staticClass:"cancel",on:{click:t.SelectCancelBrand}},[t._v("取消")])])]):t._e(),t._v(" "),t.SelectBoxFlagType?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses"},[s("div",{staticClass:"SelectTitle"},[t._v("请选择类型")]),t._v(" "),s("div",{staticClass:"SelectItem"},t._l(t.SelectBoxListType,function(e,o){return s("div",{key:o,attrs:{id:o},on:{click:function(e){return t.SelectComitType(o)}}},[t._v(t._s(e.PRODUCT_TYPE))])}),0),t._v(" "),s("div",{staticClass:"cancel",on:{click:t.SelectCancelType}},[t._v("取消")])])]):t._e(),t._v(" "),s("div",{staticClass:"foot_cart"},[s("div",{staticClass:"foot_top",on:{click:t.animat_cartShowIf}},[t._m(0),t._v(" "),s("div",{staticClass:"submit",on:{click:t.toSuggestOrder}},[t._v("确认")])]),t._v(" "),s("div",{staticClass:"foot_bottom"},[s("div",{staticClass:"OutermostGray",on:{click:t.animat_cartShowIf}}),t._v(" "),s("div",{staticClass:"footBo_move"},[s("div",{staticClass:"footBottom_fixedBox"},t._l(t.CheckedListData,function(e,o){return s("div",{key:o,staticClass:"cartGoodsList",attrs:{id:o}},[s("div",{staticClass:"cartListLeft_"},[s("div",[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",[s("span",[t._v("生产日期：")]),t._v(t._s(e.DateInProduced))])]),t._v(" "),s("div",{staticClass:"cartListCenter_"},[t._v(t._s(e.value)+t._s(e.UNIT_OF_MEASURE_STR))]),t._v(" "),s("div",{staticClass:"cartListRight_"},[s("i",{staticClass:"iconfont icon-Untitled-",on:{click:function(e){return t.removeGoods(o)}}})])])}),0)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"totalNum"},[e("i",{staticClass:"iconfont icon-shoppingCart-full"}),e("span",[this._v("已检查库存")])])}]};var xe=s("VU/8")(Ae,Ne,!1,function(t){s("duch")},"data-v-73ec18e1",null).exports,$e={data:function(){return{headerText:"建议订单",remark:""}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)},toChooseGoods:function(){this.$router.push({name:"ChooseGoods"})},toVividDisplay:function(){var t=this,e={cellphone:t.$store.state.userInfo.cellphone,visitId:t.$store.state.CurrentVisitId,strRecommendedOrder:t.remark};console.log(e),t.httpRequest("GetVisitRecommendedOrder.do",e,function(e){console.log(e),t.$router.push({name:"VividDisplay"})})}}},be={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SuggestOrder"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"remark"},[t._m(0),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"请输入备注信息"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.toChooseGoods}},[t._v("帮门店下单")]),t._v(" "),s("div",{on:{click:t.toVividDisplay}},[t._v("下一步")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("建议订单：")])])}]};var we=s("VU/8")($e,be,!1,function(t){s("F+Ns")},"data-v-686faf70",null).exports,Me={data:function(){return{headerText:"生动化陈列",thisClickSeleIdx:0,VividList:[{IDX:0,DisplayType:""}],SelectBoxList:[],dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadParamsList:[{}],remark:"",uploadFailNum:0,uploadSuccessNum:0,uploadTotalNum:0}},components:{componentHeader:_},mounted:function(){h()(".el-upload__input").attr("capture","camera")},created:function(){var t=this;t.uploadParamsList[0]={visitId:t.$store.state.CurrentVisitId,userId:t.$store.state.userInfo.user_id,cellphone:t.$store.state.userInfo.cellphone,businessCode:t.$store.state.businessInfo.businessCode};var e={types:"SDXL"};console.log(e),t.httpRequest("findKVByType.do",e,function(e){console.log(e),t.SelectBoxList=e.data})},methods:{f_Fanhui:function(){this.$route.query.visit_whoPush&&"OrderConfirm"==this.$route.query.visit_whoPush?this.$router.push({name:"CustomerVisit"}):this.$router.go(-1)},selectChange:function(t,e){for(var s=0;s<this.SelectBoxList.length;s++)this.SelectBoxList[s].disabled=!1;for(var o=0;o<this.VividList.length;o++)if(this.VividList[o].DisplayType)for(var i=0;i<this.SelectBoxList.length;i++)this.VividList[o].DisplayType!=this.SelectBoxList[i].name||(this.SelectBoxList[i].disabled=!0)},addBtn:function(){for(var t=this,e=0;e<t.VividList.length;e++)if(!t.VividList[e].DisplayType)return void t.$alert("请选择以上生动化陈列再新增","提示",{confirmButtonText:"确定"});for(var s=!1,o=0;o<t.SelectBoxList.length;o++)0==t.SelectBoxList[o].disabled&&(s=!0);s?(this.VividList.push({IDX:t.VividList.length,DisplayType:""}),t.$nextTick(function(){for(var e=0;e<t.VividList.length;e++)h()(".VividList:eq("+e+") .el-upload__input").attr("capture","camera")}),t.uploadParamsList[t.uploadParamsList.length]={visitId:t.$store.state.CurrentVisitId,userId:t.$store.state.userInfo.user_id,cellphone:t.$store.state.userInfo.cellphone,businessCode:t.$store.state.businessInfo.businessCode}):t.$alert("已经没有类型可选","提示",{confirmButtonText:"确定"})},deleteIcon:function(t){event.stopPropagation(),this.VividList.splice(t,1);for(var e=0;e<this.SelectBoxList.length;e++)this.SelectBoxList[e].disabled=!1;for(var s=0;s<this.VividList.length;s++)if(this.VividList[s].DisplayType)for(var o=0;o<this.SelectBoxList.length;o++)this.VividList[s].DisplayType!=this.SelectBoxList[o].name||(this.SelectBoxList[o].disabled=!0);this.uploadParamsList.splice(t,1)},toLeaveStore:function(){for(var t=this,e=0;e<t.VividList.length;e++){if(!t.VividList[e].DisplayType)return void t.$alert("请选择生动化陈列类型","提示",{confirmButtonText:"确定"});if(!h()(".container .uploadImg:eq("+e+") li").length)return void t.$alert("请上传照片","提示",{confirmButtonText:"确定"})}this.uploadTotalNum=h()(".container li").length,t.uploadParamsList.forEach(function(e,s,o){e.vividDisplay=encodeURIComponent(t.VividList[s].DisplayType),e.vividDisplayText=encodeURIComponent(t.remark)}),console.log(t.uploadParamsList);for(var s=0;s<t.VividList.length;s++)t.$refs.updom[s].submit()},ChangeVisitStatus:function(){var t=this;t.uploadSuccessNum=0,t.uploadFailNum=0,t.uploadTotalNum=0;var e={cellphone:t.$store.state.userInfo.cellphone,types:"SDXL",visitId:t.$store.state.CurrentVisitId,actualVisitingAddress:"",remarks:t.remark};console.log(e),this.httpRequest("GetVisitPicStatus.do",e,function(e){console.log(e),t.$router.push({name:"LeaveStore",query:{visit_whoPush:"VividDisplay"}})})},uploadSuccess:function(t,e,s){console.log(t);this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?this.uploadSuccessNum+this.uploadFailNum==parseInt(this.uploadTotalNum)&&this.ChangeVisitStatus():this.ChangeVisitStatus()},uploadError:function(t,e,s){console.log(t);if(this.$emit("isLoading",!1),this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadFailNum=0,this.uploadSuccessNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("上传失败","提示",{confirmButtonText:"确定"});this.uploadFailNum+this.uploadSuccessNum==parseInt(this.uploadTotalNum)&&this.ChangeVisitStatus()},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},Ue={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"VividDisplay"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[t._l(t.VividList,function(e,o){return s("div",{key:o,staticClass:"VividList",attrs:{id:o}},[s("div",{staticClass:"selectDown"},[0!=o?s("i",{staticClass:"iconfont icon-Untitled-",on:{click:function(e){return t.deleteIcon(o)}}}):t._e(),t._v(" "),s("span",[t._v("生动化陈列：")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(e){return t.selectChange(e,o)}},model:{value:e.DisplayType,callback:function(s){t.$set(e,"DisplayType",s)},expression:"dataItem.DisplayType"}},t._l(t.SelectBoxList,function(t){return s("el-option",{key:t.name,attrs:{label:t.name,value:t.name,disabled:t.disabled}})}),1)],1),t._v(" "),s("div",{staticClass:"uploadImg"},[s("el-upload",{ref:"updom",refInFor:!0,attrs:{action:t.HOST_xsy+"GetVisitVividDisplay.do","auto-upload":!1,data:t.uploadParamsList[o],"list-type":"picture-card",limit:6,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)])}),t._v(" "),s("div",{staticClass:"addBtn",on:{click:t.addBtn}},[s("span",[t._v("新增生动化陈列")])]),t._v(" "),s("div",{staticClass:"remark"},[t._m(0),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"请输入备注信息"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.toLeaveStore}},[t._v("确认")])])],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("备注：")])])}]};var ke=s("VU/8")(Me,Ue,!1,function(t){s("PAiN")},"data-v-c7791de4",null).exports,Ve={data:function(){return{headerText:"离店",leaveData:[],VisitCompleteBtnHide:!0,ifTips:!1,tips_Msg:"",selfconfirm_show:!1,confirmcontent:"",VISIT_STATES:""}},components:{componentHeader:_},created:function(){this.$route.query.pageName&&"查看拜访"==this.$route.query.pageName&&(this.VisitCompleteBtnHide=!1,this.headerText="查看拜访"),this.$route.query.VISIT_STATES&&(this.VISIT_STATES=this.$route.query.VISIT_STATES),this.reqData()},methods:{f_Fanhui:function(){this.$route.query.visit_whoPush&&"VividDisplay"==this.$route.query.visit_whoPush?this.$router.push({name:"CustomerVisit"}):this.$router.go(-1)},edit_btn:function(){var t=this,e=this;this.$alert('<textarea class="textarea" rows="4" style="width:10.3rem;padding-left:0.3rem;padding-top:0.3rem;font-size:0.7rem;">',"拜访存在的问题、建议：",{dangerouslyUseHTMLString:!0,showCancelButton:!0}).then(function(s){s.value;var o=h()(".textarea").val(),i={visitId:t.$store.state.CurrentVisitId,visitResults:o};e.httpRequest("SavevisitResults.do",i,function(t){e.$message({message:"提交成功，感谢您宝贵的建议！",type:"success"}),e.reqData()})}).catch(function(){}),setTimeout(function(){h()(".textarea").focus()},50)},reqData:function(){var t=this,e={visitId:this.$store.state.CurrentVisitId,cellphone:this.$store.state.userInfo.cellphone,userId:this.$store.state.userInfo.user_id};t.httpRequest("GetVisitLeaveShopInfo.do",e,function(e){if(console.log(e),t.leaveData=e.data,t.leaveData.ORDER.length)for(var s=0;s<t.leaveData.ORDER.length;s++)"NEW"==t.leaveData.ORDER[s].STATS?t.leaveData.ORDER[s].STATS_text="未确认":"FINISH"==t.leaveData.ORDER[s].STATS?t.leaveData.ORDER[s].STATS_text="已确认":"CANCEL"==t.leaveData.ORDER[s].STATS&&(t.leaveData.ORDER[s].STATS_text="此出库单已取消");t.$previewRefresh()})},selfconfirm_cancel:function(){this.selfconfirm_show=!1},selfconfirm_confirm:function(){},selfconfirm_confirm_:function(){this.selfconfirm_show=!1,this.selfconfirm_confirm()},selfconfirm:function(t,e){this.selfconfirm_show=!0,this.confirmcontent=t,this.selfconfirm_confirm=e},PackUp:function(t,e){"block"==h()("."+e).css("display")?(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(-90deg)"}),h()("."+e).hide(400)):(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(0deg)"}),h()("."+e).show(400))},ModifyData:function(t){event.stopPropagation();"stepConfirm"==t?this.$router.push({name:"CreateNewVisit",query:{VisitModifyData:"VisitModifyData",pageName:this.headerText}}):"stepCheck"==t?this.$router.push({name:"CheckInventory",query:{VisitModifyData:"VisitModifyData",pageName:this.headerText}}):"stepSuggest"==t?this.$router.push({name:"ChooseGoods",query:{VisitModifyData:"VisitModifyData",pageName:this.headerText,CurrentStoresId:this.$store.state.CurrentStoresId,visitId:this.$store.state.CurrentVisitId,whoPush:"CheckInventory",orderType:"SALE_OUT"}}):"stepVivid"==t&&this.$router.push({name:"VividDisplay",query:{VisitModifyData:"VisitModifyData"}})},toOutboundDetail:function(t){"OSP"==this.$store.state.visitObject?this.$router.push({name:"PurchaseOrderDetail",query:{orderId:this.leaveData.ORDER[t].ORDER_ID}}):this.$router.push({name:"OutboundDetail",query:{transferOutId:this.leaveData.ORDER[t].ORDER_ID}})},VisitComplete:function(){var t=this;this.selfconfirm("确定要离店吗?",function(){var e={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,visitId:t.$store.state.CurrentVisitId};console.log(e),t.httpRequest("GetVisitLeaveShop.do",e,function(e){console.log(e),t.ifTips=!0,t.tips_Msg="拜访完成",setTimeout(function(){t.$router.push({name:"CustomerVisit"})},2e3)})})},delImage:function(t,e){var s=this;this.selfconfirm("确定要删除图片吗?",function(){var o={picId:s.leaveData.SDXL[t].IMAGES[e].IMAGES_ID,visitId:s.$store.state.CurrentVisitId,type:"one",large:s.leaveData.SDXL[t].TYPE};console.log(o),s.httpRequest("delPic.do",o,function(t){console.log(t),s.ifTips=!0,s.tips_Msg="删除成功",setTimeout(function(){s.ifTips=!1,s.reqData()},2e3)})})},delVividType:function(t){var e=this;this.selfconfirm("确定要删除该陈列类型吗?",function(){var s={picId:0,visitId:e.$store.state.CurrentVisitId,type:"more",large:e.leaveData.SDXL[t].TYPE};console.log(s),e.httpRequest("delPic.do",s,function(t){console.log(t),e.ifTips=!0,e.tips_Msg="删除成功",setTimeout(function(){e.ifTips=!1,e.reqData()},2e3)})})}}},Fe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"LeaveStore"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"stepTitle stepTitle_first",on:{click:function(e){return t.PackUp("stepTitle_first","IntoTheShop")}}},[s("img",{attrs:{src:"static/img/Visit/IntoTheShop.png"}}),s("span",[t._v("进店")]),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"IntoTheShop"},[s("div",{staticClass:"IntoShopImg"},t._l(t.leaveData.STORE,function(t,e){return s("div",{key:e,attrs:{id:e}},[s("img",{attrs:{src:t.IMAGES_URL,preview:"99"}})])}),0),t._v(" "),s("div",{staticClass:"save-img-prompt"},[t._v("* 长按图片保存到手机相册")]),t._v(" "),s("div",{staticClass:"VisitAddress"},[s("span",[t._v("拜访位置：")]),s("span",[t._v(t._s(t.leaveData.ACTUAL_VISITING_ADDRES))])])]),t._v(" "),s("div",{staticClass:"stepTitle stepConfirm",on:{click:function(e){return t.PackUp("stepConfirm","ConfirmInfo")}}},[s("img",{attrs:{src:"static/img/Visit/ConfirmInfo.png"}}),s("span",[t._v("确认客户资料信息")]),!t.VisitCompleteBtnHide&&"已拜访"==t.VISIT_STATES||t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?s("i",{staticClass:"iconfont icon-xiangxia"}):s("i",{staticClass:"iconfont icon-xiugai",on:{click:function(e){return t.ModifyData("stepConfirm")}}})]),t._v(" "),s("div",{staticClass:"ConfirmInfo"},[t._m(0),t._v(" "),s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(t.leaveData.PARTY_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联 系 人 ：")]),s("span",[t._v(t._s(t.leaveData.CONTACTS))])]),t._v(" "),s("div",[s("span",[t._v("联系电话：")]),s("span",[t._v(t._s(t.leaveData.CONTACTS_TEL)+"   "),t.leaveData.CONTACTS_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.leaveData.CONTACTS_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("客户地址：")]),s("span",[t._v(t._s(t.leaveData.PARTY_ADDRESS))])]),t._v(" "),t.leaveData.REACH_THE_SITUATION?s("div",[s("span",[t._v("备注：")]),s("span",[t._v(t._s(t.leaveData.REACH_THE_SITUATION))])]):t._e()]),t._v(" "),s("div",{staticClass:"stepTitle stepCheck",on:{click:function(e){return t.PackUp("stepCheck","CheckInventory")}}},[s("img",{attrs:{src:"static/img/Visit/CheckInventory.png"}}),s("span",[t._v("检查库存")]),!t.VisitCompleteBtnHide&&"已拜访"==t.VISIT_STATES||t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?s("i",{staticClass:"iconfont icon-xiangxia"}):s("i",{staticClass:"iconfont icon-xiugai",on:{click:function(e){return t.ModifyData("stepCheck")}}})]),t._v(" "),t.leaveData.INVENTORY&&t.leaveData.INVENTORY.length||t.leaveData.CHECK_INVENTORY?s("div",{staticClass:"CheckInventory"},[t._l(t.leaveData.INVENTORY,function(e,o){return s("div",{key:o,staticClass:"CheckedList",attrs:{id:o}},[s("div",[s("div",[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",[s("span",[t._v("生产日期：")]),s("span",[t._v(t._s(e.PRODUCTION_TIME))])])]),t._v(" "),s("span",[t._v(t._s(e.INVENTORY_QUANTITY)+" "+t._s(e.UNIT))])])}),t._v(" "),t.leaveData.CHECK_INVENTORY?s("div",{staticClass:"CheckedRemark"},[t._v("备注："+t._s(t.leaveData.CHECK_INVENTORY))]):t._e()],2):t._e(),t._v(" "),s("div",{staticClass:"stepTitle stepSuggest",on:{click:function(e){return t.PackUp("stepSuggest","SuggestOrder")}}},[s("img",{attrs:{src:"static/img/Visit/SuggestOrder.png"}}),s("span",[t._v("建议订单")]),!t.VisitCompleteBtnHide&&"已拜访"==t.VISIT_STATES||t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?s("i",{staticClass:"iconfont icon-xiangxia"}):s("i",{staticClass:"iconfont icon-xiugai",on:{click:function(e){return t.ModifyData("stepSuggest")}}})]),t._v(" "),t.leaveData.ORDER&&t.leaveData.ORDER.length?s("div",{staticClass:"SuggestOrder"},[t._l(t.leaveData.ORDER,function(e,o){return s("div",{key:o,staticClass:"SuggestOrderInfo",attrs:{id:o},on:{click:function(e){return t.toOutboundDetail(o)}}},[s("div",[s("span",[t._v("出库单号：")]),s("span",[t._v(t._s(e.OMS_NO))])]),t._v(" "),s("div",[s("span",[t._v("门店名称：")]),s("span",[t._v(t._s(e.RECEIVE_PARTY_NAME))])]),t._v(" "),s("div",[s("span",[t._v("门店地址：")]),s("span",[t._v(t._s(e.RECEIVE_PARTY_ADDR1))])]),t._v(" "),s("div",[s("span",[t._v("下单人名：")]),s("span",[t._v(t._s(e.ADDWHO))])]),t._v(" "),s("div",[s("span",[t._v("下单日期：")]),s("span",[t._v(t._s(e.ORDER_RECEIVED_DTE))])]),t._v(" "),s("div",[s("span",[t._v("出库数量：")]),s("span",[t._v(t._s(e.PIRCHASE_QUANTITY))])]),t._v(" "),"OSP"!=t.$store.state.visitObject?s("span",{staticClass:"OrderStatus"},[t._v("销售出库："+t._s(e.STATS_text))]):t._e(),t._v(" "),"OSP"==t.$store.state.visitObject?s("span",{staticClass:"OrderStatus"},[t._v("采购订单")]):t._e()])}),t._v(" "),t.leaveData.RECOMMENDED_ORDER?s("div",[t._v("备注："+t._s(t.leaveData.RECOMMENDED_ORDER))]):t._e()],2):t._e(),t._v(" "),s("div",{staticClass:"stepTitle stepVivid",on:{click:function(e){return t.PackUp("stepVivid","VividDisplay")}}},[s("img",{attrs:{src:"static/img/Visit/VividDisplay.png"}}),s("span",[t._v("生动化陈列")]),!t.VisitCompleteBtnHide&&"已拜访"==t.VISIT_STATES||t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?s("i",{staticClass:"iconfont icon-xiangxia"}):s("i",{staticClass:"iconfont icon-xiugai",on:{click:function(e){return t.ModifyData("stepVivid")}}})]),t._v(" "),t.leaveData.SDXL&&t.leaveData.SDXL.length?s("div",{staticClass:"VividDisplay"},[t._l(t.leaveData.SDXL,function(e,o){return s("div",{key:o,staticClass:"VividDisplay_item",attrs:{id:o}},[s("div",{staticClass:"VividType"},[s("span",[t._v("类型："+t._s(e.TYPE))]),t._v(" "),!t.VisitCompleteBtnHide&&"已拜访"==t.VISIT_STATES||t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?t._e():s("i",{staticClass:"iconfont icon-trash",on:{click:function(e){return t.delVividType(o)}}})]),t._v(" "),s("div",{staticClass:"VividImg"},t._l(e.IMAGES,function(e,i){return s("div",{key:i,attrs:{id:i}},[s("img",{attrs:{src:e.IMAGES_URL,preview:o}}),t._v(" "),!t.VisitCompleteBtnHide&&"已拜访"==t.VISIT_STATES||t.$route.query.ModifyCustomerattached&&"ModifyCustomerInfo"==t.$route.query.ModifyCustomerattached?t._e():s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.delImage(o,i)}}})])}),0),t._v(" "),s("div",{staticClass:"save-img-prompt"},[t._v("* 长按图片保存到手机相册")])])}),t._v(" "),t.leaveData.VIVID_DISPLAY_Text?s("div",{staticClass:"VividRemark"},[t._v("备注："+t._s(t.leaveData.VIVID_DISPLAY_Text))]):t._e()],2):t._e(),t._v(" "),s("div",{staticClass:"stepTitle stepVisit",on:{click:function(e){return t.PackUp("stepVisit","VisitStatus")}}},[s("img",{attrs:{src:"static/img/Visit/VisitStatus.png"}}),s("span",[t._v("拜访状态")]),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"VisitStatus"},[s("div",[s("span",[t._v("拜访状态：")]),s("span",[t._v(t._s(t.leaveData.VISIT_STATES))])])]),t._v(" "),s("div",{staticClass:"VisitStatus"},[s("div",{staticClass:"visit-results"},[s("span",[t._v("拜访结果：")]),s("span",[t._v(t._s(t.leaveData.Visit_Results))])])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),t.VisitCompleteBtnHide?s("div",{staticClass:"blank_"}):t._e()]),t._v(" "),t.VisitCompleteBtnHide?s("div",{staticClass:"bottom-btn"},[s("div",{staticClass:"next-btn",on:{click:t.VisitComplete}},[t._v("确认离店")]),t._v(" "),s("div",{staticClass:"edit-btn",on:{click:t.edit_btn}},[t._v("拜访备注")])]):t._e(),t._v(" "),t.selfconfirm_show?s("div",{staticClass:"selfconfirm"},[s("div",{staticClass:"selfconfirm_contianer"},[s("div",{staticClass:"selfconfirm_head"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"selfconfirm_content"},[t._v(t._s(t.confirmcontent))]),t._v(" "),s("div",{staticClass:"selfconfirm_btn"},[s("div",{on:{click:function(e){return t.selfconfirm_cancel()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(e){return t.selfconfirm_confirm_()}}},[t._v("确认")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("客户代码：")]),e("span",[this._v("RW00001")])])}]};var Be=s("VU/8")(Ve,Fe,!1,function(t){s("KQjy")},"data-v-036a3cb4",null).exports,qe={data:function(){return{headerText:"门店列表",CustomerListData:[],searchValue:"",noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,totalNum:0}},components:{componentHeader:_},created:function(){this.reqFindStores()},watch:{searchValue:function(t,e){this.reqFindStores()}},methods:{f_Fanhui:function(){this.$router.push({name:"Index"})},reqFindStores:function(t){var e=this,s="selectStores.do",o=e.$store.state.CustomerInfoOspInfo.CUSTOMER_ID;5==e.$store.state.userInfo.business&&(s="selectOSP.do",o=e.$store.state.CustomerInfoOspInfo.suppliersId);var i={suppliersId:o,cellphone:e.$store.state.userInfo.cellphone,userId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,strStoreName:e.searchValue,currentPage:e.loadPage,numberPerPage:e.numberPerPage};e.httpRequest(s,i,function(s){e.totalNum=s.data.storesNum,t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.storesArr.length&&(e.CustomerListData=e.CustomerListData.concat(s.data.storesArr)):e.CustomerListData=s.data.storesArr,s.data.storesArr.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.CustomerListData.length?e.noDataShow=!1:e.noDataShow=!0})},f_Add:function(){this.$router.push({name:"CreateNewCustomer"})},toModify:function(t){var e=this.CustomerListData[t];this.$router.push({name:"ModifyCustomerInfo",query:{storeInfo:e}})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqFindStores("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqFindStores("BottomLoad"))}}},He={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerList"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfAddShow:!0},on:{f_Fanhui:t.f_Fanhui,f_Add:t.f_Add}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"headFixed"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按门店名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"InventoryTotal"},[s("div",{staticClass:"totalNum"},[s("div",{staticClass:"totalNumber"},[t._v(t._s(t.totalNum))]),t._v(" "),t._m(0)])])]),t._v(" "),s("div",{staticClass:"CustomerListData"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.CustomerListData,function(e,o){return s("div",{key:o,staticClass:"CustomerListItem",attrs:{id:o},on:{click:function(e){return t.toModify(o)}}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.storesName))])]),t._v(" "),s("div",[s("span",[t._v(t._s(e.address1))])]),t._v(" "),s("div",{staticClass:"TheContact"},[s("div",[s("i",{staticClass:"iconfont icon-lianxiren"}),t._v(" "),s("span",[t._v(t._s(e.CONTACT_NAME))])]),t._v(" "),s("div",[s("span",[t._v(t._s(e.CONTACT_TEL)+"  ")]),t._v(" "),e.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(s){return t.callPhone(e.CONTACT_TEL)}}}):t._e()])])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"totalNumBot"},[e("div",[e("i",{staticClass:"iconfont icon-yonggongzongliang"}),this._v(" "),e("span",[this._v("门店总量")])])])}]};var Ge=s("VU/8")(qe,He,!1,function(t){s("jeLG")},"data-v-6c764170",null).exports,Qe=s("bOdI"),We=s.n(Qe),Ye={data:function(){var t;return t={headerText:"新建门店",cruuentSeleText:"",SelectBoxList:[],SelectBoxFlag:!1,RoutLineFlag:!1,supplierList:[],SupplierName:"",suppliersId:"",CustomerName:"",ChannelList:[],Channel:"",VisitLineList:[],VisitRouteName:"",VisitRouteNameInsert:"",VisitRouteId:"",CustomerRemark:"",Consignee:"",ContactTel:"",Location:"",AddressDetail:"",longitude:"",latitude:"",lnglat:"",province:"",cityChinese:"",districict:"",street:"",ifTips:!1,tips_Msg:"",selectedLine:[],selectedValue:[],StrategyList:[],SumStrategyList:[]},We()(t,"suppliersId",[]),We()(t,"priceStrategys",[]),We()(t,"uploadParam",{}),We()(t,"uploadFailNum",0),We()(t,"uploadSuccessNum",0),We()(t,"uploadTotalNum",0),We()(t,"dialogImageUrl",""),We()(t,"dialogVisible",!1),We()(t,"storeId",""),t},components:{componentHeader:_,componentSelectBox:m},mounted:function(){window.SetContactPeople=this.SetContactPeople,window.SetSendLocation=this.SetSendLocation},created:function(){var t=this;t.SupplierName=t.$store.state.CustomerInfoOspInfo.name,t.CustomerName=t.$store.state.StoreInfo.CustomerName,t.$store.state.StoreInfo.ChannelList&&(t.Channel=t.$store.state.StoreInfo.ChannelList.name),t.VisitRouteId=t.$store.state.StoreInfo.VisitRouteId,t.VisitRouteName=t.$store.state.StoreInfo.VisitRouteName,t.CustomerRemark=t.$store.state.StoreInfo.CustomerRemark,t.Consignee=t.$store.state.StoreInfo.Consignee,t.ContactTel=t.$store.state.StoreInfo.ContactTel,t.Location=t.$store.state.StoreInfo.Location,t.AddressDetail=t.$store.state.StoreInfo.AddressDetail,t.longitude=t.$store.state.StoreInfo.longitude,t.latitude=t.$store.state.StoreInfo.latitude,t.lnglat=t.$store.state.StoreInfo.lnglat,5==t.$store.state.userInfo.business?t.suppliersId=t.$store.state.CustomerInfoOspInfo.suppliersId:t.suppliersId=t.$store.state.CustomerInfoOspInfo.CUSTOMER_ID;var e={suppliersId:t.suppliersId};t.httpRequest("GetVisitLine.do",e,function(e){if(e.data.length){t.VisitLineList=e.data;for(var s=0;s<t.VisitLineList.length;s++)"全部"==e.data[s].name&&t.VisitLineList.splice(s,1)}else t.$alert("未获取到拜访线路，请联系管理员","提示",{confirmButtonText:"确定"})}),t.httpRequest("findChannel.do","",function(e){e.data.length?t.ChannelList=e.data:t.$alert("未获取到渠道，请联系管理员","提示",{confirmButtonText:"确定"})});var s={suppliersId:t.suppliersId};t.httpRequest("GetStrategyByOSP.do",s,function(e){e.data.length&&(t.StrategyList=e.data)}),t.getVisitLineInfo();var o={businessId:t.$store.state.businessInfo.businessId};t.httpRequest("GetStrategyPriceByCustomer.do",o,function(e){e.data.length&&(t.priceStrategys=e.data)})},methods:{f_Fanhui:function(){this.$store.state.StoreInfo={},this.$router.push({name:"CustomerList"})},price_strategy_click:function(t){var e=h()(".priceStrategys:eq("+t+")>i.iconfont"),s=!1;e.hasClass("icon-1")&&(s=!0);for(var o=0;o<this.priceStrategys.length;o++){if(h()(".priceStrategys").eq(o).children(".iconfont").hasClass("icon-1"))h()(".priceStrategys:eq("+o+")>i.iconfont").removeClass("icon-1").addClass("icon-weixuanzhong")}s||(e.hasClass("icon-weixuanzhong")?e.removeClass("icon-weixuanzhong").addClass("icon-1"):e.hasClass("icon-1")&&e.removeClass("icon-1").addClass("icon-weixuanzhong"))},fds:function(t){var e=h()(".StrategyList:eq("+t+")>i.iconfont");e.hasClass("icon-1")?e.removeClass("icon-1").addClass("icon-weixuanzhong"):e.hasClass("icon-weixuanzhong")&&e.removeClass("icon-weixuanzhong").addClass("icon-1")},toLnglat:function(){if(this.saveInfo(),"iOS"==this.$store.state.Device)try{CallAndroidOrIOS("调用发送位置","")}catch(t){}else this.$router.push({name:"SendLnglat",query:{whoPush:"CreateNewCustomer"}})},saveInfo:function(){this.$store.state.StoreInfo.CustomerName=this.CustomerName,this.$store.state.StoreInfo.Consignee=this.Consignee,this.$store.state.StoreInfo.ContactTel=this.ContactTel,this.$store.state.StoreInfo.CustomerRemark=this.CustomerRemark,this.$store.state.StoreInfo.Location=this.Location,this.$store.state.StoreInfo.AddressDetail=this.AddressDetail,this.$store.state.StoreInfo.longitude=this.longitude,this.$store.state.StoreInfo.latitude=this.latitude,this.$store.state.StoreInfo.lnglat=this.lnglat},SetSendLocation:function(t,e,s){this.lnglat=t,this.longitude=e,this.latitude=s},SetContactPeople:function(t,e){this.Consignee=t,this.ContactTel=e},toChooseContact:function(){try{CallAndroidOrIOS.callAndroid("调用通讯录","")}catch(t){}try{CallAndroidOrIOS("调用通讯录","")}catch(t){}},sortNumbers:function(t){return t.sort(function(t,e){return t-e})},sortByKeyDesc:function(t,e){return t.sort(function(t,s){var o=t[e],i=s[e];return o<i?-1:o>i?1:0})},selectBoxShow:function(){this.SelectBoxFlag=!0,this.SelectBoxList=this.ChannelList,this.cruuentSeleText="渠道"},selectBoxShowRoutes:function(){this.selectedLine=this.$store.state.StoreInfo.VisitLineList;for(var t=0;t<this.VisitLineList.length;t++)this.VisitLineList[t].checked="";if(this.VisitRouteName)for(var e=0;e<this.selectedLine.length;e++)for(var s=0;s<this.VisitLineList.length;s++)this.selectedLine[e].visitId==this.VisitLineList[s].visitId&&(this.VisitLineList[s].checked="checked");else{this.Date=new Date;t=this.Date.getDay();this.data="星期"+"天一二三四五六".charAt(t);for(var o=0;o<this.VisitLineList.length;o++)this.data==this.VisitLineList[o].name&&(this.VisitLineList[o].checked="checked")}this.RoutLineFlag=!0,this.SelectBoxList=this.VisitLineList,this.cruuentSeleText="拜访线路"},selectedItem:function(t){this.Channel=this.SelectBoxList[t].name,this.$store.state.StoreInfo.ChannelList=this.ChannelList[t],this.SelectBoxFlag=!1},getVisitLineInfo:function(){this.VisitRouteName="",this.VisitRouteNameInsert="",this.VisitRouteId="",this.$store.state.StoreInfo.VisitLineList&&(this.selectedLine=this.$store.state.StoreInfo.VisitLineList);for(var t=0;t<this.selectedLine.length;t++)this.VisitRouteName+=this.selectedLine[t].name.substring(3,2)+" ",this.VisitRouteNameInsert+=this.selectedLine[t].name+",",this.VisitRouteId+=this.selectedLine[t].visitId+",";this.VisitRouteName=this.VisitRouteName.substring(0,this.VisitRouteName.lastIndexOf(" ")),this.VisitRouteNameInsert=this.VisitRouteNameInsert.substring(0,this.VisitRouteNameInsert.lastIndexOf(",")),this.VisitRouteId=this.VisitRouteId.substring(0,this.VisitRouteId.lastIndexOf(","))},RoutLineConfirm:function(){for(var t=[],e=0;e<this.VisitLineList.length;e++)h()(".RoutLineInfo:eq("+e+") input.border_w").prop("checked")&&(t[t.length]=this.VisitLineList[e]);this.$store.state.StoreInfo.VisitLineList=t,this.RoutLineFlag=!1,this.getVisitLineInfo()},selectCancel:function(){this.SelectBoxFlag=!1},RoutLineCancel:function(){this.selectedLine=[],this.RoutLineFlag=!1},toChooseAddress:function(){this.saveInfo(),this.$router.push({name:"ChooseAddress"})},uploadSuccess:function(t,e,s){this.uploadSuccessNum++,this.uploadSuccessNum!=parseInt(this.uploadTotalNum)?parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.$alert("部分图片上传失败","提示",{confirmButtonText:"确定"}):console.log(t)},uploadError:function(t,e,s){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("图片上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.$alert("部分图片上传失败","提示",{confirmButtonText:"确定"})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},CustomerSave:function(){for(var t=this,e="",s="",o=0;o<t.priceStrategys.length;o++)h()(".priceStrategys").eq(o).children(".iconfont").hasClass("icon-1")&&(s=t.priceStrategys[o].POLICY_PRICE_ID+",");for(o=0;o<t.StrategyList.length;o++)h()(".StrategyList").eq(o).children(".iconfont").hasClass("icon-1")&&(e+=t.StrategyList[o].STRATEGY_DETAIL_ID+",");if(e&&(e=e.substring(0,e.lastIndexOf(","))),this.CustomerName)if(h()("div.uploadImg ul>li").length)if(this.Consignee)if(this.ContactTel)if(this.AddressDetail)if(t.Channel)if(t.$store.state.StoreInfo.province||t.$store.state.StoreInfo.cityChinese||t.$store.state.StoreInfo.districict||t.$store.state.StoreInfo.street)if(t.latitude)if(t.getVisitLineInfo(),t.VisitRouteId){var i={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,suppliersId:t.suppliersId,storesCode:"",storesName:t.CustomerName,storesAdress:t.AddressDetail,province:t.$store.state.StoreInfo.province?t.$store.state.StoreInfo.province:"",cityChinese:t.$store.state.StoreInfo.cityChinese?t.$store.state.StoreInfo.cityChinese:"",districict:t.$store.state.StoreInfo.districict?t.$store.state.StoreInfo.districict:"",street:t.$store.state.StoreInfo.street?t.$store.state.StoreInfo.street:"",storesContactName:t.Consignee,storesTel:t.ContactTel,storesNotes:t.CustomerRemark,visitRouteId:t.VisitRouteId?t.VisitRouteId:"",visitRoute:t.VisitRouteNameInsert?t.VisitRouteNameInsert:"",channel:t.$store.state.StoreInfo.ChannelList.code?t.$store.state.StoreInfo.ChannelList.code:"",longitude:t.longitude?t.longitude:"",latitude:t.latitude?t.latitude:"",strategyIds:e,policyPriceId:s};t.httpRequest("insterOrgn.do",i,function(e){1==e.status?(t.storeId=e.data,t.uploadParam={businessCode:t.$store.state.businessInfo.businessCode,storeId:t.storeId,storeName:t.$store.state.StoreInfo.CustomerName,userId:t.$store.state.userInfo.user_id,cellphone:t.$store.state.userInfo.cellphone},t.$refs.upload_ref.submit(),t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.push({name:"CustomerList"})},2e3),t.$store.state.StoreInfo={}):t.$alert("新增门店失败","提示",{confirmButtonText:"确定"})})}else t.$alert("请选择拜访路线","提示",{confirmButtonText:"确定"});else t.$alert("请选择经纬度","提示",{confirmButtonText:"确定"});else t.$alert("请选择所在区域","提示",{confirmButtonText:"确定"});else t.$alert("请选择渠道","提示",{confirmButtonText:"确定"});else t.$alert("详细地址不能为空","提示",{confirmButtonText:"确定"});else t.$alert("联系方式不能为空！","提示",{confirmButtonText:"确定"});else t.$alert("收货人不能为空！","提示",{confirmButtonText:"确定"});else t.$alert("请拍摄门店照片","提示",{confirmButtonText:"确定"});else t.$alert("门店名称不能为空！","提示",{confirmButtonText:"确定"})}}},Xe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CreateNewCustomer"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"SupplierInfo"},[s("div",[t._v("供货商信息")]),t._v(" "),s("div",[s("span",[t._v("供货商名称：")]),t._v(" "),s("span",[t._v(t._s(t.SupplierName))])])]),t._v(" "),s("div",{staticClass:"CustomerInfo"},[s("div",[t._v("门店信息")]),t._v(" "),s("div",[s("span",[t._v("门店名称：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.CustomerName,expression:"CustomerName"}],attrs:{placeholder:"必填"},domProps:{value:t.CustomerName},on:{input:function(e){e.target.composing||(t.CustomerName=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"channel",on:{click:function(e){return t.selectBoxShow()}}},[s("span",[t._v("渠道：")]),t._v(" "),s("span",[t._v(t._s(t.Channel))]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"})]),t._v(" "),s("div",{staticClass:"VisitingRoutes",on:{click:function(e){return t.selectBoxShowRoutes()}}},[s("span",[t._v("拜访路线：")]),t._v(" "),s("span",[t._v(t._s(t.VisitRouteName))]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangyou"})]),t._v(" "),s("div",{staticClass:"CustomerRemark"},[s("span",[t._v("备注：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.CustomerRemark,expression:"CustomerRemark"}],domProps:{value:t.CustomerRemark},on:{input:function(e){e.target.composing||(t.CustomerRemark=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"AddressInfo"},[s("div",[t._v("地址信息")]),t._v(" "),s("div",[s("span",[t._v("收货人：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Consignee,expression:"Consignee"}],attrs:{placeholder:"必填"},domProps:{value:t.Consignee},on:{input:function(e){e.target.composing||(t.Consignee=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v("联系方式：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.ContactTel,expression:"ContactTel"}],attrs:{placeholder:"必填"},domProps:{value:t.ContactTel},on:{input:function(e){e.target.composing||(t.ContactTel=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"lianxiren"},[s("div",[s("i",{staticClass:"iconfont icon-lianxiren",on:{click:t.toChooseContact}}),t._v(" "),s("span",[t._v("选联系人")])])]),t._v(" "),s("div",{staticClass:"ChooseAddress",on:{click:t.toChooseAddress}},[s("span",[t._v("所在地区：")]),t._v(" "),s("span",[t._v(t._s(t.Location))]),t._v(" "),t._m(0)]),t._v(" "),s("div",[s("span",[t._v("详细地址：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.AddressDetail,expression:"AddressDetail"}],attrs:{placeholder:"必填"},domProps:{value:t.AddressDetail},on:{input:function(e){e.target.composing||(t.AddressDetail=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"lnglat",on:{click:t.toLnglat}},[s("span",[t._v("经纬坐标：")]),t._v(" "),s("span",[t._v(t._s(t.lnglat))]),t._v(" "),t._m(1)])]),t._v(" "),t.priceStrategys.length>0?s("div",{staticClass:"StrategyInfo"},[s("div",[t._v("价格策略")]),t._v(" "),t._l(t.priceStrategys,function(e,o){return s("div",{key:o,staticClass:"priceStrategys",attrs:{id:o},on:{click:function(e){return t.price_strategy_click(o)}}},[s("i",{staticClass:"iconfont icon-weixuanzhong"}),s("span",[t._v("  "+t._s(e.POLICY_NAME))])])})],2):t._e(),t._v(" "),s("div",{staticClass:"uploadImg"},[s("div",{staticClass:"LoadImg_head"},[t._v("请拍摄门店照片")]),t._v(" "),s("div",{staticClass:"Img"},[s("el-upload",{ref:"upload_ref",attrs:{action:t.HOST+"uploadStorePicture.do",limit:1,multiple:!0,data:t.uploadParam,"auto-upload":!1,"list-type":"picture-card","before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),s("div",{staticClass:"StrategyInfo"},[s("div",[t._v("门店策略")]),t._v(" "),t._l(t.StrategyList,function(e,o){return s("div",{key:o,staticClass:"StrategyList",attrs:{id:o},on:{click:function(e){return t.fds(o)}}},[s("i",{staticClass:"iconfont icon-1"}),s("span",[t._v("  "+t._s(e.STRATEGY_NAME))])])})],2),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.CustomerSave}},[t._v("保存")])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()]),t._v(" "),t.SelectBoxFlag?s("componentSelectBox",{attrs:{SelectBoxList:t.SelectBoxList,BouncedName:t.cruuentSeleText},on:{selectedItem:t.selectedItem,selectCancel:t.selectCancel}}):t._e(),t._v(" "),t.RoutLineFlag?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses SelectMengContent"},[s("div",{staticClass:"SelectTitle"},[t._v("请选择"+t._s(t.cruuentSeleText))]),t._v(" "),s("div",{staticClass:"SelectItem"},t._l(t.VisitLineList,function(e,o){return s("div",{key:o,staticClass:"RoutLineInfo",attrs:{id:o}},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("input",{staticClass:"border_w",attrs:{type:"checkbox"},domProps:{value:o,checked:e.checked}})])}),0),t._v(" "),s("div",{staticClass:"selectBtn"},[s("div",{on:{click:t.RoutLineConfirm}},[t._v("确定")]),t._v(" "),s("div",{on:{click:t.RoutLineCancel}},[t._v("取消")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"iconfont icon-xiangyou"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"iconfont icon-xiangyou"})])}]};var je=s("VU/8")(Ye,Xe,!1,function(t){s("WBGS")},"data-v-6d47f390",null).exports,ze={data:function(){return{headerText:"注册门店",ContactTel:"",storeID:"",CustomerName:"",Consignee:"",Location:"",AddressDetail:"",longitude:"",latitude:"",lnglat:"",province:"",cityChinese:"",districict:"",street:"",dialogImageUrl:"",dialogVisible:!1,uploadParams:{},uploadParams1:{},uploadSuccessNum:0,uploadTotalNum:0,uploadFailNum:0,ifTips:!1,tips_Msg:"",LoginOrReg:"",yzm:"",phoneNum:""}},components:{componentHeader:_},mounted:function(){window.SetSendLocation=this.SetSendLocation},created:function(){this.ContactTel=this.$store.state.WXRegIdentifyPhone,this.CustomerName=this.$store.state.StoreInfo.CustomerName,this.Consignee=this.$store.state.StoreInfo.Consignee,this.Location=this.$store.state.StoreInfo.Location,this.AddressDetail=this.$store.state.StoreInfo.AddressDetail,this.longitude=this.$store.state.StoreInfo.longitude,this.latitude=this.$store.state.StoreInfo.latitude,this.lnglat=this.$store.state.StoreInfo.lnglat,this.LoginOrReg=this.$store.state.WXRegLoginOrReg,this.yzm=this.$store.state.WXRegCode},methods:{f_Fanhui:function(){this.$store.state.StoreInfo={},this.$router.push({name:"WXVerify",query:{phoneNum:this.ContactTel,LoginOrReg:this.LoginOrReg,yzm:this.yzm}})},toLnglat:function(){this.saveInfo(),this.$router.push({name:"SendLnglat",query:{whoPush:"CreateCustomerWeChat"}})},saveInfo:function(){this.$store.state.StoreInfo.CustomerName=this.CustomerName,this.$store.state.StoreInfo.Consignee=this.Consignee,this.$store.state.StoreInfo.Location=this.Location,this.$store.state.StoreInfo.AddressDetail=this.AddressDetail,this.$store.state.StoreInfo.longitude=this.longitude,this.$store.state.StoreInfo.latitude=this.latitude,this.$store.state.StoreInfo.lnglat=this.lnglat},toChooseAddress:function(){this.saveInfo(),this.$router.push({name:"ChooseAddress",query:{create_whoPush:"WeChat"}})},uploadSuccess:function(t,e,s){var o=this;if(this.uploadSuccessNum++,o.uploadSuccessNum==parseInt(o.uploadTotalNum))return o.$store.state.StoreInfo={},void o.$alert("提交资料成功，审核通过后我们将通知您！","提示",{confirmButtonText:"确定",callback:function(){o.$router.push({name:"WXLogin"})}});parseInt(o.uploadFailNum)+parseInt(o.uploadSuccessNum)==parseInt(o.uploadTotalNum)&&o.$alert("部分图片上传失败","提示",{confirmButtonText:"确定"})},uploadError:function(t,e,s){if(this.uploadFailNum++,this.uploadFailNum==parseInt(this.uploadTotalNum))return this.uploadSuccessNum=0,this.uploadFailNum=0,this.uploadTotalNum=0,this.$emit("isLoading",!1),void this.$alert("图片上传失败","提示",{confirmButtonText:"确定"});parseInt(this.uploadFailNum)+parseInt(this.uploadSuccessNum)==parseInt(this.uploadTotalNum)&&this.$alert("部分图片上传失败","提示",{confirmButtonText:"确定"})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},CustomerSave:function(){var t=this;if(this.CustomerName)if(this.Consignee)if(this.Location)if(this.AddressDetail)if(h()("div.BusinessLicense div.uploadImg ul>li").length)if(h()("div.IDcard div.uploadImg ul>li").length<2)t.$alert("请拍摄身份证正反面照片","提示",{confirmButtonText:"确定"});else{t.uploadTotalNum=h()("div.uploadImg ul>li").length;var e={cellphone:t.$store.state.userInfo.cellphone,storesName:t.CustomerName,storesAdress:t.AddressDetail,province:t.$store.state.StoreInfo.province,cityChinese:t.$store.state.StoreInfo.cityChinese,districict:t.$store.state.StoreInfo.districict,street:t.$store.state.StoreInfo.street,storesContactName:t.Consignee,storesTel:t.ContactTel,longitude:t.longitude,latitude:t.latitude};t.httpRequest("wxInsterOrgn.do",e,function(e){t.uploadParams.types="BusinessLicense",t.uploadParams1.types="IDcard",t.uploadParams.storeId=e.data,t.uploadParams1.storeId=e.data,t.$refs.upload_ref.submit(),t.$refs.upload_ref1.submit()})}else t.$alert("请拍摄门店营业执照","提示",{confirmButtonText:"确定"});else t.$alert("详细地址不能为空","提示",{confirmButtonText:"确定"});else t.$alert("所在地区不能为空","提示",{confirmButtonText:"确定"});else t.$alert("收货人不能为空！","提示",{confirmButtonText:"确定"});else t.$alert("门店名称不能为空！","提示",{confirmButtonText:"确定"})}}},Ke={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CreateCustomerWeChat"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"CustomerInfo"},[s("div",[s("div",[t._v("手机电话")]),t._v(" "),s("div",[t._v(t._s(t.ContactTel))])]),t._v(" "),s("div",[s("div",[t._v("门店名称")]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.CustomerName,expression:"CustomerName"}],attrs:{placeholder:"必填"},domProps:{value:t.CustomerName},on:{input:function(e){e.target.composing||(t.CustomerName=e.target.value)}}})])]),t._v(" "),s("div",[s("div",[t._v("收货人")]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.Consignee,expression:"Consignee"}],attrs:{placeholder:"必填"},domProps:{value:t.Consignee},on:{input:function(e){e.target.composing||(t.Consignee=e.target.value)}}})])]),t._v(" "),s("div",{on:{click:t.toChooseAddress}},[s("div",[t._v("所在地区")]),t._v(" "),s("div",[s("span",[t._v(t._s(t.Location))]),t._m(0)])]),t._v(" "),s("div",[s("div",[t._v("详细地址")]),t._v(" "),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.AddressDetail,expression:"AddressDetail"}],attrs:{placeholder:"必填"},domProps:{value:t.AddressDetail},on:{input:function(e){e.target.composing||(t.AddressDetail=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"lnglat",on:{click:t.toLnglat}},[s("div",[t._v("经纬坐标")]),t._v(" "),s("div",[s("span",[t._v(t._s(t.lnglat))]),t._m(1)])])]),t._v(" "),s("div",{staticClass:"BusinessLicense"},[s("div",{staticClass:"uploadImg"},[s("div",[t._v("门店营业执照")]),t._v(" "),s("el-upload",{ref:"upload_ref",attrs:{action:t.HOST_xsy+"wxInsterOrgnUpload.do","auto-upload":!1,data:t.uploadParams,"list-type":"picture-card",limit:2,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),s("div",{staticClass:"IDcard"},[s("div",{staticClass:"uploadImg"},[s("div",[t._v("门店法人身份证正反面")]),t._v(" "),s("el-upload",{ref:"upload_ref1",attrs:{action:t.HOST_xsy+"wxInsterOrgnUpload.do","auto-upload":!1,data:t.uploadParams1,"list-type":"picture-card",limit:2,multiple:!0,"before-upload":t.beforeUpload,"on-error":t.uploadError,"on-success":t.uploadSuccess,"on-preview":t.handlePictureCardPreview}},[s("i",{staticClass:"el-icon-plus"})]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.CustomerSave}},[t._v("保存")])]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-xiangyou"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-xiangyou"})])}]};var Je=s("VU/8")(ze,Ke,!1,function(t){s("OT+V")},"data-v-1fe58538",null).exports,Ze={data:function(){return{headerText:"修改门店信息",ModifyAddressHide:!1,ModifyContactsHide:!1,CustomerInfoData:{},ADDRESS:"",V_ADDRESS:"",CONTACT_NAME:"",V_CONTACT_NAME:"",CONTACT_TEL:"",V_CONTACT_TEL:"",CustomerNAME:"",storesId:""}},components:{componentHeader:_},mounted:function(){window.SetCurrAddress=this.SetCurrAddress},created:function(){this.$route.query.storeInfo&&(this.storesId=this.$route.query.storeInfo.storesId),this.$route.query.storeInfo.storesId||(this.storesId=this.$store.state.CurrentStoresId),this.GetDate()},methods:{f_Fanhui:function(){this.$router.go(-1)},SetCurrAddress:function(t,e,s,o){this.V_ADDRESS=t},getCurrAddress:function(){this.TelliOSORAndroidVueOfGetCurrentLocMounted()},GetDate:function(){var t=this,e={cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,storesId:this.storesId};t.httpRequest("GetStoreOne.do",e,function(e){t.CustomerInfoData=e.data,t.ADDRESS=t.CustomerInfoData.ADDRESS1,t.CustomerNAME=t.CustomerInfoData.NAME,t.CONTACT_NAME=t.CustomerInfoData.CONTACT_NAME,t.CONTACT_TEL=t.CustomerInfoData.CONTACT_TEL})},ChangeAddress:function(){this.ModifyAddressHide=!0,this.V_ADDRESS=this.ADDRESS},ModifyAddressConfirm:function(){this.V_ADDRESS?this.Submit(this.V_ADDRESS,this.CONTACT_NAME,this.CONTACT_TEL):this.$alert("门店地址不能为空！","提示",{confirmButtonText:"确定"})},ModifyAddressCancel:function(){this.ModifyAddressHide=!1},ChangeContacts:function(){this.ModifyContactsHide=!0,this.V_CONTACT_NAME=this.CONTACT_NAME,this.V_CONTACT_TEL=this.CONTACT_TEL},ModifyContactsConfirm:function(){this.V_CONTACT_NAME?this.V_CONTACT_TEL?this.Submit(this.ADDRESS,this.V_CONTACT_NAME,this.V_CONTACT_TEL):this.$alert("联系人电话不能为空！","提示",{confirmButtonText:"确定"}):this.$alert("联系人姓名不能为空！","提示",{confirmButtonText:"确定"})},ModifyContactsCancel:function(){this.ModifyContactsHide=!1},Submit:function(t,e,s){var o=this;o.ModifyAddressHide=!1,o.ModifyContactsHide=!1;var i={cellphone:o.$store.state.userInfo.cellphone,userId:o.$store.state.userInfo.user_id,storesId:o.storesId,storesName:o.CustomerNAME,storesAdress:t,storesContactName:e,storesTel:s};o.httpRequest("updateCustomerInfo.do",i,function(t){1==t.status?(o.$alert("更新成功","提示",{confirmButtonText:"确定"}),o.GetDate()):o.$alert("更新失败","提示",{confirmButtonText:"确定"})})},toHistoryVisit:function(){event.stopPropagation();var t=this.CustomerInfoData;this.$store.state.CurrentStoresId=t.STORESID,this.$store.state.CurrentStoresHistoryInfo={storesName:t.NAME,lastvisitTime:t.lastvisitTime,visitCount:t.visitCount},this.$router.push({name:"HistoryVisit",query:{ModifyCustomerattached:"ModifyCustomerInfo"}})}}},ts={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ModifyCustomerInfo"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"CustomerItemInfo"},[s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"ModifyMainHead"},[s("div",[t._v(t._s(t.CustomerNAME))]),t._v(" "),s("div",[t.CustomerInfoData.lastvisitTime?s("div",[s("span",[t._v("最后拜访时间：")]),s("span",[t._v(t._s(t.CustomerInfoData.lastvisitTime))])]):t._e(),t._v(" "),s("div",[s("span",[t._v("拜访次数：")]),s("span",[t._v(t._s(t.CustomerInfoData.visitCount))])])])]),t._v(" "),s("div",{staticClass:"CustomerInfo"},[s("div",[s("span",[t._v("门店级别")]),s("span",[t._v(t._s(t.CustomerInfoData.CUSTOMER_GRADE))])]),t._v(" "),s("div",{staticClass:"CustomerAddr"},[s("span",[t._v("门店地址")]),t._v(" "),s("div",{staticClass:"addr_"},[s("textarea",{attrs:{rows:"3",disabled:""}},[t._v(t._s(t.ADDRESS))])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiugai",on:{click:t.ChangeAddress}})])]),t._v(" "),s("div",[s("span",[t._v("跟进人")]),s("span",[t._v(t._s(t.$store.state.userInfo.userName))])])]),t._v(" "),s("div",{staticClass:"TheContact"},[s("div",[s("span",[t._v("联系人")]),s("i",{staticClass:"iconfont icon-xiugai",on:{click:t.ChangeContacts}})]),t._v(" "),s("div",[s("div",[s("div",[t._v("  "+t._s(t.CONTACT_NAME))]),t._v(" "),s("div",[t._v("  "+t._s(t.CONTACT_TEL))]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-dianhua2",on:{click:function(e){return t.callPhone(t.CONTACT_TEL)}}})])])])]),t._v(" "),s("div",{staticClass:"VisitRecord",on:{click:t.toHistoryVisit}},[t._m(0),t._v(" "),t._m(1)])]),t._v(" "),t.ModifyAddressHide?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses SelectMengContent"},[s("div",{staticClass:"SelectMengItem"},[s("div",{staticClass:"ModifyPrompt"},[t._v("确认将当前位置更新为客户地址吗？")]),t._v(" "),s("div",[s("span",{on:{click:function(e){return t.getCurrAddress()}}},[s("i",{staticClass:"iconfont icon-dizhi"})]),t._v(" "),s("div",{staticClass:"addr_"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.V_ADDRESS,expression:"V_ADDRESS"}],domProps:{value:t.V_ADDRESS},on:{input:function(e){e.target.composing||(t.V_ADDRESS=e.target.value)}}},[t._v(t._s(t.ADDRESS))])])])]),t._v(" "),s("div",{staticClass:"selectBtn"},[s("div",{on:{click:t.ModifyAddressConfirm}},[t._v("确定")]),t._v(" "),s("div",{on:{click:t.ModifyAddressCancel}},[t._v("取消")])])])]):t._e(),t._v(" "),t.ModifyContactsHide?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses SelectMengContent"},[s("div",{staticClass:"SelectMengItem"},[s("div",{staticClass:"ModifyPrompt"},[t._v("确认更新客户联系人吗？")]),t._v(" "),s("div",[s("span",[t._v(" 姓名：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.V_CONTACT_NAME,expression:"V_CONTACT_NAME"}],staticClass:"name",domProps:{value:t.V_CONTACT_NAME},on:{input:function(e){e.target.composing||(t.V_CONTACT_NAME=e.target.value)}}})]),t._v(" "),s("div",[s("span",[t._v(" 电话：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.V_CONTACT_TEL,expression:"V_CONTACT_TEL"}],staticClass:"tel",domProps:{value:t.V_CONTACT_TEL},on:{input:function(e){e.target.composing||(t.V_CONTACT_TEL=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"selectBtn"},[s("div",{on:{click:t.ModifyContactsConfirm}},[t._v("确定")]),t._v(" "),s("div",{on:{click:t.ModifyContactsCancel}},[t._v("取消")])])])]):t._e()])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("拜访记录")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-tiaozhuanqianwangyoujiantouxiangyouxiayibuxianxing"})])}]};var es=s("VU/8")(Ze,ts,!1,function(t){s("X/tL")},"data-v-3b5fb9fa",null).exports,ss={data:function(){return{headerText:"选择地址",AddressListData:[],Address:"",AddressSum:"",city_master_id:"",AddressInfo:"",types:"",province:"",cityChinese:"",districict:"",street:"",CustomerName:"",Channel:"",VisitRouteName:"",VisitRouteNameInsert:"",selectedLine:[],CustomerRemark:"",AddressDetail:"",longitude:"",latitude:""}},components:{componentHeader:_},created:function(){var t=this,e={types:"PROVINCE",city_master_id:t.AddressInfo.city_master_id};t.httpRequest("findCityByType.do",e,function(e){t.AddressListData=e.data}),t.AddressSum+=t.Address,t.$route.query.CustomerName&&(t.CustomerName=t.$route.query.CustomerName),t.$route.query.Channel&&(t.Channel=t.$route.query.Channel),t.$route.query.VisitRouteId&&(t.VisitRouteId=t.$route.query.VisitRouteId),t.$route.query.VisitRouteName&&(t.VisitRouteName=t.$route.query.VisitRouteName),t.$route.query.VisitRouteNameInsert&&(t.VisitRouteNameInsert=t.$route.query.VisitRouteNameInsert),t.$route.query.selectedLine&&(t.selectedLine=t.$route.query.selectedLine),t.$route.query.CustomerRemark&&(t.CustomerRemark=t.$route.query.CustomerRemark),t.$route.query.AddressDetail&&(t.AddressDetail=t.$route.query.AddressDetail),t.$route.query.longitude&&(t.longitude=t.$route.query.longitude),t.$route.query.latitude&&(t.latitude=t.$route.query.latitude)},methods:{f_Fanhui:function(){console.log(11),this.$router.go(-1)},toChooseAddress:function(t){var e=this.AddressListData[t];this.Address=this.AddressListData[t].name,this.province?this.cityChinese?this.districict?this.street||(this.street=this.Address):this.districict=this.Address:this.cityChinese=this.Address:this.province=this.Address,this.AddressSum+=this.Address,""!=e.types?this.selectAddress(e):(this.$store.state.StoreInfo.Location=this.AddressSum,this.$store.state.StoreInfo.province=this.province,this.$store.state.StoreInfo.cityChinese=this.cityChinese,this.$store.state.StoreInfo.districict=this.districict,this.$store.state.StoreInfo.street=this.street,this.$route.query.create_whoPush&&"WeChat"==this.$route.query.create_whoPush?this.$router.push({name:"CreateCustomerWeChat"}):this.$router.push({name:"CreateNewCustomer"}))},selectAddress:function(t){var e=this,s={types:t.types,city_master_id:t.city_master_id};e.httpRequest("findCityByType.do",s,function(t){e.AddressListData=t.data})}}},os={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ChooseAddress"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},t._l(t.AddressListData,function(e,o){return s("div",{key:o,staticClass:"line",attrs:{id:o},on:{click:function(e){return t.toChooseAddress(o)}}},[t._v("\n        "+t._s(e.name)+"\n      ")])}),0)],1)},staticRenderFns:[]};var is=s("VU/8")(ss,os,!1,function(t){s("S+MP")},"data-v-64e6f035",null).exports,as={data:function(){return{headerText:"位置",TextContent:"确定",IfTextShow:!1,lng:0,lat:0,address:"",whoPush:""}},components:{componentHeader:_},created:function(){this.$route.query.whoPush&&(this.whoPush=this.$route.query.whoPush)},mounted:function(){var t=this,e=new AMap.Map("container",{resizeEnable:!0});AMap.plugin("AMap.Geolocation",function(){var s=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonPosition:"RB",buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0});e.addControl(s),s.getCurrentPosition(function(s,o){"complete"==s?t.onComplete(o,e):t.onError(o,e)})})},methods:{f_Fanhui:function(){this.$router.go(-1)},f_Text:function(){this.$store.state.StoreInfo.longitude=this.lng,this.$store.state.StoreInfo.latitude=this.lat,this.$store.state.StoreInfo.lnglat=this.lng+","+this.lat+"（"+this.address+"附近）","CreateNewCustomer"==this.whoPush?this.$router.push({name:"CreateNewCustomer"}):"CreateCustomerWeChat"==this.whoPush&&this.$router.push({name:"CreateCustomerWeChat"})},onComplete:function(t,e){console.log("获取【当前位置】成功",t),this.loadMap(e,t.position)},onError:function(t,e){console.log("获取【当前位置】失败",t);this.loadMap(e,{lng:114.039706,lat:22.622864})},loadMap:function(t,e){console.log(e);var s=this;AMapUI.loadUI(["misc/PositionPicker","misc/PoiPicker"],function(o,i){var a=new o({mode:"dragMap",map:t});a.on("success",function(t){document.getElementById("lnglat").innerHTML=t.position,document.getElementById("address").innerHTML=t.address,s.lng=t.position.lng,s.lat=t.position.lat,s.address=t.address,s.IfTextShow=!0}),a.on("fail",function(t){document.getElementById("lnglat").innerHTML=" ",document.getElementById("address").innerHTML=" ",s.lng=0,s.lat=0,s.address="",s.IfTextShow=!1}),a.start([e.lng,e.lat]),function(e){window.poiPicker=e;var s=new AMap.Marker,o=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)});e.on("poiPicked",function(e){var i=e.source,a=e.item;a.id,a.name,a.location.toString(),a.address;s.setMap(t),o.setMap(t),s.setPosition(a.location),o.setPosition(a.location),o.open(t,s.getPosition()),t.setCenter(s.getPosition())})}(new i({input:"pickerInput"}))})},poiPickerReady:function(t){console.log(432)}}},ns={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ChooseAddress"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfTextShow:t.IfTextShow,TextContent:t.TextContent},on:{f_Fanhui:t.f_Fanhui,f_Text:t.f_Text}}),t._v(" "),s("div",{staticClass:"container",attrs:{id:"container"}}),t._v(" "),t._m(0),t._v(" "),t._m(1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"pickerBox"}},[e("input",{attrs:{id:"pickerInput",placeholder:"输入关键字选取地点"}}),this._v(" "),e("div",{attrs:{id:"poiInfo"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"titleView"},[e("div",{staticClass:"title"},[this._v("选址结果")]),this._v(" "),e("div",{staticClass:"line"},[e("div",{staticClass:"c"},[this._v("经纬度:")]),this._v(" "),e("div",{staticClass:"d",attrs:{id:"lnglat"}})]),this._v(" "),e("div",{staticClass:"line"},[e("div",{staticClass:"c"},[this._v("地址:")]),this._v(" "),e("div",{staticClass:"d",attrs:{id:"address"}})])])}]};var rs=s("VU/8")(as,ns,!1,function(t){s("3sW8")},"data-v-d0119234",null).exports,ds={data:function(){return{headerText:"库存管理",InventoryOspInfo:{}}},components:{componentHeader:_},created:function(){this.InventoryOspInfo=this.$store.state.InventoryOspInfo,this.$store.state.BackBottle={g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},this.$store.state.OptionsAvailableGift=[],this.$store.state.OptionsGiftChosenCart=[]},methods:{f_Fanhui:function(){this.$router.push({name:"Index"})}}},cs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"InventoryManage"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"FunctionPoint"},[t._m(0),t._v(" "),s("router-link",{attrs:{tag:"li",to:"/InventoryQuery"}},[s("i",{staticClass:"iconfont icon-kucunchaxun"}),t._v(" "),s("span",[t._v("库存查询")])]),t._v(" "),s("router-link",{attrs:{tag:"li",to:"/InventoryRegister"}},[s("i",{staticClass:"iconfont icon-indexResident"}),t._v(" "),s("span",[t._v("库存登记")])]),t._v(" "),s("router-link",{attrs:{tag:"li",to:"/WarehousingDetail"}},[s("i",{staticClass:"iconfont icon-ruku"}),t._v(" "),s("span",[t._v("入库明细")])]),t._v(" "),s("router-link",{attrs:{tag:"li",to:"/AllOutgoingDetails"}},[s("i",{staticClass:"iconfont icon-chuku"}),t._v(" "),s("span",[t._v("出库明细")])]),t._v(" "),"osp"==t.$store.state.CurrentRole?s("router-link",{attrs:{tag:"li",to:{path:"/ChooseGoods",query:{whoPush:"InventoryManage",orderType:"OTHER_IN",ReceiptInfo:t.InventoryOspInfo}}}},[s("i",{staticClass:"iconfont icon-qitachukudan"}),t._v(" "),s("span",[t._v("其他入库")])]):t._e(),t._v(" "),"osp"==t.$store.state.CurrentRole?s("router-link",{attrs:{tag:"li",to:{path:"/ChooseGoods",query:{whoPush:"InventoryManage",orderType:"OTHER_OUT",DeliveryInfo:t.InventoryOspInfo}}}},[s("i",{staticClass:"iconfont icon-qitarukudan"}),t._v(" "),s("span",[t._v("其他出库")])]):t._e(),t._v(" "),s("router-link",{attrs:{tag:"li",to:{path:"/ChooseGoods",query:{whoPush:"InventoryManage",orderType:"SALE_RETURN_IN",ReceiptInfo:t.InventoryOspInfo,isShowSelectStore:"ture"}}}},[s("i",{staticClass:"iconfont icon-tuihuo"}),t._v(" "),s("span",[t._v("销售退货")])]),t._v(" "),s("router-link",{attrs:{tag:"li",to:{path:"/ChooseGoods",query:{whoPush:"InventoryManage",orderType:"TRANSFER",DeliveryInfo:t.InventoryOspInfo}}}},[s("i",{staticClass:"iconfont icon-tiaobochuku1"}),t._v(" "),s("span",[t._v("调拨")])])],1),t._v(" "),s("div",{staticClass:"customerInfo"},[t._m(1),t._v(" "),s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("客户类型：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CUSTOMER_TYPE))])]),t._v(" "),s("div",[s("span",[t._v("客户代码：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CUSTOMER_CODE))])]),t._v(" "),s("div",[s("span",[t._v("客户城市：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CUSTOMER_CITY_CHINESE))])])]),t._v(" "),s("div",{staticClass:"customerInfo"},[t._m(2),t._v(" "),s("div",[s("span",[t._v("联系人名：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CONTACT_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联系电话：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CONTACT_TEL)+"   "),s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.InventoryOspInfo.CONTACT_TEL)}}})])]),t._v(" "),s("div",[s("span",[t._v("地址详情：")]),s("span",[t._v(t._s(t.InventoryOspInfo.CUSTOMER_ADDRESS))])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ModuleHead"},[e("span",[this._v("功能")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ModuleHead"},[e("span",[this._v("客户")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ModuleHead"},[e("span",[this._v("联系人")])])}]};var us=s("VU/8")(ds,cs,!1,function(t){s("gGzv")},"data-v-4c4838ce",null).exports,ls={data:function(){return{headerText:"选择门店",StoresListData:[],searchValue:"",noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_},created:function(){this.reqStoresListInfo()},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo()}},methods:{f_Fanhui:function(){if(this.$route.query.whoPush&&this.$route.query.whoPush_order&&this.$route.query.orderType){if("InventoryManage"==this.$route.query.whoPush_order&&"SALE_RETURN_IN"==this.$route.query.orderType)return void this.$router.push({name:this.$route.query.whoPush,query:{whoPush:this.$route.query.whoPush_order,orderType:this.$route.query.orderType}});if("InventoryManage"==this.$route.query.whoPush_order&&("OTHER_IN"==this.$route.query.orderType||"OTHER_OUT"==this.$route.query.orderType))return void this.$router.push({name:this.$route.query.whoPush,query:{whoPush:this.$route.query.whoPush_order,orderType:this.$route.query.orderType}})}this.$router.go(-1)},reqStoresListInfo:function(t){var e=this,s={storeName:e.searchValue,businessId:e.$store.state.businessInfo.businessId,appUsersId:e.$store.state.userInfo.user_id,suppliersId:e.$store.state.InventoryOspInfo.CUSTOMER_ID,currentPage:e.loadPage,numberPerPage:e.numberPerPage};console.log(s),e.httpRequest("searchStore.do",s,function(s){console.log(s),t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.StoresListData=e.StoresListData.concat(s.data)):e.StoresListData=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.StoresListData.length?e.noDataShow=!1:e.noDataShow=!0})},Rebound:function(t){if(this.$route.query.whoPush){if("InventoryRegister"==this.$route.query.whoPush)return this.$store.state.InventoryRegALL_CustomerInfo={CUSTOMER_NAME:this.StoresListData[t].CUSTOMER_NAME,CUSTOMER_ID:this.StoresListData[t].CUSTOMER_ID,CONTACT_NAME:this.StoresListData[t].CONTACT_NAME,CONTACT_TEL:this.StoresListData[t].CONTACT_TEL,CUSTOMER_ADDRESS:this.StoresListData[t].CUSTOMER_ADDRESS},void this.$router.push({name:"CustomerAllInventoryReg"});if(this.$route.query.whoPush_order&&this.$route.query.orderType){var e={CUSTOMER_NAME:this.StoresListData[t].CUSTOMER_NAME,CUSTOMER_ID:this.StoresListData[t].CUSTOMER_ID,CONTACT_NAME:this.StoresListData[t].CONTACT_NAME,CONTACT_TEL:this.StoresListData[t].CONTACT_TEL,CUSTOMER_TEL:this.StoresListData[t].CONTACT_TEL,CUSTOMER_ADDRESS:this.StoresListData[t].CUSTOMER_ADDRESS};if("InventoryManage"==this.$route.query.whoPush_order&&"SALE_RETURN_IN"==this.$route.query.orderType)return void this.$router.push({name:this.$route.query.whoPush,query:{CustomerInfo:e,whoPush:this.$route.query.whoPush_order,orderType:this.$route.query.orderType}});if("InventoryManage"==this.$route.query.whoPush_order&&("OTHER_IN"==this.$route.query.orderType||"OTHER_OUT"==this.$route.query.orderType))return void this.$router.push({name:this.$route.query.whoPush,query:{CustomerInfo:e,whoPush:this.$route.query.whoPush_order,orderType:this.$route.query.orderType}})}this.$router.push({name:this.$route.query.whoPush,query:{CustomerInfo:{CUSTOMER_NAME:this.StoresListData[t].CUSTOMER_NAME,CUSTOMER_ID:this.StoresListData[t].CUSTOMER_ID,CONTACT_NAME:this.StoresListData[t].CONTACT_NAME,CONTACT_TEL:this.StoresListData[t].CONTACT_TEL,CUSTOMER_ADDRESS:this.StoresListData[t].CUSTOMER_ADDRESS}}})}},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqStoresListInfo("BottomLoad"))}}},hs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SelectStores"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按门店名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"StoresList"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.StoresListData,function(e,o){return s("div",{key:o,staticClass:"CustomerListItem",attrs:{id:o},on:{click:function(e){return t.Rebound(o)}}},[s("div",[s("span",[t._v("门店名称：")]),s("span",{staticClass:"CUSTOMER_NAME"},[t._v(t._s(e.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联 系 人 ：")]),s("span",[t._v(t._s(e.CONTACT_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联系电话：")]),s("span",[t._v(t._s(e.CONTACT_TEL)+"   "),e.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(s){return t.callPhone(e.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("详细地址：")]),s("span",[t._v(t._s(e.CUSTOMER_ADDRESS))])])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var vs=s("VU/8")(ls,hs,!1,function(t){s("0SG8")},"data-v-64d66d24",null).exports,_s={data:function(){return{headerText:"选择业务员",StoresListData:[],searchValue:"",noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_},created:function(){this.reqStoresListInfo()},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo()}},methods:{f_Fanhui:function(){this.$route.query.whoPush&&"InventoryManage"==this.$route.query.whoPush_order&&"TRANSFER"==this.$route.query.orderType?this.$router.push({name:this.$route.query.whoPush,query:{whoPush:this.$route.query.whoPush_order,orderType:this.$route.query.orderType,IFreceORdeliv_transition:this.$route.query.IFreceORdeliv_transition}}):this.$router.go(-1)},reqStoresListInfo:function(t){var e=this,s={storeName:e.searchValue,cellphone:e.$store.state.userInfo.cellphone,userId:e.$store.state.userInfo.user_id,suppliersId:e.$store.state.InventoryOspInfo.CUSTOMER_ID,currentPage:e.loadPage,numberPerPage:e.numberPerPage};console.log(s),e.httpRequest("findUserList.do",s,function(s){console.log(s),t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.StoresListData=e.StoresListData.concat(s.data)):e.StoresListData=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.StoresListData.length?e.noDataShow=!1:e.noDataShow=!0})},Rebound:function(t){if(this.$route.query.whoPush){if(this.$route.query.whoPush&&"InventoryManage"==this.$route.query.whoPush_order&&"TRANSFER"==this.$route.query.orderType)return void this.$router.push({name:this.$route.query.whoPush,query:{CustomerInfo:{CUSTOMER_ID:this.StoresListData[t].APP_USERS_ID,CONTACT_NAME:this.StoresListData[t].USER_NAME,CONTACT_TEL:this.StoresListData[t].CELLPHONE,CUSTOMER_TEL:this.StoresListData[t].CELLPHONE},whoPush:this.$route.query.whoPush_order,orderType:this.$route.query.orderType,IFreceORdeliv_transition:this.$route.query.IFreceORdeliv_transition}});this.$router.push({name:this.$route.query.whoPush,query:{CustomerInfo:{CUSTOMER_NAME:this.StoresListData[t].CUSTOMER_NAME,CUSTOMER_ID:this.StoresListData[t].CUSTOMER_ID,CONTACT_NAME:this.StoresListData[t].CONTACT_NAME,CONTACT_TEL:this.StoresListData[t].CONTACT_TEL,CUSTOMER_ADDRESS:this.StoresListData[t].CUSTOMER_ADDRESS}}})}},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqStoresListInfo("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqStoresListInfo("BottomLoad"))}}},ps={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SelectSalesman"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按业务员姓名搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"ListBox"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.StoresListData,function(e,o){return s("div",{key:o,staticClass:"CustomerListItem",attrs:{id:o},on:{click:function(e){return t.Rebound(o)}}},[s("div",[s("span",[t._v("业务员姓名：")]),s("span",{staticClass:"CUSTOMER_NAME"},[t._v(t._s(e.USER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联 系 电 话：")]),s("span",[t._v(t._s(e.CELLPHONE))]),t._v("   "),e.CELLPHONE?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(s){return t.callPhone(e.CELLPHONE)}}}):t._e()])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var fs=s("VU/8")(_s,ps,!1,function(t){s("LXTj")},"data-v-1676a49f",null).exports,ms={data:function(){return{headerText:"库存查询",totalNum:0,SortCondition:!1,ObjectType:"OSP",searchValue:"",goodsArr:[],noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,LicensePlate_Show:!1,LicensePlateList_Show:!1,LicenseList:[],PlateDisplay:"",UserIdx:""}},components:{componentHeader:_},mounted:function(){var t=parseFloat(h()(".headFixed").css("height"))+parseFloat(h()("header").css("height"))+"px";h()(".ListBox").css("paddingTop",t)},created:function(){this.SwitchBtnWarehouse()},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects(this.ObjectType)}},methods:{f_Fanhui:function(){this.$router.go(-1)},dealQty:function(t){if(""==t.UNIT_BX_STR)return t.QUANTITY+t.UNIT_STR;var e=Math.floor(t.QUANTITY/t.BX_ZHL),s=t.QUANTITY%t.BX_ZHL,o="";return 0!=e&&(o=e+t.UNIT_BX_STR),0!=s&&(o=o+s+t.UNIT_STR),o},SwitchRegObjects:function(t,e){var s=this;this.ObjectType=t,"OSP"==t?(h()(".tabHead>div:eq(0)>span").addClass("tabHead_active"),h()(".tabHead>div:eq(1)>span").removeClass("tabHead_active"),h()(".BtnComponent").css("display","block")):"CarSales"==t&&(h()(".tabHead>div:eq(1)>span").addClass("tabHead_active"),h()(".tabHead>div:eq(0)>span").removeClass("tabHead_active"),h()(".BtnComponent").css("display","none"));var o={types:t,appUserId:s.LicenseList.length>0?s.LicenseList[s.UserIdx].APP_USERS_ID:s.$store.state.userInfo.user_id,suppliersId:s.$store.state.InventoryOspInfo.CUSTOMER_ID,strProductName:s.searchValue,currentPage:s.loadPage,numberPerPage:s.numberPerPage};console.log(o),s.httpRequest("searchTransferInventory.do",o,function(t){console.log(t),e&&("TopLoad"==e?s.$refs.loadmore.onTopLoaded():"BottomLoad"==e&&s.$refs.loadmore.onBottomLoaded()),s.loadPage>1?t.data.detail.length&&(s.goodsArr=s.goodsArr.concat(t.data.detail)):s.goodsArr=t.data.detail,t.data.detail.length<s.numberPerPage?s.allLoaded=!0:s.allLoaded=!1,s.totalNum=t.data.sumQTY,s.goodsArr.length?s.noDataShow=!1:s.noDataShow=!0})},SwitchBtnWarehouse:function(){this.LicensePlate_Show=!1,this.UserIdx="",this.LicenseList=[],this.$nextTick(function(){var t=parseFloat(h()(".headFixed").css("height"))+parseFloat(h()("header").css("height"))+"px";h()(".ListBox").css("paddingTop",t)}),this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects("OSP")},SwitchBtnCar:function(){var t=this,e={storeName:"",cellphone:t.$store.state.userInfo.cellphone,userId:t.$store.state.userInfo.user_id,suppliersId:t.$store.state.InventoryOspInfo.CUSTOMER_ID};console.log(e),t.httpRequest("findUserList.do",e,function(e){console.log(e),e.data.length?(t.PlateDisplay=e.data[0].USER_NAME,t.LicenseList=e.data,t.UserIdx=0,t.LicensePlate_Show=!0,t.$nextTick(function(){var t=parseFloat(h()(".headFixed").css("height"))+parseFloat(h()("header").css("height"))+"px";h()(".ListBox").css("paddingTop",t)}),t.loadPage=1,t.allLoaded=!1,t.SwitchRegObjects("CarSales")):(t.LicenseList=[],t.$alert("未绑定业务员","提示",{confirmButtonText:"确定"}))})},ChooseLicense:function(t){this.PlateDisplay=this.LicenseList[t].USER_NAME,h()(".LicenseList").animate({height:0},500),h()(".icon-xiangxia").css({transform:"rotate(0)"}),this.LicensePlateList_Show=!1,this.UserIdx=t,this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects("CarSales")},SelectLicensePlate:function(){if(!(this.LicenseList.length<=1)){if(this.LicensePlateList_Show)h()(".LicenseList").animate({height:0},500),h()(".icon-xiangxia").css({transform:"rotate(0)"});else{var t=parseFloat(h()(".LicenseList>div").css("height")),e=this.LicenseList.length*(t+1);h()(".LicenseList").animate({height:e},500),h()(".icon-xiangxia").css({transform:"rotate(180deg)"})}this.LicensePlateList_Show=!this.LicensePlateList_Show}},toInventoryDetails:function(){this.$router.push({name:"InventoryDetails"})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects(this.ObjectType,"TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.SwitchRegObjects(this.ObjectType,"BottomLoad"))}}},Cs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"InventoryQuery"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer",staticStyle:{overflow:"scroll"}},[s("div",{staticClass:"headFixed"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按商品名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"ConditionsSort"},[s("div",{staticClass:"tabHead"},[s("div",[s("span",{staticClass:"tabHead_active",on:{click:t.SwitchBtnWarehouse}},[t._v("仓库库存")])]),t._v(" "),s("div",[s("span",{on:{click:t.SwitchBtnCar}},[t._v("车销库存")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.LicensePlate_Show,expression:"LicensePlate_Show"}],staticClass:"ChooseLicensePlate"},[s("div",{staticClass:"CurrentLicensePlate",on:{click:t.SelectLicensePlate}},[s("div",[s("span",[t._v(t._s(t.PlateDisplay))]),t._v(" "),t.LicenseList&&t.LicenseList.length>1?s("i",{staticClass:"iconfont icon-xiangxia"}):t._e()])]),t._v(" "),s("div",{staticClass:"LicenseList"},t._l(t.LicenseList,function(e,o){return s("div",{key:o,attrs:{id:o},on:{click:function(e){return t.ChooseLicense(o)}}},[t._v(t._s(e.USER_NAME))])}),0)])])]),t._v(" "),s("div",{staticClass:"ListBox"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[s("div",{staticClass:"ListContent"},t._l(t.goodsArr,function(e,o){return s("div",{key:o,staticClass:"ListItem",attrs:{id:o}},[s("div",{staticClass:"listLeft"},[s("div",[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",[s("span",[t._v("产品编号：")]),s("span",[t._v(t._s(e.PRODUCT_CODE))])])]),t._v(" "),s("div",{staticClass:"listCenter"},[s("span",[t._v(t._s(t.dealQty(e)))])])])}),0)]),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var gs=s("VU/8")(ms,Cs,!1,function(t){s("WYsb")},"data-v-1c54632f",null).exports,Ts={data:function(){return{headerText:"库存详情",TextContent:"流水",ProductNo:"",ProductName:"",ProductTotalNum:"",DateEdit:"",batchArr:[]}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)},f_Text:function(){this.$router.push({name:"AccessDetails"})}}},Is={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"InventoryDetails"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfTextShow:!0,TextContent:t.TextContent},on:{f_Fanhui:t.f_Fanhui,f_Text:t.f_Text}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("产品信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("产品编号：")]),s("span",[t._v(t._s(t.ProductNo))])]),t._v(" "),s("div",[s("span",[t._v("产品名称：")]),s("span",[t._v(t._s(t.ProductName))])]),t._v(" "),s("div",[s("span",[t._v("库存数量：")]),s("span",[t._v(t._s(t.ProductTotalNum))])]),t._v(" "),s("div",[s("span",[t._v("编辑时间：")]),s("span",[t._v(t._s(t.DateEdit))])])])]),t._v(" "),s("div",{staticClass:"goodsInfo"},[s("div",{staticClass:"infoHead"},[t._v("批次信息")]),t._v(" "),t._l(t.batchArr,function(e,o){return s("div",{key:o,staticClass:"batchInfo",attrs:{id:o}},[s("div",{staticClass:"batchLeft"},[s("div",[s("span",[t._v("库存批次：")]),s("span",[t._v(t._s(e.InventoryBatch))])]),t._v(" "),s("div",[s("span",[t._v("生产日期：")]),s("span",[t._v(t._s(e.DateProduction))])]),t._v(" "),s("div",[s("span",[t._v("操作日期：")]),s("span",[t._v(t._s(e.DateOperation))])])]),t._v(" "),s("div",{staticClass:"batchRight"},[s("span",[t._v(t._s(e.productNum)+" "+t._s(e.productUom))])])])})],2)])],1)},staticRenderFns:[]};var Ss=s("VU/8")(Ts,Is,!1,function(t){s("2S6b")},"data-v-e202f922",null).exports,ys={data:function(){return{headerText:"出入详情",AccessRecordsArr:[]}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)}}},Ds={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AccessDetails"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},t._l(t.AccessRecordsArr,function(e,o){return s("div",{key:o,staticClass:"batchInfo",attrs:{id:o}},[s("div",{staticClass:"batchLeft"},[s("div",[s("span",[t._v("库存批次：")]),t._v(" "),s("span",[t._v(t._s(e.InventoryBatch))])]),t._v(" "),s("div",[s("span",[t._v("生产日期：")]),t._v(" "),s("span",[t._v(t._s(e.DateProduction))])]),t._v(" "),s("div",[s("span",[t._v("操作日期：")]),t._v(" "),s("span",[t._v(t._s(e.DateOperation))])])]),t._v(" "),s("div",{staticClass:"batchRight"},[e.outboundFlag?s("span",[t._v("-")]):t._e(),s("span",[t._v(t._s(e.productNum)+" "+t._s(e.productUom))])])])}),0)],1)},staticRenderFns:[]};var Rs=s("VU/8")(ys,Ds,!1,function(t){s("NzKg")},"data-v-7684f8b6",null).exports,Es={data:function(){return{headerText:"库存登记",listData:[],MonthDisplay:"选择库存月份",selectMonthHide:!1,StartMonth:"",EndMonth:"",searchValue:"",ObjectType:"store",noDataShow:!1,pickerOptions:{shortcuts:[{text:"本月",onClick:function(t){t.$emit("pick",[new Date,new Date])}},{text:"今年至今",onClick:function(t){var e=new Date,s=new Date((new Date).getFullYear(),0);t.$emit("pick",[s,e])}},{text:"最近六个月",onClick:function(t){var e=new Date,s=new Date;s.setMonth(s.getMonth()-6),t.$emit("pick",[s,e])}}]},numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_},created:function(){this.SwitchBtnStore()},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects(this.ObjectType)}},methods:{f_Fanhui:function(){this.$router.push({name:"InventoryManage"})},SwitchRegObjects:function(t,e){var s=this;this.ObjectType=t,"store"==t?(h()(".tabHead>div:eq(0)>span").addClass("tabHead_active"),h()(".tabHead>div:eq(1)>span").removeClass("tabHead_active"),h()(".BtnComponent").css("display","block")):"customer"==t&&(h()(".tabHead>div:eq(1)>span").addClass("tabHead_active"),h()(".tabHead>div:eq(0)>span").removeClass("tabHead_active"),h()(".BtnComponent").css("display","none"));var o={strCustomerName:s.searchValue,strRegStartTime:s.StartMonth,strRegEndTime:s.EndMonth,currentPage:s.loadPage,numberPerPage:s.numberPerPage,types:t,ospId:s.$store.state.InventoryOspInfo.CUSTOMER_ID,businessId:s.$store.state.businessInfo.businessId,orgnizationId:"",userId:s.$store.state.userInfo.user_id,cellphone:s.$store.state.userInfo.cellphone};console.log(o),s.httpRequest("GetRegisterList.do",o,function(t){console.log(t),e&&("TopLoad"==e?s.$refs.loadmore.onTopLoaded():"BottomLoad"==e&&s.$refs.loadmore.onBottomLoaded()),s.loadPage>1?t.data.length&&(s.listData=s.listData.concat(t.data)):s.listData=t.data,t.data.length<s.numberPerPage?s.allLoaded=!0:s.allLoaded=!1,s.listData.length?s.noDataShow=!1:s.noDataShow=!0})},SwitchBtnStore:function(){this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects("store")},SwitchBtnCustomer:function(){this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects("customer")},toSelectStore:function(){this.$router.push({name:"SelectStores",query:{whoPush:"InventoryRegister"}})},f_Add:function(){this.$router.push({name:"AddInventory",query:{inventoryReg:"inventoryReg"}})},SelectMonthShow:function(){this.selectMonthHide=!0},selectMonthConfirm:function(){if(!this.StartMonth&&!this.EndMonth)return this.EndMonth="",this.StartMonth="",this.MonthDisplay="选择库存月份",this.selectMonthHide=!1,void h()(".MonthDisplay").css({color:"#666","border-color":"#666"});this.StartMonth&&!this.EndMonth&&(this.EndMonth=this.StartMonth),!this.StartMonth&&this.EndMonth&&(this.StartMonth=this.EndMonth);var t=[this.StartMonth,this.EndMonth].sort(function(t,e){return Date.parse(t)-Date.parse(e)});this.StartMonth=t[0],this.EndMonth=t[1],this.MonthDisplay=this.StartMonth+"至"+this.EndMonth,this.StartMonth==this.EndMonth&&(this.MonthDisplay=this.StartMonth),h()(".MonthDisplay").css({color:"#1e8cf8","border-color":"#1e8cf8"}),this.selectMonthHide=!1,this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects(this.ObjectType)},selectMonthCancel:function(){this.selectMonthHide=!1},inventoryDetail:function(t){this.$router.push({name:"InventoryRegDetail",query:{inventoryRegisterId:this.listData[t].INVENTORY_REGISTER_ID,ObjectType:this.ObjectType}})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.SwitchRegObjects(this.ObjectType,"TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.SwitchRegObjects(this.ObjectType,"BottomLoad"))}}},Ls={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"InventoryRegister"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfAddShow:!0},on:{f_Fanhui:t.f_Fanhui,f_Add:t.f_Add}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"headFixed"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按客户名称搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})]),t._v(" "),s("div",{staticClass:"MonthDisplay",on:{click:t.SelectMonthShow}},[t._v(t._s(t.MonthDisplay))])]),t._v(" "),s("div",{staticClass:"tabHead"},[s("div",[s("span",{staticClass:"tabHead_active",on:{click:t.SwitchBtnStore}},[t._v("门店")])]),t._v(" "),s("div",[s("span",{on:{click:t.SwitchBtnCustomer}},[t._v("客户")])])])]),t._v(" "),s("div",{staticClass:"ListBox"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.listData,function(e,o){return s("div",{key:o,staticClass:"inventoryList",attrs:{id:o},on:{click:function(e){return t.inventoryDetail(o)}}},[s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(e.NAME))])]),t._v(" "),s("div",[s("span",[t._v("客户代码：")]),s("span",[t._v(t._s(e.CODE))])]),t._v(" "),s("div",[s("span",[t._v("库存月份：")]),s("span",[t._v(t._s(e.INVENTORY_TIME))])]),t._v(" "),s("div",[s("span",[t._v("填表日期：")]),s("span",[t._v(t._s(e.ADDDATE))])])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()]),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.toSelectStore}},[t._v("选择具体门店")])]),t._v(" "),t.selectMonthHide?s("div",{staticClass:"SelectMeng"},[s("div",{staticClass:"SelectWarehouses SelectMengContent"},[s("div",{staticClass:"SelectTitle SelectMengTitle"},[t._v("请选择库存月份")]),t._v(" "),s("div",{staticClass:"SelectItem"},[s("div",[s("span",[t._v("开始月份")]),t._v(" "),s("el-date-picker",{attrs:{type:"month",editable:!1,placeholder:"选择月",format:"yyyy 年 MM 月","value-format":"yyyy-MM"},model:{value:t.StartMonth,callback:function(e){t.StartMonth=e},expression:"StartMonth"}})],1),t._v(" "),s("div",[s("span",[t._v("结束月份")]),t._v(" "),s("el-date-picker",{attrs:{type:"month",editable:!1,placeholder:"选择月",format:"yyyy 年 MM 月","value-format":"yyyy-MM"},model:{value:t.EndMonth,callback:function(e){t.EndMonth=e},expression:"EndMonth"}})],1)]),t._v(" "),s("div",{staticClass:"selectBtn"},[s("div",{on:{click:t.selectMonthCancel}},[t._v("取消")]),t._v(" "),s("div",{on:{click:t.selectMonthConfirm}},[t._v("确定")])])])]):t._e()],1)},staticRenderFns:[]};var Ps=s("VU/8")(Es,Ls,!1,function(t){s("XOk4")},"data-v-08e0207e",null).exports,Os={data:function(){return{headerText:"库存登记详情",InventoryInfoList:[],Stock:{},ObjectType:""}},components:{componentHeader:_},created:function(){var t,e=this;if(this.$route.query.inventoryRegisterId){t=this.$route.query.inventoryRegisterId,this.$route.query.ObjectType&&(e.ObjectType=e.$route.query.ObjectType);var s={inventoryRegisterId:t};console.log(s),e.httpRequest("GetRegister.do",s,function(t){console.log(t),e.Stock=t.data.data,e.InventoryInfoList=t.data.detail})}else e.$alert("这条记录没有id，请重新请求","提示",{confirmButtonText:"确定"})},methods:{f_Fanhui:function(){this.$router.go(-1)},viewAllData:function(){this.$store.state.InventoryRegALL_CustomerInfo={CUSTOMER_NAME:this.Stock.name,CUSTOMER_ID:this.Stock.orgnizationId,CONTACT_NAME:this.Stock.contactName,CONTACT_TEL:this.Stock.smNo,CUSTOMER_ADDRESS:this.Stock.address1},this.$router.push({name:"CustomerAllInventoryReg"})}}},As={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"InventoryRegDetail"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("客户信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("业务名称：")]),s("span",[t._v(t._s(t.Stock.businessName))])]),t._v(" "),s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(t.Stock.name))])]),t._v(" "),s("div",[s("span",[t._v("客户代码：")]),s("span",[t._v(t._s(t.Stock.code))])]),t._v(" "),s("div",[s("span",[t._v("库存月份：")]),s("span",[t._v(t._s(t.Stock.inventoryTime))])]),t._v(" "),s("div",[s("span",[t._v("填表日期：")]),s("span",[t._v(t._s(t.Stock.createTime))])])]),t._v(" "),s("div",{staticClass:"infoHead"},[t._v("库存信息")]),t._v(" "),t._l(t.InventoryInfoList,function(e,o){return s("div",{key:o,staticClass:"infoContainer",attrs:{id:o}},[s("div",{staticStyle:{color:"#000","font-weight":"900"}},[t._v(t._s(e.PRODUCTNAME))]),t._v(" "),s("div",[s("span",[t._v("产品代码：")]),t._v(" "),s("span",[t._v(t._s(e.PRODUCTCODE))])]),t._v(" "),s("div",[s("span",[t._v("生产日期：")]),t._v(" "),s("span",[t._v(t._s(e.PRODUCETIME))])]),t._v(" "),s("div",[s("span",[t._v("到期日期：")]),t._v(" "),s("span",[t._v(t._s(e.ENDTIME))])]),t._v(" "),s("div",[s("div",[s("span",[t._v("库存数量：")]),t._v(" "),s("span",[t._v(t._s(e.INVENTORY))])]),t._v(" "),s("div",[s("span",[t._v("保质期：")]),t._v(" "),s("span",[t._v(t._s(e.PERIODOFVALIDITY)+"天")])])]),t._v(" "),s("div",[s("div",[s("span",[t._v("产品货龄：")]),t._v(" "),s("span",[t._v(t._s(e.PRODUCTHL))])]),t._v(" "),s("div",[s("span",[t._v("填表时货龄：")]),t._v(" "),s("span",[t._v(t._s(e.CREATEHL))])])]),t._v(" "),s("div",[s("div",[s("span",[t._v("货龄状态：")]),t._v(" "),s("span",[t._v(t._s(e.PRODUCTHLZT))])]),t._v(" "),s("div",[s("span",[t._v("填表货龄状态：")]),t._v(" "),s("span",[t._v(t._s(e.CREATEHLZT))])])])])})],2)]),t._v(" "),"store"==t.ObjectType?s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{on:{click:t.viewAllData}},[t._v("查看该客户所有库存登记")])]):t._e()],1)},staticRenderFns:[]};var Ns=s("VU/8")(Os,As,!1,function(t){s("faXu")},"data-v-12b76abc",null).exports,xs={data:function(){return{headerText:"登记库存",InventoryMonth:"",CurrentDate:"",CustomerInfo:{},ProductList:[],finalGoodsList:[],selectCustomerFlag:!1,custoType:"",AddInvPagesData:[],numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1,noDataShow:!1,expireTimeOption:{disabledDate:function(t){return t.getTime()>=Date.now()}}}},components:{componentHeader:_},created:function(){this.CurrentDate=this.getNowTime("getDate");var t=this.$store.state.AddInventory_pagesData;this.AddInvPagesData=t,t.InventoryMonth&&(this.InventoryMonth=t.InventoryMonth),t.CustomerInfo&&(this.CustomerInfo=t.CustomerInfo),t.selectCustomerFlag&&(this.selectCustomerFlag=t.selectCustomerFlag),this.$route.query.CustomerInfo&&this.$route.query.CustomerInfo.CUSTOMER_NAME&&(this.custoType="store",this.selectCustomerFlag=!0,this.CustomerInfo=this.$route.query.CustomerInfo),this.reqGoodsList()},methods:{f_Fanhui:function(){this.$store.state.AddInventory_pagesData={},this.$router.push({name:"InventoryRegister"})},reqGoodsList:function(t){var e=this,s={productName:"",appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,productBrand:"",productType:"",currentPage:e.loadPage,numberPerPage:e.numberPerPage,consignee_id:"",userType:e.$store.state.G_AppOrWX};console.log(s),e.httpRequest("searchProductList.do",s,function(s){console.log(s),t&&"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded();for(var o=0;o<s.data.length;o++)s.data[o].QtyList=[{InventoryQty:"",DateInProduced:""}];if(s.data.length){var i=e.AddInvPagesData;if(e.AddInvPagesData.ProductList)for(var a=0;a<i.ProductList.length;a++)for(var n=0;n<s.data.length;n++)i.ProductList[a].productId==s.data[n].PRODUCT_ID&&(s.data[n].QtyList[0].InventoryQty||s.data[n].QtyList[0].produceTime?s.data[n].QtyList[s.data[n].QtyList.length]={InventoryQty:i.ProductList[a].inventory,DateInProduced:i.ProductList[a].produceTime}:(s.data[n].QtyList[0].InventoryQty=i.ProductList[a].inventory,s.data[n].QtyList[0].DateInProduced=i.ProductList[a].produceTime))}e.loadPage>1?s.data.length&&(e.ProductList=e.ProductList.concat(s.data)):e.ProductList=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.ProductList.length?e.noDataShow=!1:e.noDataShow=!0})},ReSelect:function(){this.selectCustomerFlag=!1,this.CustomerInfo={}},setNew:function(t){this.ProductList[t].QtyList.push({InventoryQty:"",DateInProduced:""})},deleteOne:function(t){this.ProductList[t].QtyList.length>1&&this.ProductList[t].QtyList.pop()},SelectOsp:function(){this.selectCustomerFlag=!0;var t=this.$store.state.InventoryOspInfo;this.custoType="customer",this.$store.state.AddInventory_pagesData.custoType="customer",this.CustomerInfo={CUSTOMER_NAME:t.CUSTOMER_NAME,CONTACT_NAME:t.CONTACT_NAME,CONTACT_TEL:t.CONTACT_TEL,CUSTOMER_ADDRESS:t.CUSTOMER_ADDRESS}},toSelectStores:function(){var t=[];this.$store.state.AddInventory_pagesData.InventoryMonth=this.InventoryMonth;for(var e=0;e<this.ProductList.length;e++)for(var s=0;s<this.ProductList[e].QtyList.length;s++)(this.ProductList[e].QtyList[s].DateInProduced||this.ProductList[e].QtyList[s].InventoryQty)&&(t[t.length]={productId:this.ProductList[e].PRODUCT_ID,inventory:this.ProductList[e].QtyList[s].InventoryQty,produceTime:this.ProductList[e].QtyList[s].DateInProduced});this.$store.state.AddInventory_pagesData.ProductList=t,this.$router.push({name:"SelectStores",query:{whoPush:"AddInventory"}})},preview:function(){var t=[];if(this.InventoryMonth)if(this.selectCustomerFlag){for(var e=0;e<this.ProductList.length;e++)for(var s=0;s<this.ProductList[e].QtyList.length;s++){if(this.ProductList[e].QtyList[s].InventoryQty<=0&&(this.ProductList[e].QtyList[s].InventoryQty=""),this.ProductList[e].QtyList[s].InventoryQty&&!this.ProductList[e].QtyList[s].DateInProduced)return void this.$alert("库存数量有值时，生产日期不能为空","提示",{confirmButtonText:"确定"});if(this.ProductList[e].QtyList[s].DateInProduced&&!this.ProductList[e].QtyList[s].InventoryQty)return void this.$alert("生产日期有值时，库存数量不能为空","提示",{confirmButtonText:"确定"});this.ProductList[e].QtyList[s].DateInProduced&&this.ProductList[e].QtyList[s].InventoryQty&&(t[t.length]={productId:this.ProductList[e].PRODUCT_ID,productName:this.ProductList[e].PRODUCT_NAME,unitPrice:this.ProductList[e].UNIT_PRICE,productDesc:this.ProductList[e].PRODUCT_DESC,inventory:this.ProductList[e].QtyList[s].InventoryQty,produceTime:this.ProductList[e].QtyList[s].DateInProduced,UNIT_OF_MEASURE_STR:this.ProductList[e].UNIT_OF_MEASURE_STR})}if(t.length){var o=this.$store.state.AddInventory_pagesData;o.InventoryMonth=this.InventoryMonth,o.ProductList=t,o.CustomerInfo=this.CustomerInfo,o.selectCustomerFlag=this.selectCustomerFlag,o.fillingDate=this.CurrentDate,o.custoType=this.custoType,this.$router.push({name:"AddInventoryConfirmInfo"})}else this.$alert("没有操作库存数量哦","提示",{confirmButtonText:"确定"})}else this.$alert("请选择客户信息","提示",{confirmButtonText:"确定"});else this.$alert("请选择库存月份","提示",{confirmButtonText:"确定"})},onblur:function(t,e){this.ProductList[t].QtyList[e].InventoryQty<=0&&(this.ProductList[t].QtyList[e].InventoryQty="")},clearInput_check:function(t,e){this.ProductList[t].QtyList[e].DateInProduced=""},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqGoodsList("BottomLoad"))}}},$s={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AddInventory"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("mt-loadmore",{ref:"loadmore",attrs:{bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","bottom-method":t.loadBottom,autoFill:t.autoFill}},[s("div",{staticClass:"dateHead"},[s("div",[s("span",[t._v("库存月份：")]),t._v(" "),s("el-date-picker",{attrs:{editable:!1,type:"month",placeholder:"选择月",format:"yyyy 年 MM 月","value-format":"yyyy-MM"},model:{value:t.InventoryMonth,callback:function(e){t.InventoryMonth=e},expression:"InventoryMonth"}})],1),t._v(" "),s("div",[s("span",[t._v("填表日期：")]),s("span",[t._v(t._s(t.CurrentDate))])])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("客户信息")]),t._v(" "),t.selectCustomerFlag?s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(t.CustomerInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联 系 人 ：")]),s("span",[t._v(t._s(t.CustomerInfo.CONTACT_NAME)+"   "+t._s(t.CustomerInfo.CONTACT_TEL)+"   "),t.CustomerInfo.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.storesData.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("详细地址：")]),s("span",[t._v(t._s(t.CustomerInfo.CUSTOMER_ADDRESS))])])]):t._e(),t._v(" "),t.selectCustomerFlag?s("div",{staticClass:"reselect"},[s("span",{on:{click:t.ReSelect}},[t._v("重新选择")])]):t._e(),t._v(" "),t.selectCustomerFlag?t._e():s("div",{staticClass:"BtnComponent"},[s("div",{on:{click:t.toSelectStores}},[t._v("选择门店")]),t._v(" "),s("div",{on:{click:t.SelectOsp}},[t._v("选择客户")])])]),t._v(" "),s("div",{staticClass:"inv_goods"},[s("div",{staticClass:"infoHead"},[t._v("货物信息")]),t._v(" "),t._l(t.ProductList,function(e,o){return s("div",{key:o,staticClass:"infoContainer",attrs:{id:o}},[s("div",{staticClass:"inv_goodsInfo"},[s("div",{staticClass:"inventoryLeft"},[s("div",{staticStyle:{"font-weight":"900"}},[t._v(t._s(e.PRODUCT_NAME))]),t._v(" "),s("div",[s("span",[t._v("规格：")]),s("span",[t._v(t._s(e.PRODUCT_DESC))])]),t._v(" "),s("div",[s("span",[t._v("原价：")]),s("span",[t._v(t._s(e.UNIT_PRICE))])])]),t._v(" "),s("div",{staticClass:"inventoryRight"},[s("i",{staticClass:"iconfont icon-Untitled-",on:{click:function(e){return t.deleteOne(o)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-jia1",on:{click:function(e){return t.setNew(o)}}})])]),t._v(" "),t._l(e.QtyList,function(i,a){return s("div",{key:a,staticClass:"InventoryQty",attrs:{id:a}},[s("div",{staticClass:"_inventoryQty"},[s("span",[t._v("库存数量：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:i.InventoryQty,expression:"QtyName.InventoryQty"}],attrs:{type:"number",pattern:"[0-9]*"},domProps:{value:i.InventoryQty},on:{blur:function(e){return t.onblur(o,a)},input:function(e){e.target.composing||t.$set(i,"InventoryQty",e.target.value)}}}),t._v(" "),s("span",[t._v(t._s(e.UNIT_OF_MEASURE_STR))])]),t._v(" "),s("div",{staticClass:"_inventoryDate"},[s("span",[t._v("生产日期：")]),t._v(" "),s("el-date-picker",{attrs:{editable:!1,type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd","picker-options":t.expireTimeOption},model:{value:i.DateInProduced,callback:function(e){t.$set(i,"DateInProduced",e)},expression:"QtyName.DateInProduced"}}),t._v(" "),s("span",{staticClass:"DateInProduced"},[t._v(t._s(i.DateInProduced))]),t._v(" "),i.DateInProduced?s("i",{staticClass:"iconfont icon-guanbi",on:{click:function(e){return t.clearInput_check(o,a)}}}):t._e()],1)])})],2)})],2)]),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e(),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{staticClass:"onlyBtn",on:{click:t.preview}},[t._v("预览")])])],1)},staticRenderFns:[]};var bs=s("VU/8")(xs,$s,!1,function(t){s("jdbw")},"data-v-6e97d71d",null).exports,ws={data:function(){return{headerText:"确认登记库存",InventoryMonth:"",CurrentDate:"",CustomerInfo:{},ProductList:[],custoType:"",ifTips:!1,tips_Msg:""}},components:{componentHeader:_},created:function(){var t=this.$store.state.AddInventory_pagesData;t.InventoryMonth&&(this.InventoryMonth=t.InventoryMonth),t.CustomerInfo&&(this.CustomerInfo=t.CustomerInfo),t.ProductList&&(this.ProductList=t.ProductList),t.fillingDate&&(this.CurrentDate=t.fillingDate),t.custoType&&(this.custoType=t.custoType)},methods:{f_Fanhui:function(){this.$router.go(-1)},AddConfirm:function(){var t=this;this.$confirm("确定要提交吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e,s;"store"==t.custoType?(e=t.$store.state.InventoryOspInfo.CUSTOMER_ID,s=t.CustomerInfo.CUSTOMER_ID):(e="",s=t.$store.state.InventoryOspInfo.CUSTOMER_ID);var o={businessId:t.$store.state.businessInfo.businessId,businessCode:t.$store.state.businessInfo.businessCode,ospId:e,orgnizationId:s,inventoryTime:t.InventoryMonth,strInventory:t.ProductList,type:t.custoType,userId:t.$store.state.userInfo.user_id,cellphone:t.$store.state.userInfo.cellphone};console.log(o),t.httpRequest("saveRegister.do",o,function(e){console.log(e),t.$store.state.AddInventory_pagesData={},t.ifTips=!0,t.tips_Msg="操作成功",setTimeout(function(){t.$router.push({name:"InventoryRegister"})},2e3)})}).catch(function(){})}}},Ms={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AddInventoryConfirmInfo"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"dateHead"},[s("div",[s("span",[t._v("库存月份：")]),s("span",[t._v(t._s(t.InventoryMonth))])]),t._v(" "),s("div",[s("span",[t._v("填表日期：")]),s("span",[t._v(t._s(t.CurrentDate))])])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("客户信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(t.CustomerInfo.CUSTOMER_NAME))])]),t._v(" "),s("div",[s("span",[t._v("联 系 人 ：")]),s("span",[t._v(t._s(t.CustomerInfo.CONTACT_NAME)+"   "+t._s(t.CustomerInfo.CONTACT_TEL)+"   "),t.CustomerInfo.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.storesData.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("详细地址：")]),s("span",[t._v(t._s(t.CustomerInfo.CUSTOMER_ADDRESS))])])])]),t._v(" "),s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"infoHead"},[t._v("货物信息")]),t._v(" "),t._l(t.ProductList,function(e,o){return s("div",{key:o,staticClass:"infoContainer",attrs:{id:o}},[s("div",{staticClass:"productName",staticStyle:{color:"#000","font-weight":"900"}},[t._v(t._s(e.productName))]),t._v(" "),s("div",[s("span",[t._v("规       格：")]),s("span",[t._v(t._s(e.productDesc))])]),t._v(" "),s("div",[s("span",[t._v("原       价：")]),s("span",[t._v("¥ "+t._s(e.unitPrice))])]),t._v(" "),s("div",[s("span",[t._v("库存数量：")]),s("span",[t._v(t._s(e.inventory)+" "+t._s(e.UNIT_OF_MEASURE_STR))])]),t._v(" "),s("div",[s("span",[t._v("生产日期：")]),s("span",[t._v(t._s(e.produceTime))])])])})],2)]),t._v(" "),t.ifTips?s("div",{staticClass:"msg_tips"},[s("div",{staticClass:"tips_content"},[s("i",{staticClass:"iconfont icon-chenggong1"}),t._v(" "),s("p",[t._v(t._s(t.tips_Msg))])])]):t._e(),t._v(" "),s("div",{staticClass:"BtnComponent bottomBtn"},[s("div",{staticClass:"onlyBtn",on:{click:t.AddConfirm}},[t._v("提交")])])],1)},staticRenderFns:[]};var Us=s("VU/8")(ws,Ms,!1,function(t){s("tuhg")},"data-v-df57d252",null).exports,ks={data:function(){return{headerText:"客户所有库存登记",noDataShow:!1,CustomerInfo:{},listData:[]}},components:{componentHeader:_},created:function(){var t=this;if(this.CustomerInfo=this.$store.state.InventoryRegALL_CustomerInfo,this.CustomerInfo.CUSTOMER_ID){var e={strCustomerName:"",strRegStartTime:"",strRegEndTime:"",currentPage:1,numberPerPage:15,types:"store",businessId:t.$store.state.businessInfo.businessId,ospId:t.$store.state.InventoryOspInfo.CUSTOMER_ID,orgnizationId:t.CustomerInfo.CUSTOMER_ID,userId:t.$store.state.userInfo.user_id,cellphone:t.$store.state.userInfo.cellphone};console.log(e),t.httpRequest("GetRegisterList.do",e,function(e){console.log(e),e.data.length?t.noDataShow=!1:t.noDataShow=!0,t.listData=e.data})}else t.$alert("这条记录没有id，请重新请求","提示",{confirmButtonText:"确定"})},methods:{f_Fanhui:function(){this.$router.go(-1),this.$store.state.InventoryRegALL_CustomerInfo={}},inventoryDetail:function(t){this.$router.push({name:"InventoryRegDetail",query:{inventoryRegisterId:this.listData[t].INVENTORY_REGISTER_ID,ObjectType:this.ObjectType}})}}},Vs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerAllInventoryReg"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"CustomerInfo"},[s("div",[s("div",[t._v(t._s(t.CustomerInfo.CUSTOMER_NAME))]),t._v(" "),s("div",[s("span",[t._v("联  系  人：")]),s("span",[t._v(t._s(t.CustomerInfo.CONTACT_NAME)+"   "+t._s(t.CustomerInfo.CONTACT_TEL)+"   "),t.CustomerInfo.CONTACT_TEL?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.CustomerInfo.CONTACT_TEL)}}}):t._e()])]),t._v(" "),s("div",[s("span",[t._v("详细地址：")]),s("span",[t._v(t._s(t.CustomerInfo.CUSTOMER_ADDRESS))])])])]),t._v(" "),s("div",{staticClass:"inventoryList"},t._l(t.listData,function(e,o){return s("div",{key:o,staticClass:"inventoryListItem",attrs:{id:o},on:{click:function(e){return t.inventoryDetail(o)}}},[s("div",[s("span",[t._v("客户名称：")]),s("span",[t._v(t._s(e.NAME))])]),t._v(" "),s("div",[s("span",[t._v("客户代码：")]),s("span",[t._v(t._s(e.CODE))])]),t._v(" "),s("div",[s("span",[t._v("库存月份：")]),s("span",[t._v(t._s(e.INVENTORY_TIME))])]),t._v(" "),s("div",[s("span",[t._v("填表日期：")]),s("span",[t._v(t._s(e.ADDDATE))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var Fs=s("VU/8")(ks,Vs,!1,function(t){s("zgRF")},"data-v-620919cd",null).exports,Bs={data:function(){return{headerText:"入库列表",OutboundOrderList:[],noDataShow:!1,searchValue:"",numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_},created:function(){this.reqPutInList()},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqPutInList()}},methods:{f_Fanhui:function(){this.$router.push({name:"InventoryManage"})},reqPutInList:function(t){var e=this,s={appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,strConsignorName:e.searchValue,transferType:"",suppliersId:e.$store.state.InventoryOspInfo.CUSTOMER_ID,currentPage:e.loadPage,numberPerPage:e.numberPerPage};console.log(s),e.httpRequest("searchTransferReceipt.do",s,function(s){console.log(s);for(var o=0;o<s.data.length;o++)"PURCHASE_IN"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="采购入库":"OTHER_IN"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="其它入库":"SALE_RETURN_IN_ALL"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="销售退货入库(全退)":"SALE_RETURN_IN"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="销售退货入库":"SALE_RETURN_IN_PART"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="销售退货入库(部分)":"TRANSFER_IN"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="调拨入库":"SALE_OUT"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="销售出库":"TRANSFER_OUT"==s.data[o].TRANSFER_TYPE?s.data[o].TRANSFER_TYPE_text="调拨出库":"PURCHASE_RETURN_OUT"==s.data[o].TRANSFER_TYPE&&(s.data[o].TRANSFER_TYPE_text="采购退货出库"),"NEW"==s.data[o].STATUS?(s.data[o].STATUS_color="#FE5256",s.data[o].STATUS_text="新建"):"FINISH"==s.data[o].STATUS?(s.data[o].STATUS_color="#28B45F",s.data[o].STATUS_text="已审核"):"CANCEL"==s.data[o].STATUS?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="此入库单已取消"):(s.data[o].STATUS_color="#777",s.data[o].STATUS_text=s.data[o].STATUS);t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.OutboundOrderList=e.OutboundOrderList.concat(s.data)):e.OutboundOrderList=s.data,s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.OutboundOrderList.length?e.noDataShow=!1:e.noDataShow=!0})},toPutDetails:function(t){this.$router.push({name:"PutInStorageDetails",query:{TRANSFER_ID:this.OutboundOrderList[t].TRANSFER_ID}})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqPutInList("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqPutInList("BottomLoad"))}}},qs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"WarehousingDetail"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按 入库单号 或 供货商 搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"ListBox"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},t._l(t.OutboundOrderList,function(e,o){return s("div",{key:o,staticClass:"putWarehouseList",attrs:{id:o},on:{click:function(e){return t.toPutDetails(o)}}},[s("div",[t._v("入库单号："),s("span",[t._v(t._s(e.IN_NO))])]),t._v(" "),e.TMS_NO?s("div",[t._v("采购单号："),s("span",[t._v(t._s(e.TMS_NO))])]):t._e(),t._v(" "),e.OUT_NO?s("div",[t._v("原销售单号："),s("span",[t._v(t._s(e.OUT_NO))])]):t._e(),t._v(" "),s("div",[t._v("供 应 商 ："),s("span",[t._v(t._s(e.CONSIGNOR_NAME))])]),t._v(" "),s("div",[t._v("下 单 人 ："),s("span",[t._v(t._s(e.ADDWHO))])]),t._v(" "),s("div",[t._v("创建日期："),s("span",[t._v(t._s(e.ADDDATE))]),s("span",{staticClass:"float red",staticStyle:{color:"#28B45F"}},[t._v(t._s(e.TRANSFER_TYPE_text))])]),t._v(" "),s("div",[t._v("下单数量："),s("span",[t._v(t._s(e.ORDER_QTY))]),s("span",{staticClass:"float red",style:{color:e.STATUS_color}},[t._v(t._s(e.STATUS_text))])])])}),0),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var Hs=s("VU/8")(Bs,qs,!1,function(t){s("4V7E")},"data-v-51d335f5",null).exports,Gs={data:function(){return{headerText:"入库详情",TextContent:"打印",orderInfo:{},goodsArr:[],giftsArr:[],selfconfirm_show:!1,confirmcontent:""}},components:{componentHeader:_,componentCargoInfo:Yt},created:function(){var t=this,e={transferId:t.$route.query.TRANSFER_ID};console.log(e),t.httpRequest("searchTransferReceiptDetail.do",e,function(e){if(console.log(e),e.data.length){"PURCHASE_IN"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="采购入库":"OTHER_IN"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="其它入库":"SALE_RETURN_IN_ALL"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="销售退货入库(全退)":"SALE_RETURN_IN"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="销售退货入库":"SALE_RETURN_IN_PART"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="销售退货入库(部分)":"TRANSFER_IN"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="调拨入库":"SALE_OUT"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="销售出库":"TRANSFER_OUT"==e.data[0].orderInfo.transferType?e.data[0].orderInfo.TRANSFER_TYPE_text="调拨出库":"PURCHASE_RETURN_OUT"==e.data[0].orderInfo.transferType&&(e.data[0].orderInfo.TRANSFER_TYPE_text="采购退货出库"),"NEW"==e.data[0].orderInfo.STATUS?e.data[0].orderInfo.STATUS_text="新建":"FINISH"==e.data[0].orderInfo.STATUS?e.data[0].orderInfo.STATUS_text="已审核":"CANCEL"==e.data[0].orderInfo.STATUS?e.data[0].orderInfo.STATUS_text="此入库单已取消":e.data[0].orderInfo.STATUS_text=e.data[0].orderInfo.STATUS,t.orderInfo=e.data[0].orderInfo;for(var s=[],o=[],i=0;i<e.data[0].detail.length;i++)"GF"==e.data[0].detail[i].PRODUCT_TYPE?o[o.length]=e.data[0].detail[i]:s[s.length]=e.data[0].detail[i];t.goodsArr=s,t.giftsArr=o}else t.$alert("没有查询到数据，请联系管理员","提示",{confirmButtonText:"确定"})})},methods:{f_Fanhui:function(){this.$router.push({name:"WarehousingDetail"})},f_Text:function(){},selfconfirm_cancel:function(){this.selfconfirm_show=!1},selfconfirm_confirm:function(){},selfconfirm_confirm_:function(){this.selfconfirm_show=!1,this.selfconfirm_confirm()},selfconfirm:function(t,e){this.selfconfirm_show=!0,this.confirmcontent=t,this.selfconfirm_confirm=e},confirmOutbound:function(){var t=this;this.selfconfirm("确定要入库吗?",function(){var e={cellphone:t.$store.state.userInfo.cellphone,transferId:t.$route.query.TRANSFER_ID,businessId:t.$store.state.businessInfo.businessId};console.log(e),t.httpRequest("saveConfirmTransferReceipt.do",e,function(e){console.log(e),t.$alert(e.Msg,"提示",{confirmButtonText:"确定",callback:function(){t.$router.push({name:"WarehousingDetail"})}})})})},cancelOutbound:function(){var t=this;this.selfconfirm("确定要取消入库吗?",function(){var e={transferId:t.$route.query.TRANSFER_ID};console.log(e),t.httpRequest("saveCancelTransferReceipt.do",e,function(e){console.log(e),t.$alert(e.Msg,"提示",{confirmButtonText:"确定",callback:function(){t.$router.push({name:"WarehousingDetail"})}})})})},confirmTransferIn:function(){var t=this;this.selfconfirm("确定调拔入库吗?",function(){var e={cellphone:t.$store.state.userInfo.cellphone,transferId:t.$route.query.TRANSFER_ID,appUsersId:t.$store.state.userInfo.user_id,type:"IN"};console.log(e),t.httpRequest("saveTransferConfirm.do",e,function(e){console.log(e),t.$alert(e.Msg,"提示",{confirmButtonText:"确定",callback:function(){t.$router.push({name:"WarehousingDetail"})}})})})},cancelTransferIn:function(){var t=this;this.selfconfirm("确定取消调拔入库吗?",function(){var e={transferId:t.$route.query.TRANSFER_ID,appUsersId:t.$store.state.userInfo.user_id,type:"IN"};console.log(e),t.httpRequest("saveTransferCancel.do",e,function(e){console.log(e),t.$alert(e.Msg,"提示",{confirmButtonText:"确定",callback:function(){t.$router.push({name:"WarehousingDetail"})}})})})}}},Qs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"PutInStorageDetails"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0,IfTextShow:!0,TextContent:t.TextContent},on:{f_Fanhui:t.f_Fanhui,f_Text:t.f_Text}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"PutInOrderInfo"},[s("div",{staticClass:"infoHead"},[t._v("订单信息")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[s("span",[t._v("入库单号：")]),s("span",[t._v(t._s(t.orderInfo.IN_NO))])]),t._v(" "),t.orderInfo.OMSNO?s("div",[t._v("采购单号："),s("span",[t._v(t._s(t.orderInfo.OMSNO))])]):t._e(),t._v(" "),s("div",[s("span",[t._v("创建时间：")]),s("span",[t._v(t._s(t.orderInfo.ADDDATE))])]),t._v(" "),s("div",[s("span",[t._v("订单类型：")]),s("span",[t._v(t._s(t.orderInfo.TRANSFER_TYPE_text))])]),t._v(" "),s("div",[s("span",[t._v("订单状态：")]),s("span",[t._v(t._s(t.orderInfo.STATUS_text))])]),t._v(" "),t.orderInfo.REMARK?s("div",[t._m(0),s("div",[s("span",[t._v(t._s(t.orderInfo.REMARK))])])]):t._e(),t._v(" "),s("div",{staticClass:"flexDiv"},["PURCHASE_IN"==t.orderInfo.transferType||"SALE_OUT"==t.orderInfo.transferType?s("div",[s("span",[t._v("付款价格：")]),s("span",[t._v("¥"+t._s(t.orderInfo.PAY_PRICE))])]):t._e(),t._v(" "),s("div",[s("span",[t._v("下单数量：")]),s("span",[t._v(t._s(t.orderInfo.orderQty))])]),t._v(" "),t.orderInfo.MJ_PRICE>0?s("div",[s("span",[t._v("优惠：")]),s("span",[t._v("¥"+t._s(t.orderInfo.MJ_PRICE))])]):t._e()])])]),t._v(" "),s("div",{staticClass:"PutInOrderInfo"},[s("div",{staticClass:"infoHead"},[t._v("发货方")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[t._m(1),s("div",[s("span",[t._v(t._s(t.orderInfo.consignorName))])])]),t._v(" "),s("div",[t._m(2),s("span",[t._v(t._s(t.orderInfo.consignorContact)+"  "+t._s(t.orderInfo.consignorTelephone)+"   "),t.orderInfo.consignorTelephone?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.orderInfo.consignorTelephone)}}}):t._e()])]),t._v(" "),t.orderInfo.consignorAddress?s("div",[s("span",[t._v("发货地址：")]),s("span",[t._v(t._s(t.orderInfo.consignorAddress))])]):t._e()])]),t._v(" "),s("div",{staticClass:"PutInOrderInfo"},[s("div",{staticClass:"infoHead"},[t._v("收货方")]),t._v(" "),s("div",{staticClass:"infoContainer"},[s("div",[t._m(3),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeName))])])]),t._v(" "),s("div",[t._m(4),s("div",[s("span",[t._v(t._s(t.orderInfo.consigneeContact)+"  "+t._s(t.orderInfo.consigneeTelephone)+"   "),t.orderInfo.consigneeTelephone?s("i",{staticClass:"iconfont icon-dianhua-copy",on:{click:function(e){return t.callPhone(t.orderInfo.consigneeTelephone)}}}):t._e()])])]),t._v(" "),t.orderInfo.consigneeAddress?s("div",[s("span",[t._v("收货地址：")]),s("span",[t._v(t._s(t.orderInfo.consigneeAddress))])]):t._e()])]),t._v(" "),s("componentCargoInfo",{attrs:{goodsArr:t.goodsArr,TRANSFER_TYPE:t.orderInfo.transferType,titleHead:"货物信息"}}),t._v(" "),s("componentCargoInfo",{attrs:{goodsArr:t.giftsArr,titleHead:"赠品信息"}}),t._v(" "),"NEW"==t.orderInfo.STATUS&&"TRANSFER_IN"!=t.orderInfo.transferType?s("div",{staticClass:"entryBtn"},[s("div",{on:{click:t.cancelOutbound}},[t._v("取消入库")]),t._v(" "),"osp"==t.$store.state.CurrentRole?s("div",{on:{click:t.confirmOutbound}},[t._v("确认入库")]):t._e()]):t._e(),t._v(" "),"NEW"==t.orderInfo.STATUS&&"TRANSFER_IN"==t.orderInfo.transferType?s("div",{staticClass:"entryBtn"},[s("div",{on:{click:t.cancelTransferIn}},[t._v("取消调拔")]),t._v(" "),"osp"==t.$store.state.CurrentRole?s("div",{on:{click:t.confirmTransferIn}},[t._v("确认调拔")]):t._e()]):t._e()],1),t._v(" "),t.selfconfirm_show?s("div",{staticClass:"selfconfirm"},[s("div",{staticClass:"selfconfirm_contianer"},[s("div",{staticClass:"selfconfirm_head"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"selfconfirm_content"},[t._v(t._s(t.confirmcontent))]),t._v(" "),s("div",{staticClass:"selfconfirm_btn"},[s("div",{on:{click:function(e){return t.selfconfirm_cancel()}}},[t._v("取消")]),t._v(" "),s("div",{on:{click:function(e){return t.selfconfirm_confirm_()}}},[t._v("确认")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD"},[this._v("备")]),this._v("注：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("发货")]),this._v("方：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("联系")]),this._v("人：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("收货")]),this._v("方：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"ASD ASD_TWO"},[this._v("联系")]),this._v("人：")])}]};var Ws=s("VU/8")(Gs,Qs,!1,function(t){s("28ez")},"data-v-54fcefe2",null).exports,Ys={data:function(){return{headerText:"出库列表",OutboundOrderList:[],searchValue:"",noDataShow:!1,numberPerPage:15,loadPage:1,allLoaded:!0,autoFill:!1}},components:{componentHeader:_,componentOutboundOrder:Et},created:function(){this.reqPutOutList()},watch:{searchValue:function(t,e){this.loadPage=1,this.allLoaded=!1,this.reqPutOutList()}},methods:{f_Fanhui:function(){this.$router.push({name:"InventoryManage"})},reqPutOutList:function(t){var e=this,s={appUsersId:e.$store.state.userInfo.user_id,businessId:e.$store.state.businessInfo.businessId,suppliersId:e.$store.state.InventoryOspInfo.CUSTOMER_ID,storeName:e.searchValue,currentPage:e.loadPage,numberPerPage:e.numberPerPage,userType:e.$store.state.G_AppOrWX};console.log(s),e.httpRequest("searchTransferOut.do",s,function(s){console.log(s);for(var o=0;o<s.data.length;o++)"NEW"==s.data[o].STATUS?(s.data[o].STATUS_color="#FE5256",s.data[o].STATUS_text="未确认"):"FINISH"==s.data[o].STATUS?(s.data[o].STATUS_color="#28B45F",s.data[o].STATUS_text="已确认"):"CANCEL"==s.data[o].STATUS?(s.data[o].STATUS_color="#777",s.data[o].STATUS_text="此出库单已取消"):(s.data[o].STATUS_color="#777",s.data[o].STATUS_text=s.data[o].STATUS),"SALE_OUT"==s.data[o].TRANSFER_OUT_TYPE?(s.data[o].TYPE_color="#28B45F",s.data[o].TYPE_text="销售出库"):"OTHER_OUT"==s.data[o].TRANSFER_OUT_TYPE?(s.data[o].TYPE_color="#800080",s.data[o].TYPE_text="其它出库"):"TRANSFER_OUT"==s.data[o].TRANSFER_OUT_TYPE?(s.data[o].TYPE_color="#28B45F",s.data[o].TYPE_text="调拨出库"):"PURCHASE_RETURN_OUT"==s.data[o].TRANSFER_OUT_TYPE&&(s.data[o].TYPE_color="#28B45F",s.data[o].TYPE_text="采购退货出库");t&&("TopLoad"==t?e.$refs.loadmore.onTopLoaded():"BottomLoad"==t&&e.$refs.loadmore.onBottomLoaded()),e.loadPage>1?s.data.length&&(e.OutboundOrderList=e.OutboundOrderList.concat(s.data)):s.data.length?e.OutboundOrderList=s.data:e.OutboundOrderList=[],s.data.length<e.numberPerPage?e.allLoaded=!0:e.allLoaded=!1,e.OutboundOrderList.length?e.noDataShow=!1:e.noDataShow=!0})},loadTop:function(){this.loadPage=1,this.allLoaded=!1,this.reqPutOutList("TopLoad")},loadBottom:function(){this.allLoaded?this.$refs.loadmore.onBottomLoaded():(this.loadPage+=1,this.reqPutOutList("BottomLoad"))}}},Xs={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"AllOutgoingDetails"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"CustomerSearch"},[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],attrs:{placeholder:"按 出库单号 或 收货方名称 搜索"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),t._v(" "),s("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),s("div",{staticClass:"ListBox"},[s("mt-loadmore",{ref:"loadmore",attrs:{topDropText:"下拉刷新",topLoadingText:"",topPullText:"",bottomPullText:"",bottomDropText:"上拉加载",bottomLoadingText:"","top-method":t.loadTop,"bottom-method":t.loadBottom,autoFill:t.autoFill}},[s("componentOutboundOrder",{attrs:{OutboundOrderList:t.OutboundOrderList}})],1),t._v(" "),s("div",{staticClass:"kong"})],1),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var js=s("VU/8")(Ys,Xs,!1,function(t){s("Xr9C")},"data-v-2e72d5e2",null).exports,zs={data:function(){return{headerText:"报表中心",ReArr:[{ReportName:"客户与销量",ReportSrc:"static/img/Visit/VividDisplay.png"}]}},components:{componentHeader:_},created:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)}}},Ks={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ReportCenter"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("ul",{staticClass:"ReportList"},[s("router-link",{attrs:{to:"/CustomerVisitReport",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-kehu"})]),t._v(" "),s("div",[s("span",[t._v("客户拜访报表")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])]),t._v(" "),"5"!=t.$store.state.userInfo.business?s("router-link",{attrs:{to:"/SalesPerformanceReport",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-icon-test"})]),t._v(" "),s("div",[s("span",[t._v("销售业绩报表")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])]):t._e(),t._v(" "),"6"!=t.$store.state.userInfo.business?s("router-link",{attrs:{to:"/ProcurementSum",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-navicon-cgdd"})]),t._v(" "),s("div",[s("span",[t._v("采购汇总表")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])]):t._e(),t._v(" "),"6"!=t.$store.state.userInfo.business?s("router-link",{attrs:{to:"/PerformanceRanking",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-paihangbang"})]),t._v(" "),s("div",[s("span",[t._v("OSP业务员业绩排行榜")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])]):t._e(),t._v(" "),"6"!=t.$store.state.userInfo.business?s("router-link",{attrs:{to:"/ospPerformanceRanking",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-paihangbang"})]),t._v(" "),s("div",[s("span",[t._v("OSP业绩排行榜")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])]):t._e(),t._v(" "),"5"!=t.$store.state.userInfo.business?s("router-link",{attrs:{to:"/ProductSalesRanking",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-paihangbang"})]),t._v(" "),s("div",[s("span",[t._v("产品销量排行榜")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])]):t._e(),t._v(" "),s("router-link",{attrs:{to:"/sale_of_salesman_kb",tag:"li"}},[s("div",[s("i",{staticClass:"iconfont icon-paihangbang"})]),t._v(" "),s("div",[s("span",[t._v("销量看板")])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-xiangyou"})])])],1)])],1)},staticRenderFns:[]};var Js=s("VU/8")(zs,Ks,!1,function(t){s("oVfc")},"data-v-18fef67b",null).exports,Zs={data:function(){return{headerText:"客户销量、销售额报表",charts:"",ReportList:[],totalQty:0,totalMoney:0,dateTopList:[{a:"月",b:[{text:"2018-12月"}],c:0},{a:"季",b:[{text:"一季度"},{text:"二季度"},{text:"三季度"},{text:"四季度"}],c:0},{a:"年",b:[{text:"去年"},{text:"今年"}],c:1}],dateTopIndex:0,lastDateDiv:{},firstReq:!0}},components:{componentHeader:_,componentReportBar:ue},created:function(){this.getData()},methods:{f_Fanhui:function(){this.$router.go(-1)},getData:function(){for(var t=this,e=0;e<t.dateTopList.length;e++){var s=new Date,o=s.getFullYear(),i=t.dateTopList[e].a,a=t.dateTopList[e].b;if("周"==i)for(var n=0;n<a.length;n++);else if("月"==i){if(t.firstReq){for(var r=s.getMonth()+1,d=0;d<r;d++){var c={text:d+1+"月"};t.dateTopList[0].b.push(c)}t.dateTopList[0].c=r}for(n=0;n<a.length;n++){var u=(f=a[n]).text.replace("月",""),l=0,v=0;-1!=u.indexOf("20")?u.length>=4&&(o=u.substring(0,4),l=u.replace(o+"-",""),v=t.getDayWithYearMonth(o,l)):(o=s.getFullYear(),l=u,v=t.getDayWithYearMonth(o,l)),f.start=o+"-"+l+"-1",f.end=o+"-"+l+"-"+v,f.start=f.start+" 00:00:00",f.end=f.end+" 23:59:59"}}else if("季"==i){if(o=s.getFullYear(),t.firstReq){var _=s.getMonth()+1;_<=3?t.dateTopList[1].c=0:_>3&&_<=6?t.dateTopList[1].c=1:_>6&&_<=9?t.dateTopList[1].c=2:_>9&&_<=12&&(t.dateTopList[1].c=3)}for(n=0;n<a.length;n++){var p=(f=a[n]).text.replace("季度","");"一"==p?(f.start=o+"-1-1",f.end=o+"-3-"+t.getDayWithYearMonth(o,3)):"二"==p?(f.start=o+"-4-1",f.end=o+"-6-"+t.getDayWithYearMonth(o,6)):"三"==p?(f.start=o+"-7-1",f.end=o+"-9-"+t.getDayWithYearMonth(o,9)):"四"==p&&(f.start=o+"-10-1",f.end=o+"-12-"+t.getDayWithYearMonth(o,12)),f.start=f.start+" 00:00:00",f.end=f.end+" 23:59:59"}}else if("年"==i)for(n=0;n<a.length;n++){var f=a[n];o=s.getFullYear(),"去年"==f.text&&(o-=1),"今年"==f.text&&(o=o),f.start=o+"-1-1",f.end=o+"-12-31",f.start=f.start+" 00:00:00",f.end=f.end+" 23:59:59"}}var m=t.dateTopList[t.dateTopIndex],C={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,startDate:m.b[m.c].start,endDate:m.b[m.c].end};t.httpRequest("customerSalesReport.do",C,function(e){t.ReportList=[],e.data.length&&(t.ReportList=e.data);for(var s=0,o=0,i=0,a=0,n=0;n<t.ReportList.length;n++){t.ReportList[n].qty=t.ReportList[n].salesQty,t.ReportList[n].money=t.ReportList[n].salesAmount,t.ReportList[n].startDate=m.b[m.c].start,t.ReportList[n].endDate=m.b[m.c].end;var r=parseFloat(t.ReportList[n].qty),d=parseFloat(t.ReportList[n].money);s+=r,i+=d,o<r&&(o=r),a<d&&(a=d)}t.totalQty=s,t.totalMoney=i.toFixed(0);for(n=0;n<t.ReportList.length;n++)t.ReportList[n].progressQty=s?(t.ReportList[n].qty/s*100).toFixed(1):0,t.ReportList[n].maxQty=o,t.ReportList[n].progressMoney=i?(t.ReportList[n].money/i*100).toFixed(1):0,t.ReportList[n].maxMoney=a;t.ReportList=t.sortByKeyDesc(t.ReportList,"qty");var c=80*t.dateTopList[t.dateTopIndex].b.length;t.firstReq&&(t.firstReq=!1,setTimeout(function(){h()(".dateContentSize").css("width",c+"px"),h()(".dataType").eq(t.dateTopIndex).css("background-color","white"),h()(".dataType").eq(t.dateTopIndex).css("border-top","1px solid #D9D9D9"),h()(".dataType").eq(t.dateTopIndex).css("border-left","1px solid #D9D9D9"),h()(".dataType").eq(t.dateTopIndex).css("border-right","1px solid #D9D9D9"),h()(".dataType").eq(t.dateTopIndex).css("border-radius","5px 5px 0px 0px"),h()(".fds").eq(t.dateTopList[t.dateTopIndex].c)[0].scrollIntoView(),document.documentElement.scrollTop=0,h()(".fds").eq(t.dateTopList[t.dateTopIndex].c).css("border-bottom","1px solid green")},10))})},monthOnclick:function(t,e){var s=e.target,o=h()(".fds");h()(o).css("border-bottom","0px solid green"),h()(s).css("border-bottom","1px solid green"),this.dateTopList[this.dateTopIndex].c=t,this.getData()},dateOnclick:function(t,e){var s=this;this.dateTopIndex=t;var o=e.target,i=h()(".dataType");h()(i).css("background-color","#EEEFF2"),h()(i).css("border-top","1px solid #EEEFF2"),h()(i).css("border-left","1px solid #EEEFF2"),h()(i).css("border-right","1px solid #EEEFF2"),h()(o).css("background-color","white"),h()(o).css("border-top","1px solid #D9D9D9"),h()(o).css("border-left","1px solid #D9D9D9"),h()(o).css("border-right","1px solid #D9D9D9"),h()(o).css("border-radius","5px 5px 0px 0px");var a=80*s.dateTopList[s.dateTopIndex].b.length;h()(".dateContentSize").css("width",a+"px"),setTimeout(function(){h()(".fds").eq(s.dateTopList[s.dateTopIndex].c)[0].scrollIntoView(),document.documentElement.scrollTop=0},10);var n=h()(".fds");h()(n).css("border-bottom","0px solid green"),setTimeout(function(){h()(".fds").eq(s.dateTopList[t].c).css("border-bottom","1px solid green")},10),this.getData()},qtyDesc:function(){this.ReportList=this.sortByKeyDesc(this.ReportList,"qty")},moneyDesc:function(){this.ReportList=this.sortByKeyDesc(this.ReportList,"money")}}},to={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerSalesReport"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"dateContainer"},[s("div",{staticClass:"dateInfo"},t._l(t.dateTopList,function(e,o){return s("div",{key:o,staticClass:"dataType",attrs:{id:o},on:{click:function(e){return t.dateOnclick(o,e)}}},[t._v("\n            "+t._s(e.a)+"\n          ")])}),0),t._v(" "),s("div",{staticClass:"dateScroll"},[s("div",{staticClass:"dateContentSize"},t._l(t.dateTopList[t.dateTopIndex].b,function(e,o){return s("div",{key:o,staticClass:"fds",attrs:{id:o},on:{click:function(e){return t.monthOnclick(o,e)}}},[t._v("\n              "+t._s(e.text)+" \n            ")])}),0)])]),t._v(" "),s("div",{staticClass:"reportInfo"},[s("div",{staticClass:"left"},[s("div",{staticClass:"lineOne",on:{click:function(e){return t.qtyDesc()}}},[s("div",{staticClass:"colorQty"}),t._v(" "),s("div",{staticClass:"prompt"},[t._v("销量")]),t._v(" "),s("div",{staticClass:"prompt3"},[t._v(t._s(t.totalQty))])]),t._v(" "),s("div",{staticClass:"lineTwo",on:{click:function(e){return t.moneyDesc()}}},[s("div",{staticClass:"colorMoney"}),t._v(" "),s("div",{staticClass:"prompt"},[t._v("销售额(元)")]),t._v(" "),s("div",{staticClass:"prompt2"},[t._v("(点击按销售额降序)")]),t._v(" "),s("div",{staticClass:"prompt3"},[t._v(t._s(t.totalMoney))])])])]),t._v(" "),s("div",{staticClass:"componentReportBar"}),t._v(" "),s("div",[s("componentReportBar",{attrs:{ReportList:t.ReportList}})],1)])],1)},staticRenderFns:[]};var eo=s("VU/8")(Zs,to,!1,function(t){s("3WE8")},"data-v-33239c2f",null).exports,so=s("XLwt"),oo=s.n(so),io={data:function(){return{headerText:"品牌销量分析",charts:"",totalQty:0,ReportList:[],dateTopIndex:1,customerName:""}},components:{componentHeader:_},created:function(){var t,e,s=this;this.$route.query.startDate&&(t=this.$route.query.startDate),this.$route.query.endDate&&(e=this.$route.query.endDate);var o=0;this.$route.query.customerId&&(o=this.$route.query.customerId),this.$route.query.customerName&&(this.customerName=this.$route.query.customerName);var i={appUsersId:s.$store.state.userInfo.user_id,businessId:s.$store.state.businessInfo.businessId,customerId:o,startDate:t,endDate:e};s.httpRequest("customerSalesDetailReport.do",i,function(t){s.ReportList=t.data;for(var e=0,o=0,i=0;i<s.ReportList.length;i++){var a=parseFloat(s.ReportList[i].qty);o+=a,e<a&&(e=a)}s.totalQty=o;for(i=0;i<s.ReportList.length;i++)s.ReportList[i].progressQty=(s.ReportList[i].qty/o*100).toFixed(1),s.ReportList[i].maxQty=e;s.sortByKeyDesc(s.ReportList,"qty")})},methods:{f_Fanhui:function(){this.$router.go(-1)},drawQty:function(t,e,s){setTimeout(function(){var o=e/s;h()(".colorQty").css("background-color","#a1cb67"),h()(".progressQty").css("background-color","#a1cb67"),h()(".progressQty").eq(t).css("width",100*o+"%")},10)}}},ao={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerSalesDetailReport"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer",attrs:{id:"container"}},[s("div",{staticClass:"totalQty"},[t._v(t._s(t.customerName)+"总销量："+t._s(t.totalQty)+"\n    ")]),t._v(" "),s("div",{staticClass:"reportContainer"},t._l(t.ReportList,function(e,o){return s("div",{key:o,staticClass:"reportItem",attrs:{id:o}},[s("div",{staticClass:"lineOne"},[s("span",[t._v(t._s(e.product_name))]),t._v(" "),s("span",[t._v(t._s(e.progressQty)+"%")]),t._v(" "),s("span",[t._v(t._s(e.qty))])]),t._v(" "),s("div",{staticClass:"lineTwo"},[s("div",{staticClass:"progressQty"},[t._v(t._s(t.drawQty(o,e.qty,e.maxQty)))])])])}),0)])],1)},staticRenderFns:[]};var no=s("VU/8")(io,ao,!1,function(t){s("yv5a")},"data-v-0f20b8e7",null).exports,ro={data:function(){return{headerText:"产品销量报表",charts:"",totalQty:0,ReportList:[],dateTopList:[{a:"月",b:[{text:"2018-12月"}],c:0},{a:"季",b:[{text:"一季度"},{text:"二季度"},{text:"三季度"},{text:"四季度"}],c:0},{a:"年",b:[{text:"去年"},{text:"今年"}],c:1}],dateTopIndex:0,lastDateDiv:{},firstReq:!0}},components:{componentHeader:_},created:function(){this.getData()},methods:{f_Fanhui:function(){this.$router.go(-1)},getData:function(){for(var t=this,e=0;e<t.dateTopList.length;e++){var s=new Date,o=s.getFullYear(),i=t.dateTopList[e].a,a=t.dateTopList[e].b;if("周"==i)for(var n=0;n<a.length;n++);else if("月"==i){if(t.firstReq){for(var r=s.getMonth()+1,d=0;d<r;d++){var c={text:d+1+"月"};t.dateTopList[0].b.push(c)}t.dateTopList[0].c=r}for(n=0;n<a.length;n++){var u=(f=a[n]).text.replace("月",""),l=0,v=0;-1!=u.indexOf("20")?u.length>=4&&(o=u.substring(0,4),l=u.replace(o+"-",""),v=t.getDayWithYearMonth(o,l)):(o=s.getFullYear(),l=u,v=t.getDayWithYearMonth(o,l)),f.start=o+"-"+l+"-1",f.end=o+"-"+l+"-"+v,f.start=f.start+" 00:00:00",f.end=f.end+" 23:59:59"}}else if("季"==i){if(o=s.getFullYear(),t.firstReq){var _=s.getMonth()+1;_<=3?t.dateTopList[1].c=0:_>3&&_<=6?t.dateTopList[1].c=1:_>6&&_<=9?t.dateTopList[1].c=2:_>9&&_<=12&&(t.dateTopList[1].c=3)}for(n=0;n<a.length;n++){var p=(f=a[n]).text.replace("季度","");"一"==p?(f.start=o+"-1-1",f.end=o+"-3-"+t.getDayWithYearMonth(o,3)):"二"==p?(f.start=o+"-4-1",f.end=o+"-6-"+t.getDayWithYearMonth(o,6)):"三"==p?(f.start=o+"-7-1",f.end=o+"-9-"+t.getDayWithYearMonth(o,9)):"四"==p&&(f.start=o+"-10-1",f.end=o+"-12-"+t.getDayWithYearMonth(o,12)),f.start=f.start+" 00:00:00",f.end=f.end+" 23:59:59"}}else if("年"==i)for(n=0;n<a.length;n++){var f=a[n];o=s.getFullYear(),"去年"==f.text&&(o-=1),"今年"==f.text&&(o=o),f.start=o+"-1-1",f.end=o+"-12-31",f.start=f.start+" 00:00:00",f.end=f.end+" 23:59:59"}}var m=t.dateTopList[t.dateTopIndex],C={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,startDate:m.b[m.c].start,endDate:m.b[m.c].end};t.httpRequest("productSalesReport.do",C,function(e){t.ReportList=e.data;for(var s=0,o=0,i=0;i<t.ReportList.length;i++){t.ReportList[i].name=t.ReportList[i].brand_name,t.ReportList[i].value=t.ReportList[i].sales_qty,t.ReportList[i].startDate=m.b[m.c].start,t.ReportList[i].endDate=m.b[m.c].end;var a=parseFloat(t.ReportList[i].sales_qty);s+=a,o<a&&(o=a)}t.totalQty=s;for(i=0;i<t.ReportList.length;i++)t.ReportList[i].progressQty=s?(t.ReportList[i].sales_qty/s*100).toFixed(1):0,t.ReportList[i].maxQty=o;var n=80*t.dateTopList[t.dateTopIndex].b.length;t.drawPie("pie"),t.firstReq&&(t.firstReq=!1,setTimeout(function(){h()(".dateContentSize").css("width",n+"px"),h()(".dataType").eq(t.dateTopIndex).css("background-color","white"),h()(".dataType").eq(t.dateTopIndex).css("border-top","1px solid #D9D9D9"),h()(".dataType").eq(t.dateTopIndex).css("border-left","1px solid #D9D9D9"),h()(".dataType").eq(t.dateTopIndex).css("border-right","1px solid #D9D9D9"),h()(".dataType").eq(t.dateTopIndex).css("border-radius","5px 5px 0px 0px"),h()(".fds").eq(t.dateTopList[t.dateTopIndex].c)[0].scrollIntoView(),document.documentElement.scrollTop=0,h()(".fds").eq(t.dateTopList[t.dateTopIndex].c).css("border-bottom","1px solid green")},10))})},monthOnclick:function(t,e){var s=e.target,o=h()(".fds");h()(o).css("border-bottom","0px solid green"),h()(s).css("border-bottom","1px solid green"),this.dateTopList[this.dateTopIndex].c=t,this.getData()},dateOnclick:function(t,e){var s=this;this.dateTopIndex=t;var o=e.target,i=h()(".dataType");h()(i).css("background-color","#EEEFF2"),h()(i).css("border-top","1px solid #EEEFF2"),h()(i).css("border-left","1px solid #EEEFF2"),h()(i).css("border-right","1px solid #EEEFF2"),h()(o).css("background-color","white"),h()(o).css("border-top","1px solid #D9D9D9"),h()(o).css("border-left","1px solid #D9D9D9"),h()(o).css("border-right","1px solid #D9D9D9"),h()(o).css("border-radius","5px 5px 0px 0px");var a=80*s.dateTopList[s.dateTopIndex].b.length;h()(".dateContentSize").css("width",a+"px"),setTimeout(function(){h()(".fds").eq(s.dateTopList[s.dateTopIndex].c)[0].scrollIntoView(),document.documentElement.scrollTop=0},10);var n=h()(".fds");h()(n).css("border-bottom","0px solid green"),setTimeout(function(){h()(".fds").eq(s.dateTopList[t].c).css("border-bottom","1px solid green")},10),s.getData()},drawQty:function(t,e,s){setTimeout(function(){var o=e/s;h()(".colorQty").css("background-color","#a1cb67"),h()(".progressQty").css("background-color","#a1cb67"),h()(".progressQty").eq(t).css("width",100*o+"%")},10)},toDetails:function(t){this.$router.push({name:"ProductSalesDetailReport",query:{brandName:this.ReportList[t].brand_name,brandId:this.ReportList[t].brand_id,startDate:this.ReportList[0].startDate,endDate:this.ReportList[0].endDate}})},drawPie:function(t){this.charts=oo.a.init(document.getElementById(t)),this.charts.setOption({legend:{},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},series:[{type:"pie",radius:"50%",center:["50%","50%"],data:this.ReportList}]})}}},co={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ProductSalesReport"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"dateContainer"},[s("div",{staticClass:"dateInfo"},t._l(t.dateTopList,function(e,o){return s("div",{key:o,staticClass:"dataType",attrs:{id:o},on:{click:function(e){return t.dateOnclick(o,e)}}},[t._v("\n            "+t._s(e.a)+"\n          ")])}),0),t._v(" "),s("div",{staticClass:"dateScroll"},[s("div",{staticClass:"dateContentSize"},t._l(t.dateTopList[t.dateTopIndex].b,function(e,o){return s("div",{key:o,staticClass:"fds",attrs:{id:o},on:{click:function(e){return t.monthOnclick(o,e)}}},[t._v("\n              "+t._s(e.text)+" \n            ")])}),0)])]),t._v(" "),s("div",{staticClass:"totalQty"},[t._v("总销量："+t._s(t.totalQty)+"\n      ")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"prompt1"},[t._v("品牌销量分析图")]),t._v(" "),s("div",{staticClass:"reportContainer"},t._l(t.ReportList,function(e,o){return s("div",{key:o,staticClass:"reportItem",attrs:{id:o},on:{click:function(e){return t.toDetails(o)}}},[s("div",{staticClass:"lineOne"},[s("span",[t._v(t._s(e.brand_name))]),t._v(" "),s("span",[t._v(t._s(e.progressQty)+"%")]),t._v(" "),s("span",[t._v(t._s(e.sales_qty))])]),t._v(" "),s("div",{staticClass:"lineTwo"},[s("div",{staticClass:"progressQty"},[t._v(t._s(t.drawQty(o,e.sales_qty,e.maxQty)))])])])}),0)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pieContainer"},[e("div",{staticClass:"pie",attrs:{id:"pie"}})])}]};var uo=s("VU/8")(ro,co,!1,function(t){s("HdmP")},"data-v-64081c5e",null).exports,lo={data:function(){return{headerText:"品牌销量分析",charts:"",totalQty:0,ReportList:[],dateTopIndex:1,brandName:""}},components:{componentHeader:_},created:function(){var t,e,s=this;this.$route.query.startDate&&(t=this.$route.query.startDate),this.$route.query.endDate&&(e=this.$route.query.endDate),this.$route.query.brandName&&(this.brandName=this.$route.query.brandName);var o=0;this.$route.query.brandId&&(o=this.$route.query.brandId);var i={appUsersId:s.$store.state.userInfo.user_id,businessId:s.$store.state.businessInfo.businessId,brand_id:o,startDate:t,endDate:e};s.httpRequest("productSalesDetailReport.do",i,function(t){s.ReportList=t.data;for(var e=0,o=0,i=0;i<s.ReportList.length;i++){var a=parseFloat(s.ReportList[i].qty);o+=a,e<a&&(e=a)}s.totalQty=o;for(i=0;i<s.ReportList.length;i++)s.ReportList[i].progressQty=(s.ReportList[i].qty/o*100).toFixed(1),s.ReportList[i].maxQty=e;s.sortByKeyDesc(s.ReportList,"qty")})},methods:{f_Fanhui:function(){this.$router.go(-1)},drawQty:function(t,e,s){setTimeout(function(){var o=e/s;h()(".colorQty").css("background-color","#a1cb67"),h()(".progressQty").css("background-color","#a1cb67"),h()(".progressQty").eq(t).css("width",100*o+"%")},10)}}},ho={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ProductSalesDetailReport"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer",attrs:{id:"container"}},[s("div",{staticClass:"totalQty"},[t._v(t._s(t.brandName)+"总销量："+t._s(t.totalQty)+"\n    ")]),t._v(" "),s("div",{staticClass:"reportContainer"},t._l(t.ReportList,function(e,o){return s("div",{key:o,staticClass:"reportItem",attrs:{id:o}},[s("div",{staticClass:"lineOne"},[s("span",[t._v(t._s(e.product_name))]),t._v(" "),s("span",[t._v(t._s(e.progressQty)+"%")]),t._v(" "),s("span",[t._v(t._s(e.qty))])]),t._v(" "),s("div",{staticClass:"lineTwo"},[s("div",{staticClass:"progressQty"},[t._v(t._s(t.drawQty(o,e.qty,e.maxQty)))])])])}),0)])],1)},staticRenderFns:[]};var vo=s("VU/8")(lo,ho,!1,function(t){s("uRbv")},"data-v-3870ec7a",null).exports,_o={data:function(){return{headerText:"客户与销量报表",isCollapsed:!1,charts:""}},components:{componentHeader:_},mounted:function(){this.$nextTick(function(){this.drawLine("main"),this.drawPie("pie"),this.drawBar("bar")})},created:function(){},computed:{menuitemClasses:function(){return["menu-item",this.isCollapsed?"collapsed-menu":""]}},methods:{f_Fanhui:function(){this.$router.go(-1)},drawBar:function(t){this.charts=oo.a.init(document.getElementById(t)),this.charts.setOption({xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]})},drawPie:function(t){this.charts=oo.a.init(document.getElementById(t)),this.charts.setOption({legend:{},tooltip:{trigger:"axis",showContent:!1},dataset:{source:[["product","2012","2013","2014","2015","2016","2017"],["娃哈哈",41.1,30.4,65.1,53.3,83.8,98.7],["怡宝",86.5,92.1,85.7,83.1,73.4,55.1],["雪花",24.1,67.2,79.5,86.4,65.2,82.5],["青岛",55.2,67.1,69.2,72.4,53.9,39.1]]},series:[{type:"pie",radius:"50%",center:["50%","50%"],label:{formatter:"{b}: {@2012} ({d}%)"},encode:{itemName:"product",value:"2012",tooltip:"2012"}}]})},drawLine:function(t){this.charts=oo.a.init(document.getElementById(t)),this.charts.setOption({title:{text:"每月销售量"},xAxis:{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},tooltip:{trigger:"axis"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",axisLabel:{formatter:"{value} 台"}},series:[{name:"销售量",type:"line",data:[108,133,136,101,155,113,125,100,181,128,79,131]}]})}}},po={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"CustomerSalesReport"},[e("componentHeader",{attrs:{headerText:this.headerText,IfFanhuiShow:!0},on:{f_Fanhui:this.f_Fanhui}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container haveHeadcontainer"},[e("div",[e("div",[e("div",{staticStyle:{width:"100%",height:"350px"}},[e("div",{staticStyle:{float:"left",width:"100%",height:"300px"},attrs:{id:"main"}}),this._v(" "),e("div",{staticStyle:{float:"left",width:"100%",height:"300px"},attrs:{id:"pie"}}),this._v(" "),e("div",{staticStyle:{float:"left",width:"100%",height:"300px"},attrs:{id:"bar"}})])])])])}]};var fo=s("VU/8")(_o,po,!1,function(t){s("y/GU")},"data-v-1b179fd2",null).exports,mo={data:function(){return{headerText:"客户拜访报表",CustomerVisitData:[],StartDate:"",EndDate:"",noDataShow:!1}},components:{componentHeader:_},created:function(){this.StartDate=this.getNowTime("getMonthFirstDay"),this.EndDate=this.getNowTime("getDate"),this.GetCustomerVisitData()},methods:{f_Fanhui:function(){this.$router.go(-1)},ChangeStartDate:function(t){this.StartDate=t,this.GetCustomerVisitData()},ChangeEndDate:function(t){this.StartDate>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.EndDate=this.getNowTime("getDate")):(this.EndDate=t,this.GetCustomerVisitData())},GetCustomerVisitData:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.StartDate,EndDate:t.EndDate};t.httpRequest("customerVisitCompletion.do",e,function(e){t.CustomerVisitData=e.data,t.CustomerVisitData.length?t.noDataShow=!1:t.noDataShow=!0})}}},Co={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"CustomerVisitReport"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DateDisplay"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeStartDate},model:{value:t.StartDate,callback:function(e){t.StartDate=e},expression:"StartDate"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeEndDate},model:{value:t.EndDate,callback:function(e){t.EndDate=e},expression:"EndDate"}})],1)]),t._v(" "),s("div",{staticClass:"reportInfo"},t._l(t.CustomerVisitData,function(e,o){return s("div",{key:o,staticClass:"CustomerVisitItem",attrs:{id:o}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.name))])]),t._v(" "),s("div",[s("span",[t._v("目标拜访量：")]),s("span",[t._v(t._s(e.targetSum))])]),t._v(" "),s("div",[s("span",[t._v("实际拜访量：")]),s("span",[t._v(t._s(e.visitSum))])]),t._v(" "),s("div",[s("span",[t._v("成功下单数：")]),s("span",[t._v(t._s(e.orderCount))])]),t._v(" "),s("div",[s("span",[t._v("拜访完成率：")]),s("span",[t._v(t._s(e.dCL))])]),t._v(" "),s("div",[s("span",[t._v("拜访订单成交率：")]),s("span",[t._v(t._s(e.orderCJL))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var go=s("VU/8")(mo,Co,!1,function(t){s("l73M")},"data-v-96cecc1a",null).exports,To={data:function(){return{headerText:"销售业绩报表",SalesPerformanceData:[],StartDate:"",EndDate:"",noDataShow:!1,orderCountSum:"",pirchaseQTYSum:"",amountSum:"",customerCountSum:""}},components:{componentHeader:_},created:function(){this.StartDate=this.getNowTime("getMonthFirstDay"),this.EndDate=this.getNowTime("getDate"),this.GetSalesPerformance(),this.SalesPerformanceData.length&&console.log(111)},methods:{f_Fanhui:function(){this.$router.go(-1)},ChangeStartDate:function(t){this.StartDate=t,this.GetSalesPerformance()},ChangeEndDate:function(t){this.StartDate>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.EndDate=this.getNowTime("getDate")):(this.EndDate=t,this.GetSalesPerformance())},GetSalesPerformance:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.StartDate,EndDate:t.EndDate};t.httpRequest("salesPerformanceSummary.do",e,function(e){if(t.SalesPerformanceData=e.data,t.orderCountSum=0,t.pirchaseQTYSum=0,t.amountSum=0,t.customerCountSum=0,t.SalesPerformanceData.length){t.noDataShow=!1;for(var s=0;s<t.SalesPerformanceData.length;s++)t.orderCountSum+=t.SalesPerformanceData[s].orderCount,t.pirchaseQTYSum+=t.SalesPerformanceData[s].pirchaseQTY,t.amountSum+=t.SalesPerformanceData[s].amount,t.customerCountSum+=t.SalesPerformanceData[s].customerCount}else t.noDataShow=!0})}}},Io={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"SalesPerformanceReport"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DateDisplay"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeStartDate},model:{value:t.StartDate,callback:function(e){t.StartDate=e},expression:"StartDate"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeEndDate},model:{value:t.EndDate,callback:function(e){t.EndDate=e},expression:"EndDate"}})],1)]),t._v(" "),t.noDataShow?t._e():s("div",{staticClass:"reportSum"},[s("div",{staticClass:"title"},[t._v("业绩汇总")]),t._v(" "),s("div",{staticClass:"reportItem"},[s("div",[s("div",{staticClass:"one"},[s("span",[t._v("下单份数：")]),s("span",[t._v(t._s(t.orderCountSum))])]),t._v(" "),s("div",{staticClass:"two"},[s("span",[t._v("订单销售额：")]),s("span",[t._v(t._s(t.amountSum))])])]),t._v(" "),s("div",[s("div",{staticClass:"three"},[s("span",[t._v("订单数量：")]),s("span",[t._v(t._s(t.pirchaseQTYSum))])]),t._v(" "),s("div",{staticClass:"four"},[s("span",[t._v("下单客户数：")]),s("span",[t._v(t._s(t.customerCountSum))])])])])]),t._v(" "),s("div",{staticClass:"reportInfo"},t._l(t.SalesPerformanceData,function(e,o){return s("div",{key:o,staticClass:"SalesPerformanceItem",attrs:{id:o}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.NAME))])]),t._v(" "),s("div",[s("span",[t._v("下单份数：")]),s("span",[t._v(t._s(e.orderCount))])]),t._v(" "),s("div",[s("span",[t._v("订单数量：")]),s("span",[t._v(t._s(e.pirchaseQTY))])]),t._v(" "),s("div",[s("span",[t._v("订单销售额：")]),s("span",[t._v(t._s(e.amount))])]),t._v(" "),s("div",[s("span",[t._v("下单客户数：")]),s("span",[t._v(t._s(e.customerCount))])]),t._v(" "),s("div",[s("span",[t._v("平均单店销售额：")]),s("span",[t._v(t._s(e.avgAmount))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var So=s("VU/8")(To,Io,!1,function(t){s("Jo3k")},"data-v-7bf1f846",null).exports,yo={data:function(){return{headerText:"采购汇总表",ProcurementData:[],StartDate:"",EndDate:"",noDataShow:!1}},components:{componentHeader:_},created:function(){this.StartDate=this.getNowTime("getMonthFirstDay"),this.EndDate=this.getNowTime("getDate"),this.GetProcurementData()},methods:{f_Fanhui:function(){this.$router.go(-1)},ChangeStartDate:function(t){this.StartDate=t,this.GetProcurementData()},ChangeEndDate:function(t){this.StartDate>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.EndDate=this.getNowTime("getDate")):(this.EndDate=t,this.GetProcurementData())},GetProcurementData:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.StartDate,EndDate:t.EndDate};t.httpRequest("ospPickUpTheGoods.do",e,function(e){t.ProcurementData=e.data,t.ProcurementData.length?t.noDataShow=!1:t.noDataShow=!0})}}},Do={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ProcurementSum"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DateDisplay"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeStartDate},model:{value:t.StartDate,callback:function(e){t.StartDate=e},expression:"StartDate"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeEndDate},model:{value:t.EndDate,callback:function(e){t.EndDate=e},expression:"EndDate"}})],1)]),t._v(" "),s("div",{staticClass:"reportInfo"},t._l(t.ProcurementData,function(e,o){return s("div",{key:o,staticClass:"ProcurementItem",attrs:{id:o}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.ospName))])]),t._v(" "),s("div",[s("span",[t._v("订单份数：")]),s("span",[t._v(t._s(e.orderCount))])]),t._v(" "),s("div",[s("span",[t._v("订单数量：")]),s("span",[t._v(t._s(e.orderQty))])]),t._v(" "),s("div",[s("span",[t._v("总销售额：")]),s("span",[t._v(t._s(e.amount))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var Ro=s("VU/8")(yo,Do,!1,function(t){s("s2GP")},"data-v-2def8a51",null).exports,Eo={data:function(){return{headerText:"OSP业务员业绩排行榜",PerformanceRankingData:[],StartDate:"",EndDate:"",noDataShow:!1}},components:{componentHeader:_},created:function(){this.StartDate=this.getNowTime("getMonthFirstDay"),this.EndDate=this.getNowTime("getDate"),this.GetPerformanceRankingData()},methods:{f_Fanhui:function(){this.$router.go(-1)},ChangeStartDate:function(t){this.StartDate=t,this.GetPerformanceRankingData()},ChangeEndDate:function(t){this.StartDate>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.EndDate=this.getNowTime("getDate")):(this.EndDate=t,this.GetPerformanceRankingData())},GetPerformanceRankingData:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.StartDate,EndDate:t.EndDate};t.httpRequest("performanceRanking.do",e,function(e){t.PerformanceRankingData=e.data,t.PerformanceRankingData.length?t.noDataShow=!1:t.noDataShow=!0})}}},Lo={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"PerformanceRanking"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DateDisplay"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeStartDate},model:{value:t.StartDate,callback:function(e){t.StartDate=e},expression:"StartDate"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeEndDate},model:{value:t.EndDate,callback:function(e){t.EndDate=e},expression:"EndDate"}})],1)]),t._v(" "),s("div",{staticClass:"reportInfo"},t._l(t.PerformanceRankingData,function(e,o){return s("div",{key:o,staticClass:"PerformanceRankingItem",attrs:{id:o}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.ospName))])]),t._v(" "),s("div",[s("span",[t._v(" 业 务 员 ：")]),s("span",[t._v(t._s(e.userName))])]),t._v(" "),s("div",[s("span",[t._v("销售金额：")]),s("span",[t._v(t._s(e.amount))])]),t._v(" "),s("div",[s("span",[t._v("单店VPO：")]),s("span",[t._v(t._s(e.vpo))])]),t._v(" "),s("div",[s("span",[t._v("订单份数：")]),s("span",[t._v(t._s(e.orderCount))])]),t._v(" "),s("div",[s("span",[t._v("订单数量：")]),s("span",[t._v(t._s(e.orderQty))])]),t._v(" "),s("div",[s("span",[t._v("客户数量：")]),s("span",[t._v(t._s(e.customerCount))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var Po=s("VU/8")(Eo,Lo,!1,function(t){s("JvAw")},"data-v-1f63ce7f",null).exports,Oo={data:function(){return{headerText:"OSP业绩排行榜",ospPerformanceRankingData:[],StartDate:"",EndDate:"",noDataShow:!1}},components:{componentHeader:_},created:function(){this.StartDate=this.getNowTime("getMonthFirstDay"),this.EndDate=this.getNowTime("getDate"),this.GetospPerformanceRankingData()},methods:{f_Fanhui:function(){this.$router.go(-1)},ChangeStartDate:function(t){this.StartDate=t,this.GetospPerformanceRankingData()},ChangeEndDate:function(t){this.StartDate>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.EndDate=this.getNowTime("getDate")):(this.EndDate=t,this.GetospPerformanceRankingData())},GetospPerformanceRankingData:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.StartDate,EndDate:t.EndDate};t.httpRequest("ospPerformanceRanking.do",e,function(e){t.ospPerformanceRankingData=e.data,t.ospPerformanceRankingData.length?t.noDataShow=!1:t.noDataShow=!0})}}},Ao={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ospPerformanceRanking"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DateDisplay"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeStartDate},model:{value:t.StartDate,callback:function(e){t.StartDate=e},expression:"StartDate"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeEndDate},model:{value:t.EndDate,callback:function(e){t.EndDate=e},expression:"EndDate"}})],1)]),t._v(" "),s("div",{staticClass:"reportInfo"},t._l(t.ospPerformanceRankingData,function(e,o){return s("div",{key:o,staticClass:"ospPerformanceRankingItem",attrs:{id:o}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.ospName))])]),t._v(" "),s("div",[s("span",[t._v("销售金额：")]),s("span",[t._v(t._s(e.amount))])]),t._v(" "),s("div",[s("span",[t._v("单店VPO：")]),s("span",[t._v(t._s(e.vpo))])]),t._v(" "),s("div",[s("span",[t._v("订单份数：")]),s("span",[t._v(t._s(e.orderCount))])]),t._v(" "),s("div",[s("span",[t._v("订单数量：")]),s("span",[t._v(t._s(e.orderQty))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()])],1)},staticRenderFns:[]};var No=s("VU/8")(Oo,Ao,!1,function(t){s("bE+W")},"data-v-2e3a851a",null).exports,xo={data:function(){return{headerText:"产品销量排行榜",ProductSalesRankingData:[],StartDate:"",EndDate:"",noDataShow:!1,SelectBoxHide:!1,productType:"全部",orderQtySum:"",amountSum:"",SelectBoxList:[]}},components:{componentHeader:_,componentSelectBox:m},created:function(){this.StartDate=this.getNowTime("getMonthFirstDay"),this.EndDate=this.getNowTime("getDate");var t=this,e={businessId:t.$store.state.businessInfo.businessId,appUsersType:t.$store.state.G_AppOrWX,appUsersId:t.$store.state.userInfo.user_id};t.httpRequest("searchProductType.do",e,function(e){if(e.data.length){for(var s=0;s<e.data.length;s++)"近期"==e.data[s].PRODUCT_BRAND&&e.data.splice(s,1);for(var o=0;o<e.data.length;o++){var i={name:e.data[o].PRODUCT_BRAND};t.SelectBoxList.push(i)}}t.productType=t.SelectBoxList[0].name}),this.GetProductSalesRankingData()},methods:{f_Fanhui:function(){this.$router.go(-1)},ChangeStartDate:function(t){this.StartDate=t,this.GetProductSalesRankingData()},ChangeEndDate:function(t){this.StartDate>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.EndDate=this.getNowTime("getDate")):(this.EndDate=t,this.GetProductSalesRankingData())},SelectBoxShow:function(){this.BouncedName="产品品牌",this.SelectBoxHide=!0},selectCancel:function(){this.SelectBoxHide=!1},selectedItem:function(t){this.productType=this.SelectBoxList[t].name,this.SelectBoxHide=!1,this.GetProductSalesRankingData()},GetProductSalesRankingData:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.StartDate,EndDate:t.EndDate,productType:t.productType};t.httpRequest("productSalesPerformanceRanking.do",e,function(e){if(t.ProductSalesRankingData=e.data,t.orderQtySum=0,t.amountSum=0,t.ProductSalesRankingData.length){t.noDataShow=!1;for(var s=0;s<t.ProductSalesRankingData.length;s++)t.orderQtySum+=t.ProductSalesRankingData[s].orderQty,t.amountSum+=t.ProductSalesRankingData[s].amount}else t.noDataShow=!0})}}},$o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ProductSalesRanking"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DateDisplay"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeStartDate},model:{value:t.StartDate,callback:function(e){t.StartDate=e},expression:"StartDate"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.ChangeEndDate},model:{value:t.EndDate,callback:function(e){t.EndDate=e},expression:"EndDate"}})],1)]),t._v(" "),s("div",{staticClass:"ScreeningNav"},[s("div",[s("div",{staticClass:"StateSelect",on:{click:function(e){return t.SelectBoxShow("产品品牌")}}},[s("span",[t._v(t._s(t.productType))]),t._v(" "),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"ConditionsSelectBtn"},[t._v("品牌筛选")])])]),t._v(" "),t.noDataShow?t._e():s("div",{staticClass:"reportSum"},[s("div",{staticClass:"title"},[s("span",[t._v("品牌销售汇总 > ")]),s("span",[t._v(t._s(t.productType))])]),t._v(" "),s("div",{staticClass:"QtySum"},[s("span",[t._v("销售数量：")]),s("span",[t._v(t._s(t.orderQtySum))])]),t._v(" "),s("div",{staticClass:"amountSum"},[s("span",[t._v("销售金额：")]),s("span",[t._v(t._s(t.amountSum))])])]),t._v(" "),s("div",{staticClass:"reportInfo"},t._l(t.ProductSalesRankingData,function(e,o){return s("div",{key:o,staticClass:"ProductSalesRankingItem",attrs:{id:o}},[s("div",{staticClass:"CustomerName"},[s("span",[t._v(t._s(e.ospName))])]),t._v(" "),s("div",[s("span",[t._v("产品名称：")]),s("span",[t._v(t._s(e.productName))])]),t._v(" "),s("div",[s("span",[t._v("销售数量：")]),s("span",[t._v(t._s(e.orderQty))])]),t._v(" "),s("div",[s("span",[t._v("销售金额：")]),s("span",[t._v(t._s(e.amount))])])])}),0),t._v(" "),t.noDataShow?s("div",{staticClass:"noData"},[s("i",{staticClass:"iconfont icon-meiyoushuju-copy"}),t._v(" "),s("span",[t._v("没有数据")])]):t._e()]),t._v(" "),t.SelectBoxHide?s("componentSelectBox",{attrs:{SelectBoxList:t.SelectBoxList,BouncedName:t.BouncedName},on:{selectCancel:t.selectCancel,selectedItem:t.selectedItem}}):t._e()],1)},staticRenderFns:[]};var bo=s("VU/8")(xo,$o,!1,function(t){s("2JMB")},"data-v-078c1ab9",null).exports,wo={name:"sale_of_salesman_kb",data:function(){return{headerText:"销量看板",start_date:this.getNowTime("getMonthFirstDay"),end_date:this.getNowTime("getDate"),datas:[],timeSchedule:"",qtyWcl:"",fqtyWcl:""}},components:{componentHeader:_},created:function(){this.resquertData()},methods:{f_Fanhui:function(){this.$router.go(-1)},PackUp:function(t,e){"block"==h()("."+e).css("display")?(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(-90deg)"}),h()("."+e).hide(200)):(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(0deg)"}),h()("."+e).show(200))},start_date_click:function(t){this.start_date=t,this.resquertData()},end_date_click:function(t){this.start_date>t?(this.$alert("截止时间不可小于开始时间","提示",{confirmButtonText:"确定"}),this.end_date=this.getNowTime("getDate")):(this.end_date=t,this.resquertData())},resquertData:function(){var t=this,e={appUsersId:t.$store.state.userInfo.user_id,businessId:t.$store.state.businessInfo.businessId,StartDate:t.start_date,EndDate:t.end_date};this.httpRequest("salesDataView.do",e,function(e){if(e.data.datas.length>0){t.datas=e.data.datas,t.timeSchedule=e.data.timeSchedule;var s=t.datas.length;t.datas.push(JSON.parse(n()(t.datas[0]))),t.datas[s].userName="总计",t.datas[s].outCount=0,t.datas[s].foutCount=0,t.datas[s].woutCount=0,t.datas[s].outQTY=0,t.datas[s].foutQTY=0,t.datas[s].woutQTY=0,t.datas[s].outAmount=0,t.datas[s].foutAmount=0,t.datas[s].woutAmount=0,t.datas[s].salesVolume=0,t.datas[s].amount=0,t.datas[s].outQTY=0,t.datas[s].outAmount=0,t.datas[s].foutQTY=0,t.datas[s].foutAmount=0;for(var o=0;o<s;o++)t.datas[s].userName="总计",t.datas[s].outCount+=t.datas[o].outCount,t.datas[s].foutCount+=t.datas[o].foutCount,t.datas[s].woutCount+=t.datas[o].woutCount,t.datas[s].outQTY+=t.datas[o].outQTY,t.datas[s].foutQTY+=t.datas[o].foutQTY,t.datas[s].woutQTY+=t.datas[o].woutQTY,t.datas[s].outAmount+=t.datas[o].outAmount,t.datas[s].foutAmount+=t.datas[o].foutAmount,t.datas[s].woutAmount+=t.datas[o].woutAmount,t.datas[s].salesVolume+=t.datas[o].salesVolume,t.datas[s].amount+=t.datas[o].amount;t.datas[s].qtyWcl=0==t.datas[s].salesVolume?"0%":parseFloat(t.datas[s].outQTY/t.datas[s].salesVolume*100).toFixed(2)+"%",t.datas[s].amountWcl=0==t.datas[s].amount?"0%":parseFloat(t.datas[s].outAmount/t.datas[s].amount*100).toFixed(2)+"%",t.datas[s].fqtyWcl=0==t.datas[s].salesVolume?"0%":parseFloat(t.datas[s].foutQTY/t.datas[s].salesVolume*100).toFixed(2)+"%",t.datas[s].famountWcl=0==t.datas[s].amount?"0%":parseFloat(t.datas[s].foutAmount/t.datas[s].amount*100).toFixed(2)+"%",console.log(t.datas[s].foutAmount+"/"+t.datas[s].amount),t.qtyWcl=t.datas[s].qtyWcl,t.fqtyWcl=t.datas[s].fqtyWcl,t.$nextTick(function(){h()(".fds"+s).css({"font-weight":"bold"})})}})}}},Mo={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sale_of_salesman_kb"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"el_date"},[s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.start_date_click},model:{value:t.start_date,callback:function(e){t.start_date=e},expression:"start_date"}})],1),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("div",[s("el-date-picker",{attrs:{type:"date",placeholder:"截止日期","value-format":"yyyy-MM-dd",editable:!1},on:{change:t.end_date_click},model:{value:t.end_date,callback:function(e){t.end_date=e},expression:"end_date"}})],1)]),t._v(" "),s("div",{staticClass:"scroll-content"},[s("div",{staticClass:"summary"},[s("div",[t._v("时间进度："+t._s(t.timeSchedule))]),t._v(" "),s("div",[t._v("下单达成："+t._s(t.qtyWcl))]),t._v(" "),s("div",[t._v("发货达成："+t._s(t.fqtyWcl))])]),t._v(" "),s("div",{staticClass:"kb"},[s("div",{staticClass:"__h1",on:{click:function(e){return t.PackUp("__h1","__c1")}}},[t._v("销量达成（按下单统计）"),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"table __c1"},[t._m(0),t._v(" "),s("div",{staticClass:"tb-content_1_2"},t._l(t.datas,function(e,o){return s("div",{key:o,staticClass:"v-f",attrs:{id:o}},[s("div",{class:"fds"+o},[t._v(t._s(e.userName))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.salesVolume))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.amount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.qtyWcl))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.amountWcl))])])}),0)])]),t._v(" "),s("div",{staticClass:"kb"},[s("div",{staticClass:"__h2",on:{click:function(e){return t.PackUp("__h2","__c2")}}},[t._v("销量达成（按送货统计）"),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"table __c2"},[t._m(1),t._v(" "),s("div",{staticClass:"tb-content_1_2"},t._l(t.datas,function(e,o){return s("div",{key:o,staticClass:"v-f",attrs:{id:o}},[s("div",{class:"fds"+o},[t._v(t._s(e.userName))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.salesVolume))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.amount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.fqtyWcl))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.famountWcl))])])}),0)])]),t._v(" "),s("div",{staticClass:"kb"},[s("div",{staticClass:"__h3",on:{click:function(e){return t.PackUp("__h3","__c3")}}},[t._v("销售单"),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),s("div",{staticClass:"table __c3"},[t._m(2),t._v(" "),s("div",{staticClass:"tb-content_3"},t._l(t.datas,function(e,o){return s("div",{key:o,staticClass:"v-f",attrs:{id:o}},[s("div",{class:"fds"+o},[t._v(t._s(e.userName))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.outCount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.foutCount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.woutCount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.outQTY))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.foutQTY))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.woutQTY))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.outAmount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.foutAmount))]),t._v(" "),s("div",{class:"fds"+o},[t._v(t._s(e.woutAmount))])])}),0)])]),t._v(" "),s("div",{staticClass:"kong"})])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tb-header_1_2"},[s("div",[t._v("业务员")]),t._v(" "),s("div",[s("div",[t._v("销量达成（按照下单统计）有效单据")]),t._v(" "),s("div",[s("div",[t._v("目标数量")]),t._v(" "),s("div",[t._v("目标金额")]),t._v(" "),s("div",[t._v("完成率(数量)")]),t._v(" "),s("div",[t._v("完成率(金额)")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tb-header_1_2"},[s("div",[t._v("业务员")]),t._v(" "),s("div",[s("div",[t._v("销量达成（按照送货统计）有效单据")]),t._v(" "),s("div",[s("div",[t._v("目标数量")]),t._v(" "),s("div",[t._v("目标金额")]),t._v(" "),s("div",[t._v("完成率(数量)")]),t._v(" "),s("div",[t._v("完成率(金额)")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tb-header_3"},[s("div",[t._v("业务员")]),t._v(" "),s("div",[s("div",[t._v("订单份数/单")]),t._v(" "),s("div",[s("div",[t._v("已下单")]),t._v(" "),s("div",[t._v("已出库")]),t._v(" "),s("div",[t._v("未出库")])])]),t._v(" "),s("div",[s("div",[t._v("订单数量/箱")]),t._v(" "),s("div",[s("div",[t._v("已下单")]),t._v(" "),s("div",[t._v("已出库")]),t._v(" "),s("div",[t._v("未出库")])])]),t._v(" "),s("div",[s("div",[t._v("订单金额/元")]),t._v(" "),s("div",[s("div",[t._v("已下单")]),t._v(" "),s("div",[t._v("已出库")]),t._v(" "),s("div",[t._v("未出库")])])])])}]};var Uo=s("VU/8")(wo,Mo,!1,function(t){s("O1YD")},"data-v-d76bd4b2",null).exports,ko={data:function(){return{headerText:"业绩追踪",InventoryMonth:"",TargetNum:0,ActualNum:0,NumRate:0,TargetMoney:0,ActualMoney:0,MoneyRate:0,SalesNumdata:{},SalesMoneydata:{},crrentDateFormat:"MONTH"}},components:{componentHeader:_},watch:{InventoryMonth:function(t,e){this.GetData()}},created:function(){h()(".month").css({"background-color":"#1e8cf8",color:"#fff"}),this.InventoryMonth=new Date},mounted:function(){},methods:{f_Fanhui:function(){this.$router.go(-1)},GetRate:function(){this.NumRate=(this.ActualNum/this.TargetNum*100).toFixed(1)+"%",this.MoneyRate=(this.ActualMoney/this.TargetMoney*100).toFixed(1)+"%"},GetData:function(){var t=this,e={appUserId:t.$store.state.userInfo.user_id,dateTime:t.InventoryMonth};t.httpRequest("GetSalesVolumeNum.do",e,function(e){t.SalesNumdata=e.data,t.SalesNumdata.lenght&&("MONTH"==t.crrentDateFormat?(t.TargetNum=t.SalesNumdata.MONTH.TARGET_NUM,t.ActualNum=t.SalesNumdata.MONTH.ACTUAL_NUM,t.GetRate()):"QUARTER"==t.crrentDateFormat?(t.TargetNum=t.SalesNumdata.QUARTER.TARGET_NUM,t.ActualNum=t.SalesNumdata.QUARTER.ACTUAL_NUM,t.GetRate()):"YEAR"==t.crrentDateFormat&&(t.TargetNum=t.SalesNumdata.YEAR.TARGET_NUM,t.ActualNum=t.SalesNumdata.YEAR.ACTUAL_NUM,t.GetRate()))}),t.httpRequest("GetSalesVolumeMoney.do",e,function(e){t.SalesMoneydata=e.data,t.SalesMoneydata.lenght&&("MONTH"==t.crrentDateFormat?(t.TargetMoney=t.SalesMoneydata.MONTH.TARGET_MONEY,t.ActualMoney=t.SalesMoneydata.MONTH.ACTUAL_MONEY,t.GetRate()):"QUARTER"==t.crrentDateFormat?(t.TargetMoney=t.SalesMoneydata.QUARTER.TARGET_MONEY,t.ActualMoney=t.SalesMoneydata.QUARTER.ACTUAL_MONEY,t.GetRate()):"YEAR"==t.crrentDateFormat&&(t.TargetMoney=t.SalesMoneydata.YEAR.TARGET_MONEY,t.ActualMoney=t.SalesMoneydata.YEAR.ACTUAL_MONEY,t.GetRate()))})},toMonth:function(){this.crrentDateFormat="MONTH",h()(".month").css({"background-color":"#1e8cf8",color:"#fff"}),h()(".quarter").css({"background-color":"#fff",color:"#000"}),h()(".year").css({"background-color":"#fff",color:"#000"}),this.TargetNum=this.SalesNumdata.MONTH.TARGET_NUM,this.ActualNum=this.SalesNumdata.MONTH.ACTUAL_NUM,this.TargetMoney=this.SalesMoneydata.MONTH.TARGET_MONEY,this.ActualMoney=this.SalesMoneydata.MONTH.ACTUAL_MONEY,this.GetRate()},toQuarter:function(){this.crrentDateFormat="QUARTER",h()(".quarter").css({"background-color":"#1e8cf8",color:"#fff"}),h()(".month").css({"background-color":"#fff",color:"#000"}),h()(".year").css({"background-color":"#fff",color:"#000"}),this.TargetNum=this.SalesNumdata.QUARTER.TARGET_NUM,this.ActualNum=this.SalesNumdata.QUARTER.ACTUAL_NUM,this.TargetMoney=this.SalesMoneydata.QUARTER.TARGET_MONEY,this.ActualMoney=this.SalesMoneydata.QUARTER.ACTUAL_MONEY,this.GetRate()},toYear:function(){this.crrentDateFormat="YEAR",h()(".year").css({"background-color":"#1e8cf8",color:"#fff"}),h()(".month").css({"background-color":"#fff",color:"#000"}),h()(".quarter").css({"background-color":"#fff",color:"#000"}),this.TargetNum=this.SalesNumdata.YEAR.TARGET_NUM,this.ActualNum=this.SalesNumdata.YEAR.ACTUAL_NUM,this.TargetMoney=this.SalesMoneydata.YEAR.TARGET_MONEY,this.ActualMoney=this.SalesMoneydata.YEAR.ACTUAL_MONEY,this.GetRate()}}},Vo={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"PerformanceTrack"},[s("componentHeader",{attrs:{headerText:t.headerText,IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"DataPicker"},[s("div",{staticClass:"period"},[s("div",{staticClass:"month",on:{click:t.toMonth}},[t._v("月")]),t._v(" "),s("div",{staticClass:"quarter",on:{click:t.toQuarter}},[t._v("季")]),t._v(" "),s("div",{staticClass:"year",on:{click:t.toYear}},[t._v("年")])]),t._v(" "),s("div",{staticClass:"elDate"},[s("el-date-picker",{attrs:{type:"month",editable:!1,placeholder:"选择月",format:"yyyy 年 MM 月","value-format":"yyyy-MM"},model:{value:t.InventoryMonth,callback:function(e){t.InventoryMonth=e},expression:"InventoryMonth"}})],1)]),t._v(" "),s("div",{staticClass:"CustomerVisitStatistics AssessmentSales"},[t._m(0),t._v(" "),s("div",[s("div",[s("div",[t._v(t._s(t.TargetNum))]),t._v(" "),s("div",[t._v("目标销售量")])]),t._v(" "),s("div",[s("div",[t._v(t._s(t.ActualNum))]),t._v(" "),s("div",[t._v("实际销售量")])]),t._v(" "),s("div",[s("div",[t._v(t._s(t.NumRate))]),t._v(" "),s("div",[t._v("达成率")])])])]),t._v(" "),s("div",{staticClass:"CustomerVisitStatistics AssessmentSales"},[t._m(1),t._v(" "),s("div",[s("div",[s("div",[t._v(t._s(t.TargetMoney))]),t._v(" "),s("div",[t._v("目标销售额")])]),t._v(" "),s("div",[s("div",[t._v(t._s(t.ActualMoney))]),t._v(" "),s("div",[t._v("实际销售额")])]),t._v(" "),s("div",[s("div",[t._v(t._s(t.MoneyRate))]),t._v(" "),s("div",[t._v("达成率")])])]),t._v(" "),t._m(2)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"StatisticsHead"},[e("div",[e("span",[this._v("销售量考核")])]),this._v(" "),e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"StatisticsHead"},[e("div",[e("span",[this._v("销售额考核")])]),this._v(" "),e("div")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"SalesReports"},[e("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"SaleroomReports"}})])}]};var Fo=s("VU/8")(ko,Vo,!1,function(t){s("XsAX")},"data-v-29187ef0",null).exports,Bo={name:"FeeBill",data:function(){return{customerInfo:{},bill_list:[]}},created:function(){var t=this;this.$route.query.customerInfo&&(this.customerInfo=this.$route.query.customerInfo);var e={businessId:t.$store.state.businessInfo.businessId,appUsersId:t.$store.state.userInfo.user_id};this.httpRequest("getAppBillFeeList.do",e,function(e){t.bill_list=e.data})},components:{componentHeader:_},methods:{f_Fanhui:function(){this.$router.push({name:"PurchaseOrder",query:{whoPush:"FeeBill"}})},toDetail:function(t){this.$router.push({name:"FeeBillDetail",query:{monthDate:this.bill_list[t].FEE_DATE,customerInfo:this.customerInfo}})}}},qo={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"FeeBill"},[s("componentHeader",{attrs:{headerText:"账单列表",IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"v-f-parent"},t._l(t.bill_list,function(e,o){return s("div",{key:o,staticClass:"v-f-bill",attrs:{id:o},on:{click:function(e){return t.toDetail(o)}}},[s("p",[s("span",[t._v("账单名称：")]),t._v(t._s(e.FEE_NAME))]),t._v(" "),s("p",[s("span",[t._v("账单月份：")]),t._v(t._s(e.FEE_DATE))])])}),0)])],1)},staticRenderFns:[]};var Ho=s("VU/8")(Bo,qo,!1,function(t){s("u2AE")},"data-v-cd934b26",null).exports,Go={name:"FeeBillDetail",data:function(){return{customerInfo:{},monthDate:"",fee:{AppBusinessFee:{INITIAL_BALANCE:"0"}}}},created:function(){var t=this;this.$route.query.customerInfo&&(this.customerInfo=this.$route.query.customerInfo),this.$route.query.monthDate&&(this.monthDate=this.$route.query.monthDate);var e={businessId:t.$store.state.businessInfo.businessId,customerId:t.customerInfo.CUSTOMER_ID,monthDate:t.monthDate};this.httpRequest("getAppBusinessFeeList.do",e,function(e){t.$store.state.FeeBillDetail_feeBill=e.data,t.fee=e.data})},components:{componentHeader:_},methods:{f_Fanhui:function(){this.$router.push({name:"FeeBill",query:{customerInfo:this.customerInfo}})},PackUp:function(t,e){"block"==h()("."+e).css("display")?(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(-90deg)"}),h()("."+e).hide(200)):(h()("."+t+" i.icon-xiangxia").css({transform:"translateY(-50%) rotate(0deg)"}),h()("."+e).show(200))}}},Qo={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"FeeBillDetail"},[s("componentHeader",{attrs:{headerText:"账单明细",IfFanhuiShow:!0},on:{f_Fanhui:t.f_Fanhui}}),t._v(" "),s("div",{staticClass:"container haveHeadcontainer"},[s("div",{staticClass:"date-c"},[t._v(t._s(t.monthDate))]),t._v(" "),s("div",{staticClass:"customer-c"},[s("p",[t._v("客户代码："),s("span",[t._v(t._s(t.customerInfo.CUSTOMER_CODE))])]),t._v(" "),s("p",[t._v("客户名称："),s("span",[t._v(t._s(t.customerInfo.CUSTOMER_NAME))])]),t._v(" "),s("p",[t._v("业务代码："),s("span",[t._v(t._s(t.$store.state.businessInfo.businessCode))])]),t._v(" "),s("p",[t._v("业务名称："),s("span",[t._v(t._s(t.$store.state.businessInfo.name))])])]),t._v(" "),s("div",{staticClass:"detail-list"},[s("div",[t._v("期初余额："),s("span",[t._v(t._s(t.fee.AppBusinessFee.INITIAL_BALANCE))])]),t._v(" "),s("div",{staticClass:"help-fee",on:{click:function(e){return t.PackUp("help-fee","v-f-help")}}},[t._v("代垫费用："),s("span",[t._v(t._s(t.fee.AppBusinessFee.SUM_FEE))]),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),t._l(t.fee.partySumFeeList,function(e,o){return s("div",{key:"info1-"+o,staticClass:"list v-f-help",attrs:{id:o}},[s("p",[t._v("总结编号："+t._s(e.FEE_NAME))]),t._v(" "),s("p",[t._v("活动名称："+t._s(e.FEE_DATE))]),t._v(" "),s("p",[t._v("　　金额："+t._s(e.FEE_AMOUNT))])])}),t._v(" "),s("div",{staticClass:"tran-fee",on:{click:function(e){return t.PackUp("tran-fee","v-f-tran")}}},[t._v("费用转移："),s("span",[t._v(t._s(t.fee.AppBusinessFee.COST_TRANSFER))]),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),t._l(t.fee.partyCostTransferList,function(e,o){return s("div",{key:"info2-"+o,staticClass:"list v-f-tran",attrs:{id:o}},[s("p",[t._v("日期："+t._s(e.FEE_DATE))]),t._v(" "),s("p",[t._v("客户："+t._s(e.FEE_NAME))]),t._v(" "),s("p",[t._v("金额："+t._s(e.FEE_AMOUNT))])])}),t._v(" "),s("div",{staticClass:"bank-fee",on:{click:function(e){return t.PackUp("bank-fee","v-f-bank")}}},[t._v("银行转账："),s("span",[t._v(t._s(t.fee.AppBusinessFee.BANK_TRANSFER))]),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),t._l(t.fee.partyBankTransferList,function(e,o){return s("div",{key:"info3-"+o,staticClass:"list v-f-bank",attrs:{id:o}},[s("p",[t._v("日期："+t._s(e.FEE_DATE))]),t._v(" "),s("p",[t._v("金额："+t._s(e.FEE_AMOUNT))])])}),t._v(" "),s("div",{staticClass:"sale-fee",on:{click:function(e){return t.PackUp("sale-fee","v-f-sale")}}},[t._v("销售金额："),s("span",[t._v(t._s(t.fee.AppBusinessFee.SUM_PRICE))]),s("i",{staticClass:"iconfont icon-xiangxia"})]),t._v(" "),t._l(t.fee.partySumPriceList,function(e,o){return s("div",{key:"info4-"+o,staticClass:"list v-f-sale",attrs:{id:o}},[s("p",[t._v("订单号："+t._s(e.FEE_NAME))]),t._v(" "),s("p",[t._v("订单数："+t._s(e.FEE_DATE))]),t._v(" "),s("p",[t._v("　金额："+t._s(e.FEE_AMOUNT))])])}),t._v(" "),s("div",[t._v("本月留存余额："),s("span",[t._v(t._s(t.fee.AppBusinessFee.BALANCE_TRANSFER))])]),t._v(" "),t._m(0)],2)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"prompt"},[e("div",[e("p",[this._v("尊敬的各经销商客户: 以下为我司出具的对账单须知事项")]),this._v(" "),e("p",[this._v("1、次月10号前我司出具所有客户对账单")]),this._v(" "),e("p",[this._v("2、【本月留存余额】为截止当月月末余额")]),this._v(" "),e("p",[this._v("3、【本月留存余额】若显示负数，表示该客户存在欠款。")])])])}]};var Wo=s("VU/8")(Go,Qo,!1,function(t){s("6vPb")},"data-v-13265d04",null).exports;r.default.use(u.a);var Yo=new u.a({routes:[{path:"/",component:T,name:"Login"},{path:"/WXLogin",name:"WXLogin",component:q},{path:"/WXVerify",name:"WXVerify",component:Q},{path:"/WXAssociatedStores",name:"WXAssociatedStores",component:X},{path:"/Binding",name:"Binding",component:K},{path:"/ForgotPwd",name:"ForgotPwd",component:y},{path:"/Identifying",name:"Identifying",component:E},{path:"/Index",name:"Index",component:$,meta:["首页"]},{path:"/MessageList",name:"MessageList",component:M},{path:"/MessageDetail",name:"MessageDetail",component:V},{path:"/Home",name:"Home",component:tt},{path:"/RePassword",name:"RePassword",component:ot},{path:"/UserInfo",name:"UserInfo",component:nt},{path:"/AppQuestion",name:"AppQuestion",component:ct},{path:"/Answer",name:"Answer",component:ht},{path:"/PurchaseOrder",name:"PurchaseOrder",component:mt},{path:"/SalesOrder",name:"SalesOrder",component:Tt},{path:"/QueryPurchaseOrder",name:"QueryPurchaseOrder",component:yt},{path:"/PurchaseOrderDetail",name:"PurchaseOrderDetail",component:Ot},{path:"/LogisticsInfo",name:"LogisticsInfo",component:xt},{path:"/LogisticsInfoDetail",name:"LogisticsInfoDetail",component:wt},{path:"/CheckSchedule",name:"CheckSchedule",component:kt},{path:"/CheckDeliverPicture",name:"CheckDeliverPicture",component:Bt},{path:"/QuerySalesOrder",name:"QuerySalesOrder",component:Gt},{path:"/OutboundDetail",name:"OutboundDetail",component:Jt},{path:"/ChooseGoods",name:"ChooseGoods",component:ee},{path:"/OrderConfirm",name:"OrderConfirm",component:ie},{path:"/AddFreeGift",name:"AddFreeGift",component:re},{path:"/CustomerVisit",name:"CustomerVisit",component:ve},{path:"/RecomRoute",name:"RecomRoute",component:fe},{path:"/HistoryVisit",name:"HistoryVisit",component:ge},{path:"/VisitRecord",name:"VisitRecord",component:Se},{path:"/CreateNewCustomer",name:"CreateNewCustomer",component:je},{path:"/CreateNewVisit",name:"CreateNewVisit",component:Re},{path:"/CreateCustomerWeChat",name:"CreateCustomerWeChat",component:Je},{path:"/IntoTheShop",name:"IntoTheShop",component:Oe},{path:"/CheckInventory",name:"CheckInventory",component:xe},{path:"/SuggestOrder",name:"SuggestOrder",component:we},{path:"/VividDisplay",name:"VividDisplay",component:ke},{path:"/LeaveStore",name:"LeaveStore",component:Be},{path:"/InventoryManage",name:"InventoryManage",component:us},{path:"/SelectStores",name:"SelectStores",component:vs},{path:"/SelectSalesman",name:"SelectSalesman",component:fs},{path:"/InventoryQuery",name:"InventoryQuery",component:gs},{path:"/InventoryDetails",name:"InventoryDetails",component:Ss},{path:"/InventoryRegister",name:"InventoryRegister",component:Ps},{path:"/InventoryRegDetail",name:"InventoryRegDetail",component:Ns},{path:"/AddInventory",name:"AddInventory",component:bs},{path:"/AddInventoryConfirmInfo",name:"AddInventoryConfirmInfo",component:Us},{path:"/CustomerAllInventoryReg",name:"CustomerAllInventoryReg",component:Fs},{path:"/WarehousingDetail",name:"WarehousingDetail",component:Hs},{path:"/PutInStorageDetails",name:"PutInStorageDetails",component:Ws},{path:"/AllOutgoingDetails",name:"AllOutgoingDetails",component:js},{path:"/AccessDetails",name:"AccessDetails",component:Rs},{path:"/CustomerList",name:"CustomerList",component:Ge},{path:"/ModifyCustomerInfo",name:"ModifyCustomerInfo",component:es},{path:"/ChooseAddress",name:"ChooseAddress",component:is},{path:"/SendLnglat",name:"SendLnglat",component:rs},{path:"/ReportCenter",name:"ReportCenter",component:Js},{path:"/CustomerSalesReport",name:"CustomerSalesReport",component:eo},{path:"/CustomerSalesDetailReport",name:"CustomerSalesDetailReport",component:no},{path:"/ProductSalesReport",name:"ProductSalesReport",component:uo},{path:"/ProductSalesDetailReport",name:"ProductSalesDetailReport",component:vo},{path:"/Report",name:"Report",component:fo},{path:"/CustomerVisitReport",name:"CustomerVisitReport",component:go},{path:"/SalesPerformanceReport",name:"SalesPerformanceReport",component:So},{path:"/ProcurementSum",name:"ProcurementSum",component:Ro},{path:"/PerformanceRanking",name:"PerformanceRanking",component:Po},{path:"/ospPerformanceRanking",name:"ospPerformanceRanking",component:No},{path:"/ProductSalesRanking",name:"ProductSalesRanking",component:bo},{path:"/sale_of_salesman_kb",name:"sale_of_salesman_kb",component:Uo},{path:"/PerformanceTrack",name:"PerformanceTrack",component:Fo},{path:"/FeeBill",name:"FeeBill",component:Ho},{path:"/FeeBillDetail",name:"FeeBillDetail",component:Wo}]}),Xo=(s("NWtE"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:this.Loading,expression:"Loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app",type:"primary","element-loading-text":this.loadingText}},[e("router-view",{on:{isLoading:this.fullscreenLoading}})],1)},staticRenderFns:[]});var jo=s("VU/8")({name:"App",data:function(){return{Loading:!1,loadingText:"拼命加载中"}},methods:{fullscreenLoading:function(t,e){this.Loading=t,e&&(this.loadingText=e)}}},Xo,!1,function(t){s("zZD9")},null,null).exports,zo=s("mw3O"),Ko=s.n(zo),Jo=s("NYxO");r.default.use(Jo.a);var Zo=new Jo.a.Store({state:{userInfo:[],businessInfo:{},BackBottle:{g_submitArr:[],totalNum:0,ConsigneeData_selected:[],DeliveryAddr_selected:[]},OptionsGiftNumberList:{},OptionsAvailableGift:[],OptionsGiftChosenCart:[],ORDER_REQUEST_DELIVERY:"",ORDER_REMARK_VALUE:"",SumMergeOrderList:[],CurrentVisitId:0,CurrentStoresId:0,CurrentStoresHistoryInfo:{},VisitStateList:[{name:"全部",status:"QB",color:""},{name:"已拜访",status:"QB",color:"#b0b0b0"},{name:"拜访中",status:"QB",color:"#E4C479"},{name:"未拜访",status:"QB",color:"#DB3736"}],VisitConditionUserHabits:{VisitLine:"",VisitState:""},visitObject:"",InventoryOspInfo:{},AddInventory_pagesData:[],InventoryRegALL_CustomerInfo:{},CustomerInfoOspInfo:{},StoreInfo:{CustomerName:"",CustomerCode:"",ChannelList:[],VisitLineList:[],VisitRouteName:"",CustomerRemark:"",Consignee:"",ContactTel:"",Location:"",province:"",cityChinese:"",districict:"",street:"",AddressDetail:"",longitude:"",latitude:""},RoleTotalData:[{id:0,business:2,ChineseRoleName:"一级管理员",EnglishRoleName:"admin"},{id:1,business:5,ChineseRoleName:"一级业务员",EnglishRoleName:"adminSalesman"},{id:2,business:4,ChineseRoleName:"终端服务商",EnglishRoleName:"osp"},{id:3,business:6,ChineseRoleName:"终端服务商业务员",EnglishRoleName:"ospSalesman"},{id:4,business:13800,ChineseRoleName:"门店员工",EnglishRoleName:"storesStaff"}],CurrentRole:"",CurrentRoleData:{},RoleModuleTotalData:{admin:{CustomerVisit:1,InventoryManage:0,PerformanceTrack:0,ReportCenter:1,CustomerList:0,SalesOrder:0,PurchaseOrder:0,QuerySalesOrder:1,QueryPurchaseOrder:1,RePassword:1,AppQuestion:1},adminSalesman:{CustomerVisit:1,InventoryManage:1,PerformanceTrack:1,ReportCenter:1,CustomerList:1,SalesOrder:0,PurchaseOrder:1,QuerySalesOrder:0,QueryPurchaseOrder:1,RePassword:1,AppQuestion:1},osp:{CustomerVisit:1,InventoryManage:1,PerformanceTrack:0,ReportCenter:1,CustomerList:1,SalesOrder:1,PurchaseOrder:1,QuerySalesOrder:1,QueryPurchaseOrder:1,RePassword:1,AppQuestion:1},ospSalesman:{CustomerVisit:1,InventoryManage:1,PerformanceTrack:1,ReportCenter:1,CustomerList:1,SalesOrder:1,PurchaseOrder:0,QuerySalesOrder:1,QueryPurchaseOrder:0,RePassword:1,AppQuestion:1},storesStaff:{CustomerVisit:0,InventoryManage:0,PerformanceTrack:0,ReportCenter:0,CustomerList:0,SalesOrder:0,PurchaseOrder:0,QuerySalesOrder:0,QueryPurchaseOrder:0,RePassword:1,AppQuestion:1}},Device:"",WX_Openid:"",App_Version:"",G_AppOrWX:"APP",version:26,GopenId:"",WXRegIdentifyPhone:"",WXRegLoginOrReg:"",WXRegCode:"",CountDown:"",MinuteNum:60,QuerySalesOrder_supplierListIdx:0,CustomerVisit_supplierListIdx:0,SalesOrder_supplierListIdx:0,QuerySalesOrder_searchValue:""}}),ti=s("U7mS"),ei=s.n(ti),si=s("Au9i"),oi=(s("d8/S"),s("ibnl")),ii=s.n(oi);s("tOCg");if(r.default.component(si.Loadmore.name,si.Loadmore),r.default.use(ii.a),r.default.use(c.a),r.default.use(d.DatePicker),r.default.use(d.Upload),r.default.use(d.Loading),r.default.prototype.$notify=d.Notification,r.default.prototype.$msgbox=d.MessageBox,r.default.prototype.$alert=d.MessageBox.alert,r.default.prototype.$confirm=d.MessageBox.confirm,r.default.prototype.$prompt=d.MessageBox.prompt,r.default.config.productionTip=!1,r.default.prototype.HOST_xsy="http://mobile.kaidongyuan.com/easyToSell/",r.default.prototype.HOST_lxq="http://mobile.kaidongyuan.com/easyToSell/",r.default.prototype.HOST="http://mobile.kaidongyuan.com/easyToSell/","Login"!=Yo.name){var ai=function(t){for(var e=window.location.search.substring(1).split("&"),s=0;s<e.length;s++){var o=e[s].split("=");if(o[0]==t)return o[1]}return!1}("nav");ai?Yo.push({name:"WXLogin",query:{nav:ai}}):Yo.push({name:"Login",query:{}})}r.default.prototype.TelliOSORAndroidVueOfGetCurrentLocMounted=function(){try{CallAndroidOrIOS.callAndroid("获取当前位置页面已加载","")}catch(t){}try{CallAndroidOrIOS("获取当前位置页面已加载","")}catch(t){}},r.default.prototype.ViewTrajectoryInMain=function(t,e,s){console.log("ID: "+t+"，shipmentCode: "+e+"shipmentStatus: "+s);try{CallAndroidOrIOS.callAndroid("查看路线",t),CallAndroidOrIOS.callAndroid("查看路线",t,e,s)}catch(t){}try{CallAndroidOrIOS("查看路线",t,e,s)}catch(t){}},r.default.prototype.httpRequest=function(t,e,s,o){var i=this;o&&"isLoading_"==o?i.$emit("isLoading_",!0,"拼命加载中"):i.$emit("isLoading",!0,"拼命加载中"),A.a.post(i.HOST+t,{params:n()(e)}).then(function(t){if(console.log(t),o&&"isLoading_"==o?i.$emit("isLoading_",!1):i.$emit("isLoading",!1),1==t.data.status)s(t.data);else{var e="请求失败";t.data.Msg&&(e=t.data.Msg),i.$message.error(e)}}).catch(function(t){o&&"isLoading_"==o?i.$emit("isLoading_",!1):i.$emit("isLoading",!1),i.$message.error("请求失败")})},r.default.prototype.setCookie=function(t,e,s){var o=new Date;o.setTime(o.getTime()+864e5*s),window.document.cookie="easyToSellUserName="+t+";path=/;expires="+o.toGMTString(),window.document.cookie="easyToSellUserPwd="+e+";path=/;expires="+o.toGMTString()},r.default.prototype.getCookie=function(t){if(document.cookie.length>0)for(var e=document.cookie.split("; "),s=0;s<e.length;s++){var o=e[s].split("=");"easyToSellUserName"==o[0]?this.userName=o[1]:"easyToSellUserPwd"==o[0]&&(this.password=o[1])}},r.default.prototype.clearCookie=function(){this.setCookie("","",-1)},r.default.prototype.KeepUserNameAndPassord=function(t,e){try{CallAndroidOrIOS.callAndroid("记住帐号密码",t,e)}catch(t){console.log("没有CallAndroidOrIOS.callAndroid方法")}try{CallAndroidOrIOS("记住帐号密码",t,e)}catch(t){console.log("没有CallAndroidOrIOS方法")}},r.default.prototype.setWXCookie_openid=function(t){var e=new Date;e.setTime(e.getTime()+31536e6),window.document.cookie="openid="+t+";path=/;expires="+e.toGMTString()},r.default.prototype.getWXCookie_openid=function(t){if(document.cookie.length>0)for(var e=document.cookie.split("; "),s=0;s<e.length;s++){var o=e[s].split("=");"openid"==o[0]&&(this.$store.state.GopenId=o[1])}},r.default.prototype.setWXCookie=function(t,e,s){var o=new Date;o.setTime(o.getTime()+864e5*s),window.document.cookie="easyToSellWXUserName="+t+";path=/;expires="+o.toGMTString(),window.document.cookie="easyToSellWXUserPwd="+e+";path=/;expires="+o.toGMTString()},r.default.prototype.getWXCookie=function(t){if(document.cookie.length>0)for(var e=document.cookie.split("; "),s=0;s<e.length;s++){var o=e[s].split("=");"easyToSellWXUserName"==o[0]?this.storeCode=o[1]:"easyToSellWXUserPwd"==o[0]&&(this.loginPswd=o[1])}},r.default.prototype.setWXPhoneCookie=function(t,e){var s=new Date;s.setTime(s.getTime()+864e5*e),window.document.cookie="easyToSellWXPhone="+t+";path=/;expires="+s.toGMTString()},r.default.prototype.getWXPhoneCookie=function(t){if(document.cookie.length>0)for(var e=document.cookie.split("; "),s=0;s<e.length;s++){var o=e[s].split("=");"easyToSellWXPhone"==o[0]&&(this.phoneNum=o[1])}},r.default.prototype.setWXUserLoginHabitsCookie=function(t,e){var s=new Date;s.setTime(s.getTime()+864e5*e),window.document.cookie="easyToSellWXUserLoginHabits="+t+";path=/;expires="+s.toGMTString()},r.default.prototype.getWXUserLoginHabitsCookie=function(t){if(document.cookie.length>0)for(var e=document.cookie.split("; "),s=0;s<e.length;s++){var o=e[s].split("=");"easyToSellWXUserLoginHabits"==o[0]&&(o[1].length>0?this.UserLoginHabits=o[1]:this.UserLoginHabits="accountPassword")}},r.default.prototype.BubbleSort=function(t,e,s){if(s)var o=t.sort(function(t,s){return t[e]-s[e]});else o=t.sort(function(t,s){return s[e]-t[e]});return o},r.default.prototype.SortArr=function(t,e,s,o){h()(".NumSort").css("color","#EC662C");var i=this.BubbleSort(this[t],e,this[s]);return this[s]?(this[s]=!1,h()(".NumSort i").css("transform","rotate(90deg)")):(this[s]=!0,h()(".NumSort i").css("transform","rotate(70deg)")),i.unshift(1),i.shift(),this[t]=i,!1},r.default.prototype.getNowTime=function(t){var e,s,o,i,a,n=new Date;function r(t,e){return t<10?"0"+t:t}return s=r(n.getDate()),e=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,t&&"getDate"==t?n.getFullYear()+"-"+e+"-"+s:t&&"getMonthFirstDay"==t?n.getFullYear()+"-"+e+"-01":(o=r(n.getHours()),i=r(n.getMinutes()),a=r(n.getSeconds()),n.getFullYear()+"-"+e+"-"+s+" "+o+":"+i+":"+a)},r.default.prototype.getDayWithYearMonth=function(t,e){return 1==e||3==e||5==e||7==e||8==e||10==e||12==e?31:2==e?t%4==0?29:28:4==e||6==e||9==e||11==e?30:void 0},r.default.prototype.sortByKeyDesc=function(t,e){return t.sort(function(t,s){var o=t[e],i=s[e];return o>i?-1:o>i?1:0})},r.default.prototype.beforeUpload=function(t){if("iOS"!=this.$store.state.Device)return ei()(t).then(function(t){return t.file}).catch(function(e){return t})},r.default.prototype.callPhone=function(t){event.stopPropagation(),window.location.href="tel://"+t},r.default.prototype.clearInput=function(t){this[t]=""},A.a.interceptors.request.use(function(t){return console.log(t.data),"post"==t.method&&(t.data=Ko.a.stringify(t.data)),t},function(t){return i.a.reject(t)}),A.a.interceptors.response.use(function(t){return t},function(t){return i.a.reject(t)}),new r.default({el:"#app",router:Yo,Axios:A.a,store:Zo,$:h.a,components:{App:jo},template:"<App/>"})},NWtE:function(t,e){},NzKg:function(t,e){},O1YD:function(t,e){},"OT+V":function(t,e){},PAiN:function(t,e){},Pju0:function(t,e){},Q7n1:function(t,e){},"QIE+":function(t,e){},QKcR:function(t,e){},"S+MP":function(t,e){},UBBn:function(t,e){},UBwj:function(t,e){},WBGS:function(t,e){},WWjl:function(t,e){},WYsb:function(t,e){},"X/tL":function(t,e){},XOk4:function(t,e){},Xr9C:function(t,e){},XsAX:function(t,e){},Xvjc:function(t,e){},Z2WP:function(t,e){},"bE+W":function(t,e){},"bJ2+":function(t,e){},"d8/S":function(t,e){},duch:function(t,e){},fS8C:function(t,e){},faXu:function(t,e){},fpwy:function(t,e){},gGzv:function(t,e){},hqGP:function(t,e){},hr20:function(t,e){},iI5B:function(t,e){},jMoi:function(t,e){},jdbw:function(t,e){},jeLG:function(t,e){},l73M:function(t,e){},lsM6:function(t,e){},mf1j:function(t,e){},nEBk:function(t,e){},oVfc:function(t,e){},qHsS:function(t,e){},qUmM:function(t,e){},s2GP:function(t,e){},s6ma:function(t,e){},tOCg:function(t,e){},tuhg:function(t,e){},tvR6:function(t,e){},u2AE:function(t,e){},uRbv:function(t,e){},upUl:function(t,e){},"y/GU":function(t,e){},yv5a:function(t,e){},zZD9:function(t,e){},zgRF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.98749428f06a753810a0.js.map